{
  "version": 3,
  "sources": ["../../src/logo.js"],
  "sourcesContent": ["// logo.js controls logo animations.\r\n\r\n// Global control variables\r\n//For nav-bar logo\r\nvar rotateFlag = false;\r\nvar leaveCounter = 0;\r\nvar currentVelocity = 0;\r\n\r\nfunction logoInit() {\r\n  //Add nav-bar events --> logo rotation\r\n  let titleElement = document.querySelector(\"#nav-bar__title\");\r\n  titleElement.addEventListener(\"mouseenter\", startRotateLogo);\r\n  titleElement.addEventListener(\"mouseleave\", stopRotateLogo);\r\n\r\n  //Add tooltip events to every tab-bar link (game icon)\r\n  // TODO - There is no tab-bar anymore. This should fire when clicking a game on the game search or (future) home page games.\r\n  document\r\n    .querySelectorAll(\".nav-bar__tab-bar--links\")\r\n    .forEach((tabBarLink) => {\r\n      tabBarLink.addEventListener(\"click\", () => {\r\n        //When clicking on any game, rotate the logo a bit\r\n        if (!rotateFlag && leaveCounter == 0) {\r\n          currentVelocity = 3.3;\r\n          leaveCounter = 200;\r\n          requestAnimationFrame(rotateLogo);\r\n        } else {\r\n          currentVelocity = 3.3;\r\n          leaveCounter = 200;\r\n        }\r\n      });\r\n    });\r\n}\r\n\r\nif (document.readyState !== \"loading\") {\r\n  logoInit(); // Or setTimeout(logoInit, 0);\r\n} else {\r\n  document.addEventListener(\"DOMContentLoaded\", logoInit);\r\n}\r\n\r\n// --- Functions related to rotating logo\r\nfunction startRotateLogo() {\r\n  //On mouseover, start animation\r\n  if (!rotateFlag && leaveCounter == 0) {\r\n    rotateFlag = true;\r\n    requestAnimationFrame(rotateLogo);\r\n  } else {\r\n    rotateFlag = true;\r\n    leaveCounter = 200;\r\n  }\r\n}\r\n\r\nfunction stopRotateLogo() {\r\n  //On mouseleave, change flag so rotateLogo() makes the logo slow down\r\n  rotateFlag = false;\r\n}\r\n\r\nfunction rotateLogo() {\r\n  //Get logo style properties\r\n  let logo = document.querySelector(\"#nav-bar__title__logo\");\r\n  let st = getComputedStyle(logo, null);\r\n  //Get transform property\r\n  let tr = st.getPropertyValue(\"transform\");\r\n  let values = tr.split(\"(\")[1].split(\")\")[0].split(\",\");\r\n  let a = values[0];\r\n  let b = values[1];\r\n  //Convert angle\r\n  let currentAngle = Math.atan2(b, a) * (180 / Math.PI);\r\n  //Speed up if the mouse is in the logo, slow down if not\r\n  if (rotateFlag) {\r\n    if (currentVelocity < 1.8) {\r\n      currentVelocity = currentVelocity + 0.06;\r\n    }\r\n  } else {\r\n    if (currentVelocity > 0) {\r\n      currentVelocity = currentVelocity - 0.03;\r\n    }\r\n  }\r\n\r\n  if (currentVelocity < 0) {\r\n    currentVelocity = 0;\r\n  }\r\n\r\n  if (currentAngle < 0) {\r\n    currentAngle = currentAngle + 360;\r\n  }\r\n\r\n  let angle = currentVelocity + currentAngle;\r\n\r\n  //Update style and start animation again\r\n  logo.style.transform = \"rotate(\" + angle + \"deg)\";\r\n\r\n  if (rotateFlag) {\r\n    leaveCounter = 200;\r\n    requestAnimationFrame(rotateLogo);\r\n  } else {\r\n    // If flag is not set, keep running for ~200 frames to show the logo slowing down\r\n    // In reality, it will run for at most 110 frames since top speed is 3.3\r\n    // TODO - max speed could be a bit faster, but this isn't really a priority right now...\r\n    leaveCounter--;\r\n    if (currentVelocity <= 0) {\r\n      leaveCounter = 0;\r\n    }\r\n    if (leaveCounter > 0) {\r\n      requestAnimationFrame(rotateLogo);\r\n    }\r\n  }\r\n}\r\n"],
  "mappings": "MAIA,IAAIA,EAAa,GACbC,EAAe,EACfC,EAAkB,EAEtB,SAASC,GAAW,CAElB,IAAIC,EAAe,SAAS,cAAc,iBAAiB,EAC3DA,EAAa,iBAAiB,aAAcC,CAAe,EAC3DD,EAAa,iBAAiB,aAAcE,CAAc,EAI1D,SACG,iBAAiB,0BAA0B,EAC3C,QAASC,GAAe,CACvBA,EAAW,iBAAiB,QAAS,IAAM,CAErC,CAACP,GAAcC,GAAgB,GACjCC,EAAkB,IAClBD,EAAe,IACf,sBAAsBO,CAAU,IAEhCN,EAAkB,IAClBD,EAAe,IAEnB,CAAC,CACH,CAAC,CACL,CAEI,SAAS,aAAe,UAC1BE,EAAS,EAET,SAAS,iBAAiB,mBAAoBA,CAAQ,EAIxD,SAASE,GAAkB,CAErB,CAACL,GAAcC,GAAgB,GACjCD,EAAa,GACb,sBAAsBQ,CAAU,IAEhCR,EAAa,GACbC,EAAe,IAEnB,CAEA,SAASK,GAAiB,CAExBN,EAAa,EACf,CAEA,SAASQ,GAAa,CAEpB,IAAIC,EAAO,SAAS,cAAc,uBAAuB,EAIrDC,EAHK,iBAAiBD,EAAM,IAAI,EAExB,iBAAiB,WAAW,EACxB,MAAM,GAAG,EAAE,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC,EAAE,MAAM,GAAG,EACjDE,EAAID,EAAO,CAAC,EACZE,EAAIF,EAAO,CAAC,EAEZG,EAAe,KAAK,MAAMD,EAAGD,CAAC,GAAK,IAAM,KAAK,IAE9CX,EACEE,EAAkB,MACpBA,EAAkBA,EAAkB,KAGlCA,EAAkB,IACpBA,EAAkBA,EAAkB,KAIpCA,EAAkB,IACpBA,EAAkB,GAGhBW,EAAe,IACjBA,EAAeA,EAAe,KAGhC,IAAIC,EAAQZ,EAAkBW,EAG9BJ,EAAK,MAAM,UAAY,UAAYK,EAAQ,OAEvCd,GACFC,EAAe,IACf,sBAAsBO,CAAU,IAKhCP,IACIC,GAAmB,IACrBD,EAAe,GAEbA,EAAe,GACjB,sBAAsBO,CAAU,EAGtC",
  "names": ["rotateFlag", "leaveCounter", "currentVelocity", "logoInit", "titleElement", "startRotateLogo", "stopRotateLogo", "tabBarLink", "rotateLogo", "logo", "values", "a", "b", "currentAngle", "angle"]
}
