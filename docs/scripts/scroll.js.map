{
  "version": 3,
  "sources": ["../../src/scroll.js"],
  "sourcesContent": ["// scroll.js controls the scroll button.\r\n\r\n// Global control variables\r\n//For bottom right scroll button\r\nvar scrollButton = null;\r\nvar rootElement = null;\r\n\r\nfunction scrollInit() {\r\n  //Add scroll button events (icon that appears when you pass ToC)\r\n  scrollButton = document.querySelector(\"#scroll__button--to-top\");\r\n  rootElement = document.documentElement;\r\n  scrollButton.addEventListener(\"click\", scrollToTop);\r\n  window.addEventListener(\"scroll\", handleScroll);\r\n}\r\n\r\nif (document.readyState !== \"loading\") {\r\n  scrollInit(); // Or setTimeout(scrollInit, 0);\r\n} else {\r\n  document.addEventListener(\"DOMContentLoaded\", scrollInit);\r\n}\r\n\r\n// --- Functions related to scrolling effects\r\n// TODO - Once a \"segment\" tab (mechanics, glitches, combat ...) is added to tech pages\r\n// TODO -   have scroll go to that section instead of ToC.\r\n// Checks if scroll icon should be shown to user\r\nfunction handleScroll() {\r\n  //Get current scroll position\r\n  let scrollTotal = rootElement.scrollHeight - rootElement.clientHeight;\r\n  //Get TOC if it exists\r\n  let toc = document.getElementById(\"table-of-contents\");\r\n  let tocLocation = 0;\r\n  if (toc != null) {\r\n    //If TOC exists, calculate the difference between the TOC location and the top of the page\r\n    let bodyRect = document.body.getBoundingClientRect(),\r\n      elemRect = toc.getBoundingClientRect(),\r\n      offset = elemRect.top - bodyRect.top;\r\n\r\n    if (offset > 0) {\r\n      tocLocation = offset;\r\n    }\r\n  }\r\n\r\n  //Test if current scroll position is past the top of the page or the top of the TOC\r\n  if ((rootElement.scrollTop - tocLocation) / scrollTotal > 0.05) {\r\n    // Show button on 5% scroll down\r\n    scrollButton.classList.add(\"scroll__button--to-top--show\");\r\n  } else {\r\n    // Hide button else\r\n    scrollButton.classList.remove(\"scroll__button--to-top--show\");\r\n  }\r\n}\r\n\r\nfunction scrollToTop() {\r\n  //Get TOC if it exists\r\n  let toc = document.getElementById(\"table-of-contents\");\r\n  let tocLocation = 0;\r\n  if (toc != null) {\r\n    //If TOC exists, calculate the difference between the TOC location and the top of the page\r\n    let bodyRect = document.body.getBoundingClientRect(),\r\n      elemRect = toc.getBoundingClientRect(),\r\n      offset = elemRect.top - bodyRect.top;\r\n\r\n    if (offset > 0) {\r\n      tocLocation = offset - 100;\r\n    }\r\n  }\r\n  //Scroll either to top of the page or to TOC smoothly\r\n  rootElement.scrollTo({\r\n    top: tocLocation,\r\n    behavior: \"smooth\",\r\n  });\r\n}\r\n"],
  "mappings": "MAIA,IAAIA,EAAe,KACfC,EAAc,KAElB,SAASC,GAAa,CAEpBF,EAAe,SAAS,cAAc,yBAAyB,EAC/DC,EAAc,SAAS,gBACvBD,EAAa,iBAAiB,QAASG,CAAW,EAClD,OAAO,iBAAiB,SAAUC,CAAY,CAChD,CAEI,SAAS,aAAe,UAC1BF,EAAW,EAEX,SAAS,iBAAiB,mBAAoBA,CAAU,EAO1D,SAASE,GAAe,CAEtB,IAAIC,EAAcJ,EAAY,aAAeA,EAAY,aAErDK,EAAM,SAAS,eAAe,mBAAmB,EACjDC,EAAc,EAClB,GAAID,GAAO,KAAM,CAEf,IAAIE,EAAW,SAAS,KAAK,sBAAsB,EACjDC,EAAWH,EAAI,sBAAsB,EACrCI,EAASD,EAAS,IAAMD,EAAS,IAE/BE,EAAS,IACXH,EAAcG,EAElB,EAGKT,EAAY,UAAYM,GAAeF,EAAc,IAExDL,EAAa,UAAU,IAAI,8BAA8B,EAGzDA,EAAa,UAAU,OAAO,8BAA8B,CAEhE,CAEA,SAASG,GAAc,CAErB,IAAIG,EAAM,SAAS,eAAe,mBAAmB,EACjDC,EAAc,EAClB,GAAID,GAAO,KAAM,CAEf,IAAIE,EAAW,SAAS,KAAK,sBAAsB,EACjDC,EAAWH,EAAI,sBAAsB,EACrCI,EAASD,EAAS,IAAMD,EAAS,IAE/BE,EAAS,IACXH,EAAcG,EAAS,IAE3B,CAEAT,EAAY,SAAS,CACnB,IAAKM,EACL,SAAU,QACZ,CAAC,CACH",
  "names": ["scrollButton", "rootElement", "scrollInit", "scrollToTop", "handleScroll", "scrollTotal", "toc", "tocLocation", "bodyRect", "elemRect", "offset"]
}
