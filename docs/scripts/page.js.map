{
  "version": 3,
  "sources": ["../../src/tooltip.js", "../../src/style.js", "../../node_modules/remarkable/dist/esm/index.browser.js", "../../src/page.js"],
  "sourcesContent": ["// tooltip.js controls tooltips.\r\n\r\nfunction tooltipInit() {\r\n  document\r\n  .querySelectorAll(\".nav-bar__tab-bar--links\")\r\n  .forEach((tabBarLink) => {\r\n    tabBarLink.addEventListener(\"mouseover\", () => {\r\n      loadTooltip(tabBarLink, tabBarLink.dataset.section);\r\n    });\r\n    tabBarLink.addEventListener(\"mouseleave\", () => {\r\n      unloadTooltip();\r\n    });\r\n  });\r\n}\r\n\r\nif (document.readyState !== \"loading\") {\r\n  tooltipInit(); // Or setTimeout(tooltipInit, 0);\r\n} else {\r\n  document.addEventListener(\"DOMContentLoaded\", tooltipInit);\r\n}\r\n\r\n// --- Functions related to tooltips\r\nexport function loadTooltip(tooltip, tooltipText) {\r\n  //Create tooltip element\r\n  let base = document.createElement(\"tooltip\");\r\n  base.id = \"nav-bar__tooltip\";\r\n  let tip = document.createTextNode(tooltipText);\r\n  if (tooltip != null) {\r\n    //Set tooltip contents\r\n    base.innerHTML = \"\";\r\n    base.appendChild(tip);\r\n    //Remove existing tooltip if needed\r\n    if (document.getElementsByTagName(\"tooltip\")[0]) {\r\n      document.getElementsByTagName(\"tooltip\")[0].remove();\r\n    }\r\n    //Set tooltip location and add it to the page\r\n    let boundingBox = tooltip.getBoundingClientRect();\r\n    base.style.top = boundingBox.bottom - 10 + \"px\";\r\n    base.style.left = boundingBox.right + \"px\";\r\n    document.body.appendChild(base);\r\n  }\r\n}\r\n\r\nexport function unloadTooltip() {\r\n  //Remove existing tooltip\r\n  if (document.getElementsByTagName(\"tooltip\")[0]) {\r\n    document.getElementsByTagName(\"tooltip\")[0].remove();\r\n  }\r\n}\r\n", "// style.js contains most of the cosmetic functions.\r\n\r\nvar colorCollection = [\r\n  [\"yellow\", \"#f8d959\"],\r\n  [\"pink\", \"#fe796f\"],\r\n  [\"teal\", \"#45c9c9\"],\r\n  [\"green\", \"#58f15b\"],\r\n  [\"red\", \"#e74a41\"],\r\n  [\"blue\", \"#205aaa\"]\r\n];\r\n\r\n// TODO - VS recomments this being a class... Maybe? Also is a table .js file needed?\r\nexport function sortTables() {\r\n  var getCellValue = function (tr, idx) {\r\n    return tr.children[idx].innerText || tr.children[idx].textContent;\r\n  };\r\n\r\n  var comparer = function (idx, asc) {\r\n    return function (a, b) {\r\n      return (function (v1, v2) {\r\n        return v1 !== \"\" && v2 !== \"\" && !isNaN(v1) && !isNaN(v2)\r\n          ? v1 - v2\r\n          : v1.toString().localeCompare(v2);\r\n      })(getCellValue(asc ? a : b, idx), getCellValue(asc ? b : a, idx));\r\n    };\r\n  };\r\n\r\n  document.querySelectorAll(\"th\").forEach((th) =>\r\n    th.addEventListener(\"click\", () => {\r\n      const table = th.closest(\"table\");\r\n      const tbody = table.querySelector(\"tbody\");\r\n      Array.from(tbody.querySelectorAll(\"tr\"))\r\n        .sort(\r\n          comparer(\r\n            Array.from(th.parentNode.children).indexOf(th),\r\n            (this.asc = !this.asc)\r\n          )\r\n        )\r\n        .forEach((tr) => tbody.appendChild(tr));\r\n    })\r\n  );\r\n}\r\n\r\nexport function treatSpoilers() {\r\n  document.querySelectorAll(\".spoiler\").forEach((spoilerElement) => {\r\n    spoilerElement.addEventListener(\"click\", (event) => {\r\n      event.target.style.background = \"transparent\";\r\n    });\r\n  });\r\n}\r\n\r\nexport function styleImages() {\r\n  var imageList = document.getElementsByTagName(\"img\");\r\n  var contentElement = document.getElementById(\"content\");\r\n  var i;\r\n  for (var i = 0; i < imageList.length; i++) {\r\n    if (contentElement.contains(imageList[i])) {\r\n      imageList[i].classList.add(\"content__figure\");\r\n    }\r\n  }\r\n}\r\n\r\n// --- Function for collapsing headings on tech documents\r\n\r\nvar mouseDown = false;\r\nvar h2Collection = [];\r\nvar startX, scrollLeft;\r\n\r\nexport { h2Collection };\r\n\r\n// TODO - buttons need to change\r\nexport function collapseHeadings(page) {\r\n  h2Collection = [];\r\n  let currentH4 = null;\r\n  let currentH3 = null;\r\n  let currentH2 = null;\r\n  let newInner = \"\";\r\n  let newHeading = \"\";\r\n  let firstH2 = true;\r\n  let currentHTML = page.innerHTML.split(\"\\n\");\r\n  let contentElem = document.getElementById(\"content\");\r\n  for (let i = 0; i < currentHTML.length; i++) {\r\n    // Iterates over all the lines from the created HTML and uses it to create a new document with collapsing headings\r\n    if (currentHTML[i].includes('h4 id=\"')) {\r\n      // Close the div if a h4 is in progress\r\n      if (currentH4) {\r\n        newInner = newInner + \"</div></div>\" + \"\\n\";\r\n      }\r\n\r\n      // Finding reference ID (the id from the original heading)\r\n      currentH4 = currentHTML[i].substring(\r\n        currentHTML[i].indexOf('h4 id=\"') + 7\r\n      );\r\n      currentH4 = currentH4.substring(0, currentH4.indexOf('\"'));\r\n\r\n      // Starts a div for the current heading, divided into title and content\r\n      newInner = newInner + '<div class=\"content__h4\">' + \"\\n\";\r\n      // Removed button\r\n      /*newInner =\r\n        newInner +\r\n        '<button class=\"content__collapse\" data-open=\"' +\r\n        currentH4 +\r\n        \" \" +\r\n        currentH3 +\r\n        \" \" +\r\n        currentH2 +\r\n        '\"><span class=\"material-symbols-rounded\">remove</span></button>';*/\r\n      // Injects the search tags into the h4 --> just after the end of id\r\n      let injectionIndex = currentHTML[i].indexOf('h4 id=\"') + 7 + currentH4.length + 1;\r\n      let injectedSearch = ' data-open=\"' + currentH4 + \" \" + currentH3 + \" \" + currentH2 +'\"';\r\n      let newH4 = currentHTML[i].substr(0, injectionIndex) + injectedSearch + currentHTML[i].substr(injectionIndex);\r\n      newInner = newInner + newH4 + \"\\n\";\r\n      newInner = newInner + '<div class=\"' + currentH4 + '\">' + \"\\n\";\r\n    } else if (currentHTML[i].includes('h3 id=\"')) {\r\n      // Close the div if a h4 or h3 is in progress\r\n      if (currentH4) {\r\n        newInner = newInner + \"</div></div>\" + \"\\n\";\r\n        currentH4 = null;\r\n      }\r\n      if (currentH3) {\r\n        newInner = newInner + '<hr class=\"content__h3--divider\" draggable=\"false\" />' + \"</div></div>\" + \"\\n\";\r\n      }\r\n\r\n      // Finding reference ID (the id from the original heading)\r\n      currentH3 = currentHTML[i].substring(\r\n        currentHTML[i].indexOf('h3 id=\"') + 7\r\n      );\r\n      currentH3 = currentH3.substring(0, currentH3.indexOf('\"'));\r\n\r\n      // Starts a div for the current heading, divided into title and content\r\n      newInner = newInner + '<div class=\"content__h3\">' + \"\\n\";\r\n      newInner =\r\n        newInner +\r\n        '<button class=\"content__collapse\" data-open=\"' +\r\n        currentH3 +\r\n        \" \" +\r\n        currentH2 +\r\n        '\"><span class=\"material-symbols-rounded\">expand_circle_up</span></button>';\r\n      newInner = newInner + currentHTML[i] + \"\\n\";\r\n      newInner = newInner + '<div class=\"' + currentH3 + '\">' + \"\\n\";\r\n    } else if (currentHTML[i].includes('h2 id=\"')) {\r\n      // TODO For H2, create a selector div with the id of the h2container to un-hide\r\n      // TODO   Mechanics is open by default\r\n      // TODO Most things in this tab will change\r\n      // TODO - so remove button, link id to div, make all default to display-none and show when clicked on the new bar?\r\n      // Close the div if a h4, h3 or h2 is in progress\r\n      firstH2 = false;\r\n      if (currentH4) {\r\n        newInner = newInner + \"</div></div>\" + \"\\n\";\r\n        currentH4 = null;\r\n      }\r\n      if (currentH3) {\r\n        newInner = newInner + \"</div></div>\" + \"\\n\";\r\n        currentH3 = null;\r\n      }\r\n      if (currentH2) {\r\n        newInner = newInner + \"</div></div>\" + \"\\n\";\r\n        h2Collection.push([currentH2, currentH2Text, newInner]);\r\n        newInner = \"\";\r\n      }\r\n\r\n      // Finding reference ID (the id from the original heading)\r\n      currentH2 = currentHTML[i].substring(\r\n        currentHTML[i].indexOf('h2 id=\"') + 7\r\n      );\r\n      currentH2 = currentH2.substring(0, currentH2.indexOf('\"'));\r\n\r\n      // Find text so we can replicate the heading but without the id (moved to div)\r\n      currentH2Text = currentHTML[i].substring(\r\n        currentHTML[i].indexOf('\">') + 2\r\n      );\r\n      currentH2Text = currentH2Text.substring(0, currentH2Text.indexOf('</h2>'));\r\n\r\n      // Starts a div for the current heading, divided into title and content\r\n      newInner = newInner + '<div class=\"content__h2\" id=\"' + currentH2 + '\">' + \"\\n\";\r\n      //newInner = newInner + '<h2>' + currentH2Text + \"</h2>\" + \"\\n\";\r\n      newInner = newInner + '<div class=\"' + currentH2 + '\">' + \"\\n\";\r\n    } else {\r\n      if (firstH2){\r\n        // Within the first lines of the content. Save in another variable since a tab will be added after it\r\n        newHeading = newHeading + currentHTML[i] + \"\\n\";\r\n      } else {\r\n        // Normal text/tags within headings\r\n        newInner = newInner + currentHTML[i] + \"\\n\";\r\n      }\r\n    }\r\n  }\r\n  // Closes divs if any is still open\r\n  if (currentH4) {\r\n    newInner = newInner + \"</div></div>\" + \"\\n\";\r\n  }\r\n  if (currentH3) {\r\n    newInner = newInner + \"</div></div>\" + \"\\n\";\r\n  }\r\n  if (currentH2) {\r\n    newInner = newInner + \"</div></div>\" + \"\\n\";\r\n    h2Collection.push([currentH2, currentH2Text, newInner]);\r\n    newInner = \"\";\r\n  }\r\n\r\n\r\n\r\n  var selectionTab = '<div id=\"content__selector\"><div id=\"content__selectorbox\">';\r\n\r\n  let i = 0;\r\n  while (i < h2Collection.length){\r\n    h2Tag = h2Collection[i][0];\r\n    h2Text = h2Collection[i][1];\r\n    h2Color = colorCollection[i % colorCollection.length];\r\n\r\n    // --- Create the tab\r\n    selectionTab = selectionTab + '<div class=\"content__selectorbox--item\" data-open=\"' + h2Tag + '\" data-highlight=\"' + h2Color[1] + '\">';\r\n    selectionTab = selectionTab + h2Text + '</div>';\r\n\r\n    // --- Next loop\r\n    i++;\r\n  }\r\n\r\n  selectionTab = selectionTab + '</div><hr id=\"content__selectorhr\"></hr></div><div id=\"content__currenth2\"></div>';\r\n\r\n  if (h2Collection.length > 0){\r\n      page.innerHTML = newHeading + selectionTab;\r\n  } else {\r\n      page.innerHTML = newHeading;\r\n  }\r\n\r\n  // TODO : Maybe make this generic so it also works with something like the TOC\r\n  dragScrollElement('#content__selectorbox', 0);\r\n\r\n  contentElem.style.visibility = \"visible\";\r\n\r\n  // TODO add click events to the selection div\r\n  // Open  h2Collection[0][0]\r\n}\r\n\r\nexport function dragScrollElement(query, direction) {\r\n  const sliderSelector = document.querySelector(query);\r\n\r\n  let startDraggingX = function (e) {\r\n    mouseDown = true;\r\n    startX = e.pageX - sliderSelector.offsetLeft;\r\n    if (isNaN(startX)) {\r\n      startX = e.changedTouches[0].pageX - sliderSelector.offsetLeft;\r\n    }\r\n    scrollLeft = sliderSelector.scrollLeft;\r\n  };\r\n\r\n  let startDraggingY = function (e) {\r\n    mouseDown = true;\r\n    startY = e.pageY - sliderSelector.offsetTop;\r\n    if (isNaN(startY)) {\r\n      startY = e.changedTouches[0].pageY - sliderSelector.offsetTop;\r\n    }\r\n    scrollTop = sliderSelector.scrollTop;\r\n  };\r\n\r\n  let moveX = function (e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if(!mouseDown) { return; }\r\n    const x = e.pageX - sliderSelector.offsetLeft;\r\n    const scroll = x - startX;\r\n    if (isNaN(x)) {\r\n      const x = e.changedTouches[0].pageX - sliderSelector.offsetLeft;\r\n      const scroll = x - startX;\r\n      sliderSelector.scrollLeft = scrollLeft - scroll;\r\n    } else {\r\n      sliderSelector.scrollLeft = scrollLeft - scroll;\r\n    }\r\n  };\r\n\r\n  let moveY = function (e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if(!mouseDown) { return; }\r\n    const y = e.pageY - sliderSelector.offsetTop;\r\n    const scroll = y - startY;\r\n    if (isNaN(y)) {\r\n      const y = e.changedTouches[0].pageY - sliderSelector.offsetTop;\r\n      const scroll = y - startY;\r\n      sliderSelector.scrollTop = scrollTop - scroll;\r\n    } else {\r\n      sliderSelector.scrollTop = scrollTop - scroll;\r\n    }\r\n  };\r\n\r\n  let stopDragging = function (event) {\r\n    mouseDown = false;\r\n  };\r\n\r\n  // Add the event listeners\r\n  if (direction == 1){\r\n    sliderSelector.addEventListener('mousemove', moveY, false);\r\n    sliderSelector.addEventListener('mousedown', startDraggingY, false);\r\n    sliderSelector.addEventListener('mouseup', stopDragging, false);\r\n    sliderSelector.addEventListener('mouseleave', stopDragging, false);\r\n\r\n    // For mobile\r\n    sliderSelector.addEventListener('touchmove', moveY, false);\r\n    sliderSelector.addEventListener('touchstart', startDraggingY, false);\r\n    sliderSelector.addEventListener('touchend', stopDragging, false);\r\n  } else {\r\n    sliderSelector.addEventListener('mousemove', moveX, false);\r\n    sliderSelector.addEventListener('mousedown', startDraggingX, false);\r\n    sliderSelector.addEventListener('mouseup', stopDragging, false);\r\n    sliderSelector.addEventListener('mouseleave', stopDragging, false);\r\n\r\n    // For mobile\r\n    sliderSelector.addEventListener('touchmove', moveX, false);\r\n    sliderSelector.addEventListener('touchstart', startDraggingX, false);\r\n    sliderSelector.addEventListener('touchend', stopDragging, false);\r\n  }\r\n}\r\n\r\n// --- Function for click events on collapse icons\r\nexport function collapseHeadingStyle(event) {\r\n  // Check the tags related to the current button\r\n  let openTags = event.currentTarget.dataset.open.split(\" \");\r\n  for (let i = 0; i < openTags.length; i++) {\r\n    targetList = document.getElementsByClassName(openTags[i]);\r\n    // Get all objects that are possibly hidden\r\n    for (let target of targetList) {\r\n      if (target.hidden) {\r\n        target.hidden = false;\r\n        // Change the button depending on the current art\r\n        if (event.currentTarget.firstChild.innerHTML == \"expand_circle_down\") {\r\n          event.currentTarget.firstChild.innerHTML = \"expand_circle_up\";\r\n        } else {\r\n          event.currentTarget.firstChild.innerHTML = \"remove\";\r\n        }\r\n      } else if (i == 0) {\r\n        // Only hide if click target is the current heading level and is currently not hidden.\r\n        target.hidden = true;\r\n        // Change the button depending on the current art\r\n        if (event.currentTarget.firstChild.innerHTML == \"expand_circle_up\") {\r\n          event.currentTarget.firstChild.innerHTML = \"expand_circle_down\";\r\n        } else {\r\n          event.currentTarget.firstChild.innerHTML = \"add\";\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n", "var textarea;\n\nfunction decodeEntity(name) {\n  textarea = textarea || document.createElement('textarea');\n  textarea.innerHTML = '&' + name + ';';\n  return textarea.value;\n}\n\n/**\n * Utility functions\n */\n\nfunction typeOf(obj) {\n  return Object.prototype.toString.call(obj);\n}\n\nfunction isString(obj) {\n  return typeOf(obj) === '[object String]';\n}\n\nvar hasOwn = Object.prototype.hasOwnProperty;\n\nfunction has(object, key) {\n  return object\n    ? hasOwn.call(object, key)\n    : false;\n}\n\n// Extend objects\n//\nfunction assign(obj /*from1, from2, from3, ...*/) {\n  var sources = [].slice.call(arguments, 1);\n\n  sources.forEach(function (source) {\n    if (!source) { return; }\n\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be object');\n    }\n\n    Object.keys(source).forEach(function (key) {\n      obj[key] = source[key];\n    });\n  });\n\n  return obj;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\nvar UNESCAPE_MD_RE = /\\\\([\\\\!\"#$%&'()*+,.\\/:;<=>?@[\\]^_`{|}~-])/g;\n\nfunction unescapeMd(str) {\n  if (str.indexOf('\\\\') < 0) { return str; }\n  return str.replace(UNESCAPE_MD_RE, '$1');\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\nfunction isValidEntityCode(c) {\n  /*eslint no-bitwise:0*/\n  // broken sequence\n  if (c >= 0xD800 && c <= 0xDFFF) { return false; }\n  // never used\n  if (c >= 0xFDD0 && c <= 0xFDEF) { return false; }\n  if ((c & 0xFFFF) === 0xFFFF || (c & 0xFFFF) === 0xFFFE) { return false; }\n  // control codes\n  if (c >= 0x00 && c <= 0x08) { return false; }\n  if (c === 0x0B) { return false; }\n  if (c >= 0x0E && c <= 0x1F) { return false; }\n  if (c >= 0x7F && c <= 0x9F) { return false; }\n  // out of range\n  if (c > 0x10FFFF) { return false; }\n  return true;\n}\n\nfunction fromCodePoint(c) {\n  /*eslint no-bitwise:0*/\n  if (c > 0xffff) {\n    c -= 0x10000;\n    var surrogate1 = 0xd800 + (c >> 10),\n        surrogate2 = 0xdc00 + (c & 0x3ff);\n\n    return String.fromCharCode(surrogate1, surrogate2);\n  }\n  return String.fromCharCode(c);\n}\n\nvar NAMED_ENTITY_RE   = /&([a-z#][a-z0-9]{1,31});/gi;\nvar DIGITAL_ENTITY_TEST_RE = /^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i;\n\nfunction replaceEntityPattern(match, name) {\n  var code = 0;\n  var decoded = decodeEntity(name);\n\n  if (name !== decoded) {\n    return decoded;\n  } else if (name.charCodeAt(0) === 0x23/* # */ && DIGITAL_ENTITY_TEST_RE.test(name)) {\n    code = name[1].toLowerCase() === 'x' ?\n      parseInt(name.slice(2), 16)\n    :\n      parseInt(name.slice(1), 10);\n    if (isValidEntityCode(code)) {\n      return fromCodePoint(code);\n    }\n  }\n  return match;\n}\n\nfunction replaceEntities(str) {\n  if (str.indexOf('&') < 0) { return str; }\n\n  return str.replace(NAMED_ENTITY_RE, replaceEntityPattern);\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\nvar HTML_ESCAPE_TEST_RE = /[&<>\"]/;\nvar HTML_ESCAPE_REPLACE_RE = /[&<>\"]/g;\nvar HTML_REPLACEMENTS = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;'\n};\n\nfunction replaceUnsafeChar(ch) {\n  return HTML_REPLACEMENTS[ch];\n}\n\nfunction escapeHtml(str) {\n  if (HTML_ESCAPE_TEST_RE.test(str)) {\n    return str.replace(HTML_ESCAPE_REPLACE_RE, replaceUnsafeChar);\n  }\n  return str;\n}\n\nvar utils = /*#__PURE__*/Object.freeze({\n  isString: isString,\n  has: has,\n  assign: assign,\n  unescapeMd: unescapeMd,\n  isValidEntityCode: isValidEntityCode,\n  fromCodePoint: fromCodePoint,\n  replaceEntities: replaceEntities,\n  escapeHtml: escapeHtml\n});\n\n/**\n * Renderer rules cache\n */\n\nvar rules = {};\n\n/**\n * Blockquotes\n */\n\nrules.blockquote_open = function(/* tokens, idx, options, env */) {\n  return '<blockquote>\\n';\n};\n\nrules.blockquote_close = function(tokens, idx /*, options, env */) {\n  return '</blockquote>' + getBreak(tokens, idx);\n};\n\n/**\n * Code\n */\n\nrules.code = function(tokens, idx /*, options, env */) {\n  if (tokens[idx].block) {\n    return '<pre><code>' + escapeHtml(tokens[idx].content) + '</code></pre>' + getBreak(tokens, idx);\n  }\n  return '<code>' + escapeHtml(tokens[idx].content) + '</code>';\n};\n\n/**\n * Fenced code blocks\n */\n\nrules.fence = function(tokens, idx, options, env, instance) {\n  var token = tokens[idx];\n  var langClass = '';\n  var langPrefix = options.langPrefix;\n  var langName = '', fences, fenceName;\n  var highlighted;\n\n  if (token.params) {\n\n    //\n    // ```foo bar\n    //\n    // Try custom renderer \"foo\" first. That will simplify overwrite\n    // for diagrams, latex, and any other fenced block with custom look\n    //\n\n    fences = token.params.split(/\\s+/g);\n    fenceName = fences.join(' ');\n\n    if (has(instance.rules.fence_custom, fences[0])) {\n      return instance.rules.fence_custom[fences[0]](tokens, idx, options, env, instance);\n    }\n\n    langName = escapeHtml(replaceEntities(unescapeMd(fenceName)));\n    langClass = ' class=\"' + langPrefix + langName + '\"';\n  }\n\n  if (options.highlight) {\n    highlighted = options.highlight.apply(options.highlight, [ token.content ].concat(fences))\n      || escapeHtml(token.content);\n  } else {\n    highlighted = escapeHtml(token.content);\n  }\n\n  return '<pre><code' + langClass + '>'\n        + highlighted\n        + '</code></pre>'\n        + getBreak(tokens, idx);\n};\n\nrules.fence_custom = {};\n\n/**\n * Headings\n */\n\nrules.heading_open = function(tokens, idx /*, options, env */) {\n  return '<h' + tokens[idx].hLevel + '>';\n};\nrules.heading_close = function(tokens, idx /*, options, env */) {\n  return '</h' + tokens[idx].hLevel + '>\\n';\n};\n\n/**\n * Horizontal rules\n */\n\nrules.hr = function(tokens, idx, options /*, env */) {\n  return (options.xhtmlOut ? '<hr />' : '<hr>') + getBreak(tokens, idx);\n};\n\n/**\n * Bullets\n */\n\nrules.bullet_list_open = function(/* tokens, idx, options, env */) {\n  return '<ul>\\n';\n};\nrules.bullet_list_close = function(tokens, idx /*, options, env */) {\n  return '</ul>' + getBreak(tokens, idx);\n};\n\n/**\n * List items\n */\n\nrules.list_item_open = function(/* tokens, idx, options, env */) {\n  return '<li>';\n};\nrules.list_item_close = function(/* tokens, idx, options, env */) {\n  return '</li>\\n';\n};\n\n/**\n * Ordered list items\n */\n\nrules.ordered_list_open = function(tokens, idx /*, options, env */) {\n  var token = tokens[idx];\n  var order = token.order > 1 ? ' start=\"' + token.order + '\"' : '';\n  return '<ol' + order + '>\\n';\n};\nrules.ordered_list_close = function(tokens, idx /*, options, env */) {\n  return '</ol>' + getBreak(tokens, idx);\n};\n\n/**\n * Paragraphs\n */\n\nrules.paragraph_open = function(tokens, idx /*, options, env */) {\n  return tokens[idx].tight ? '' : '<p>';\n};\nrules.paragraph_close = function(tokens, idx /*, options, env */) {\n  var addBreak = !(tokens[idx].tight && idx && tokens[idx - 1].type === 'inline' && !tokens[idx - 1].content);\n  return (tokens[idx].tight ? '' : '</p>') + (addBreak ? getBreak(tokens, idx) : '');\n};\n\n/**\n * Links\n */\n\nrules.link_open = function(tokens, idx, options /* env */) {\n  var title = tokens[idx].title ? (' title=\"' + escapeHtml(replaceEntities(tokens[idx].title)) + '\"') : '';\n  var target = options.linkTarget ? (' target=\"' + options.linkTarget + '\"') : '';\n  return '<a href=\"' + escapeHtml(tokens[idx].href) + '\"' + title + target + '>';\n};\nrules.link_close = function(/* tokens, idx, options, env */) {\n  return '</a>';\n};\n\n/**\n * Images\n */\n\nrules.image = function(tokens, idx, options /*, env */) {\n  var src = ' src=\"' + escapeHtml(tokens[idx].src) + '\"';\n  var title = tokens[idx].title ? (' title=\"' + escapeHtml(replaceEntities(tokens[idx].title)) + '\"') : '';\n  var alt = ' alt=\"' + (tokens[idx].alt ? escapeHtml(replaceEntities(unescapeMd(tokens[idx].alt))) : '') + '\"';\n  var suffix = options.xhtmlOut ? ' /' : '';\n  return '<img' + src + alt + title + suffix + '>';\n};\n\n/**\n * Tables\n */\n\nrules.table_open = function(/* tokens, idx, options, env */) {\n  return '<table>\\n';\n};\nrules.table_close = function(/* tokens, idx, options, env */) {\n  return '</table>\\n';\n};\nrules.thead_open = function(/* tokens, idx, options, env */) {\n  return '<thead>\\n';\n};\nrules.thead_close = function(/* tokens, idx, options, env */) {\n  return '</thead>\\n';\n};\nrules.tbody_open = function(/* tokens, idx, options, env */) {\n  return '<tbody>\\n';\n};\nrules.tbody_close = function(/* tokens, idx, options, env */) {\n  return '</tbody>\\n';\n};\nrules.tr_open = function(/* tokens, idx, options, env */) {\n  return '<tr>';\n};\nrules.tr_close = function(/* tokens, idx, options, env */) {\n  return '</tr>\\n';\n};\nrules.th_open = function(tokens, idx /*, options, env */) {\n  var token = tokens[idx];\n  return '<th'\n    + (token.align ? ' style=\"text-align:' + token.align + '\"' : '')\n    + '>';\n};\nrules.th_close = function(/* tokens, idx, options, env */) {\n  return '</th>';\n};\nrules.td_open = function(tokens, idx /*, options, env */) {\n  var token = tokens[idx];\n  return '<td'\n    + (token.align ? ' style=\"text-align:' + token.align + '\"' : '')\n    + '>';\n};\nrules.td_close = function(/* tokens, idx, options, env */) {\n  return '</td>';\n};\n\n/**\n * Bold\n */\n\nrules.strong_open = function(/* tokens, idx, options, env */) {\n  return '<strong>';\n};\nrules.strong_close = function(/* tokens, idx, options, env */) {\n  return '</strong>';\n};\n\n/**\n * Italicize\n */\n\nrules.em_open = function(/* tokens, idx, options, env */) {\n  return '<em>';\n};\nrules.em_close = function(/* tokens, idx, options, env */) {\n  return '</em>';\n};\n\n/**\n * Strikethrough\n */\n\nrules.del_open = function(/* tokens, idx, options, env */) {\n  return '<del>';\n};\nrules.del_close = function(/* tokens, idx, options, env */) {\n  return '</del>';\n};\n\n/**\n * Insert\n */\n\nrules.ins_open = function(/* tokens, idx, options, env */) {\n  return '<ins>';\n};\nrules.ins_close = function(/* tokens, idx, options, env */) {\n  return '</ins>';\n};\n\n/**\n * Highlight\n */\n\nrules.mark_open = function(/* tokens, idx, options, env */) {\n  return '<mark>';\n};\nrules.mark_close = function(/* tokens, idx, options, env */) {\n  return '</mark>';\n};\n\n/**\n * Super- and sub-script\n */\n\nrules.sub = function(tokens, idx /*, options, env */) {\n  return '<sub>' + escapeHtml(tokens[idx].content) + '</sub>';\n};\nrules.sup = function(tokens, idx /*, options, env */) {\n  return '<sup>' + escapeHtml(tokens[idx].content) + '</sup>';\n};\n\n/**\n * Breaks\n */\n\nrules.hardbreak = function(tokens, idx, options /*, env */) {\n  return options.xhtmlOut ? '<br />\\n' : '<br>\\n';\n};\nrules.softbreak = function(tokens, idx, options /*, env */) {\n  return options.breaks ? (options.xhtmlOut ? '<br />\\n' : '<br>\\n') : '\\n';\n};\n\n/**\n * Text\n */\n\nrules.text = function(tokens, idx /*, options, env */) {\n  return escapeHtml(tokens[idx].content);\n};\n\n/**\n * Content\n */\n\nrules.htmlblock = function(tokens, idx /*, options, env */) {\n  return tokens[idx].content;\n};\nrules.htmltag = function(tokens, idx /*, options, env */) {\n  return tokens[idx].content;\n};\n\n/**\n * Abbreviations, initialism\n */\n\nrules.abbr_open = function(tokens, idx /*, options, env */) {\n  return '<abbr title=\"' + escapeHtml(replaceEntities(tokens[idx].title)) + '\">';\n};\nrules.abbr_close = function(/* tokens, idx, options, env */) {\n  return '</abbr>';\n};\n\n/**\n * Footnotes\n */\n\nrules.footnote_ref = function(tokens, idx) {\n  var n = Number(tokens[idx].id + 1).toString();\n  var id = 'fnref' + n;\n  if (tokens[idx].subId > 0) {\n    id += ':' + tokens[idx].subId;\n  }\n  return '<sup class=\"footnote-ref\"><a href=\"#fn' + n + '\" id=\"' + id + '\">[' + n + ']</a></sup>';\n};\nrules.footnote_block_open = function(tokens, idx, options) {\n  var hr = options.xhtmlOut\n    ? '<hr class=\"footnotes-sep\" />\\n'\n    : '<hr class=\"footnotes-sep\">\\n';\n  return hr + '<section class=\"footnotes\">\\n<ol class=\"footnotes-list\">\\n';\n};\nrules.footnote_block_close = function() {\n  return '</ol>\\n</section>\\n';\n};\nrules.footnote_open = function(tokens, idx) {\n  var id = Number(tokens[idx].id + 1).toString();\n  return '<li id=\"fn' + id + '\"  class=\"footnote-item\">';\n};\nrules.footnote_close = function() {\n  return '</li>\\n';\n};\nrules.footnote_anchor = function(tokens, idx) {\n  var n = Number(tokens[idx].id + 1).toString();\n  var id = 'fnref' + n;\n  if (tokens[idx].subId > 0) {\n    id += ':' + tokens[idx].subId;\n  }\n  return ' <a href=\"#' + id + '\" class=\"footnote-backref\">\u21A9</a>';\n};\n\n/**\n * Definition lists\n */\n\nrules.dl_open = function() {\n  return '<dl>\\n';\n};\nrules.dt_open = function() {\n  return '<dt>';\n};\nrules.dd_open = function() {\n  return '<dd>';\n};\nrules.dl_close = function() {\n  return '</dl>\\n';\n};\nrules.dt_close = function() {\n  return '</dt>\\n';\n};\nrules.dd_close = function() {\n  return '</dd>\\n';\n};\n\n/**\n * Helper functions\n */\n\nfunction nextToken(tokens, idx) {\n  if (++idx >= tokens.length - 2) {\n    return idx;\n  }\n  if ((tokens[idx].type === 'paragraph_open' && tokens[idx].tight) &&\n      (tokens[idx + 1].type === 'inline' && tokens[idx + 1].content.length === 0) &&\n      (tokens[idx + 2].type === 'paragraph_close' && tokens[idx + 2].tight)) {\n    return nextToken(tokens, idx + 2);\n  }\n  return idx;\n}\n\n/**\n * Check to see if `\\n` is needed before the next token.\n *\n * @param  {Array} `tokens`\n * @param  {Number} `idx`\n * @return {String} Empty string or newline\n * @api private\n */\n\nvar getBreak = rules.getBreak = function getBreak(tokens, idx) {\n  idx = nextToken(tokens, idx);\n  if (idx < tokens.length && tokens[idx].type === 'list_item_close') {\n    return '';\n  }\n  return '\\n';\n};\n\n/**\n * Renderer class. Renders HTML and exposes `rules` to allow\n * local modifications.\n */\n\nfunction Renderer() {\n  this.rules = assign({}, rules);\n\n  // exported helper, for custom rules only\n  this.getBreak = rules.getBreak;\n}\n\n/**\n * Render a string of inline HTML with the given `tokens` and\n * `options`.\n *\n * @param  {Array} `tokens`\n * @param  {Object} `options`\n * @param  {Object} `env`\n * @return {String}\n * @api public\n */\n\nRenderer.prototype.renderInline = function (tokens, options, env) {\n  var _rules = this.rules;\n  var len = tokens.length, i = 0;\n  var result = '';\n\n  while (len--) {\n    result += _rules[tokens[i].type](tokens, i++, options, env, this);\n  }\n\n  return result;\n};\n\n/**\n * Render a string of HTML with the given `tokens` and\n * `options`.\n *\n * @param  {Array} `tokens`\n * @param  {Object} `options`\n * @param  {Object} `env`\n * @return {String}\n * @api public\n */\n\nRenderer.prototype.render = function (tokens, options, env) {\n  var _rules = this.rules;\n  var len = tokens.length, i = -1;\n  var result = '';\n\n  while (++i < len) {\n    if (tokens[i].type === 'inline') {\n      result += this.renderInline(tokens[i].children, options, env);\n    } else {\n      result += _rules[tokens[i].type](tokens, i, options, env, this);\n    }\n  }\n  return result;\n};\n\n/**\n * Ruler is a helper class for building responsibility chains from\n * parse rules. It allows:\n *\n *   - easy stack rules chains\n *   - getting main chain and named chains content (as arrays of functions)\n *\n * Helper methods, should not be used directly.\n * @api private\n */\n\nfunction Ruler() {\n  // List of added rules. Each element is:\n  //\n  // { name: XXX,\n  //   enabled: Boolean,\n  //   fn: Function(),\n  //   alt: [ name2, name3 ] }\n  //\n  this.__rules__ = [];\n\n  // Cached rule chains.\n  //\n  // First level - chain name, '' for default.\n  // Second level - digital anchor for fast filtering by charcodes.\n  //\n  this.__cache__ = null;\n}\n\n/**\n * Find the index of a rule by `name`.\n *\n * @param  {String} `name`\n * @return {Number} Index of the given `name`\n * @api private\n */\n\nRuler.prototype.__find__ = function (name) {\n  var len = this.__rules__.length;\n  var i = -1;\n\n  while (len--) {\n    if (this.__rules__[++i].name === name) {\n      return i;\n    }\n  }\n  return -1;\n};\n\n/**\n * Build the rules lookup cache\n *\n * @api private\n */\n\nRuler.prototype.__compile__ = function () {\n  var self = this;\n  var chains = [ '' ];\n\n  // collect unique names\n  self.__rules__.forEach(function (rule) {\n    if (!rule.enabled) {\n      return;\n    }\n\n    rule.alt.forEach(function (altName) {\n      if (chains.indexOf(altName) < 0) {\n        chains.push(altName);\n      }\n    });\n  });\n\n  self.__cache__ = {};\n\n  chains.forEach(function (chain) {\n    self.__cache__[chain] = [];\n    self.__rules__.forEach(function (rule) {\n      if (!rule.enabled) {\n        return;\n      }\n\n      if (chain && rule.alt.indexOf(chain) < 0) {\n        return;\n      }\n      self.__cache__[chain].push(rule.fn);\n    });\n  });\n};\n\n/**\n * Ruler public methods\n * ------------------------------------------------\n */\n\n/**\n * Replace rule function\n *\n * @param  {String} `name` Rule name\n * @param  {Function `fn`\n * @param  {Object} `options`\n * @api private\n */\n\nRuler.prototype.at = function (name, fn, options) {\n  var idx = this.__find__(name);\n  var opt = options || {};\n\n  if (idx === -1) {\n    throw new Error('Parser rule not found: ' + name);\n  }\n\n  this.__rules__[idx].fn = fn;\n  this.__rules__[idx].alt = opt.alt || [];\n  this.__cache__ = null;\n};\n\n/**\n * Add a rule to the chain before given the `ruleName`.\n *\n * @param  {String}   `beforeName`\n * @param  {String}   `ruleName`\n * @param  {Function} `fn`\n * @param  {Object}   `options`\n * @api private\n */\n\nRuler.prototype.before = function (beforeName, ruleName, fn, options) {\n  var idx = this.__find__(beforeName);\n  var opt = options || {};\n\n  if (idx === -1) {\n    throw new Error('Parser rule not found: ' + beforeName);\n  }\n\n  this.__rules__.splice(idx, 0, {\n    name: ruleName,\n    enabled: true,\n    fn: fn,\n    alt: opt.alt || []\n  });\n\n  this.__cache__ = null;\n};\n\n/**\n * Add a rule to the chain after the given `ruleName`.\n *\n * @param  {String}   `afterName`\n * @param  {String}   `ruleName`\n * @param  {Function} `fn`\n * @param  {Object}   `options`\n * @api private\n */\n\nRuler.prototype.after = function (afterName, ruleName, fn, options) {\n  var idx = this.__find__(afterName);\n  var opt = options || {};\n\n  if (idx === -1) {\n    throw new Error('Parser rule not found: ' + afterName);\n  }\n\n  this.__rules__.splice(idx + 1, 0, {\n    name: ruleName,\n    enabled: true,\n    fn: fn,\n    alt: opt.alt || []\n  });\n\n  this.__cache__ = null;\n};\n\n/**\n * Add a rule to the end of chain.\n *\n * @param  {String}   `ruleName`\n * @param  {Function} `fn`\n * @param  {Object}   `options`\n * @return {String}\n */\n\nRuler.prototype.push = function (ruleName, fn, options) {\n  var opt = options || {};\n\n  this.__rules__.push({\n    name: ruleName,\n    enabled: true,\n    fn: fn,\n    alt: opt.alt || []\n  });\n\n  this.__cache__ = null;\n};\n\n/**\n * Enable a rule or list of rules.\n *\n * @param  {String|Array} `list` Name or array of rule names to enable\n * @param  {Boolean} `strict` If `true`, all non listed rules will be disabled.\n * @api private\n */\n\nRuler.prototype.enable = function (list, strict) {\n  list = !Array.isArray(list)\n    ? [ list ]\n    : list;\n\n  // In strict mode disable all existing rules first\n  if (strict) {\n    this.__rules__.forEach(function (rule) {\n      rule.enabled = false;\n    });\n  }\n\n  // Search by name and enable\n  list.forEach(function (name) {\n    var idx = this.__find__(name);\n    if (idx < 0) {\n      throw new Error('Rules manager: invalid rule name ' + name);\n    }\n    this.__rules__[idx].enabled = true;\n  }, this);\n\n  this.__cache__ = null;\n};\n\n\n/**\n * Disable a rule or list of rules.\n *\n * @param  {String|Array} `list` Name or array of rule names to disable\n * @api private\n */\n\nRuler.prototype.disable = function (list) {\n  list = !Array.isArray(list)\n    ? [ list ]\n    : list;\n\n  // Search by name and disable\n  list.forEach(function (name) {\n    var idx = this.__find__(name);\n    if (idx < 0) {\n      throw new Error('Rules manager: invalid rule name ' + name);\n    }\n    this.__rules__[idx].enabled = false;\n  }, this);\n\n  this.__cache__ = null;\n};\n\n/**\n * Get a rules list as an array of functions.\n *\n * @param  {String} `chainName`\n * @return {Object}\n * @api private\n */\n\nRuler.prototype.getRules = function (chainName) {\n  if (this.__cache__ === null) {\n    this.__compile__();\n  }\n  return this.__cache__[chainName] || [];\n};\n\nfunction block(state) {\n\n  if (state.inlineMode) {\n    state.tokens.push({\n      type: 'inline',\n      content: state.src.replace(/\\n/g, ' ').trim(),\n      level: 0,\n      lines: [ 0, 1 ],\n      children: []\n    });\n\n  } else {\n    state.block.parse(state.src, state.options, state.env, state.tokens);\n  }\n}\n\n// Inline parser state\n\nfunction StateInline(src, parserInline, options, env, outTokens) {\n  this.src = src;\n  this.env = env;\n  this.options = options;\n  this.parser = parserInline;\n  this.tokens = outTokens;\n  this.pos = 0;\n  this.posMax = this.src.length;\n  this.level = 0;\n  this.pending = '';\n  this.pendingLevel = 0;\n\n  this.cache = [];        // Stores { start: end } pairs. Useful for backtrack\n                          // optimization of pairs parse (emphasis, strikes).\n\n  // Link parser state vars\n\n  this.isInLabel = false; // Set true when seek link label - we should disable\n                          // \"paired\" rules (emphasis, strikes) to not skip\n                          // tailing `]`\n\n  this.linkLevel = 0;     // Increment for each nesting link. Used to prevent\n                          // nesting in definitions\n\n  this.linkContent = '';  // Temporary storage for link url\n\n  this.labelUnmatchedScopes = 0; // Track unpaired `[` for link labels\n                                 // (backtrack optimization)\n}\n\n// Flush pending text\n//\nStateInline.prototype.pushPending = function () {\n  this.tokens.push({\n    type: 'text',\n    content: this.pending,\n    level: this.pendingLevel\n  });\n  this.pending = '';\n};\n\n// Push new token to \"stream\".\n// If pending text exists - flush it as text token\n//\nStateInline.prototype.push = function (token) {\n  if (this.pending) {\n    this.pushPending();\n  }\n\n  this.tokens.push(token);\n  this.pendingLevel = this.level;\n};\n\n// Store value to cache.\n// !!! Implementation has parser-specific optimizations\n// !!! keys MUST be integer, >= 0; values MUST be integer, > 0\n//\nStateInline.prototype.cacheSet = function (key, val) {\n  for (var i = this.cache.length; i <= key; i++) {\n    this.cache.push(0);\n  }\n\n  this.cache[key] = val;\n};\n\n// Get cache value\n//\nStateInline.prototype.cacheGet = function (key) {\n  return key < this.cache.length ? this.cache[key] : 0;\n};\n\n/**\n * Parse link labels\n *\n * This function assumes that first character (`[`) already matches;\n * returns the end of the label.\n *\n * @param  {Object} state\n * @param  {Number} start\n * @api private\n */\n\nfunction parseLinkLabel(state, start) {\n  var level, found, marker,\n      labelEnd = -1,\n      max = state.posMax,\n      oldPos = state.pos,\n      oldFlag = state.isInLabel;\n\n  if (state.isInLabel) { return -1; }\n\n  if (state.labelUnmatchedScopes) {\n    state.labelUnmatchedScopes--;\n    return -1;\n  }\n\n  state.pos = start + 1;\n  state.isInLabel = true;\n  level = 1;\n\n  while (state.pos < max) {\n    marker = state.src.charCodeAt(state.pos);\n    if (marker === 0x5B /* [ */) {\n      level++;\n    } else if (marker === 0x5D /* ] */) {\n      level--;\n      if (level === 0) {\n        found = true;\n        break;\n      }\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (found) {\n    labelEnd = state.pos;\n    state.labelUnmatchedScopes = 0;\n  } else {\n    state.labelUnmatchedScopes = level - 1;\n  }\n\n  // restore old state\n  state.pos = oldPos;\n  state.isInLabel = oldFlag;\n\n  return labelEnd;\n}\n\n// Parse abbreviation definitions, i.e. `*[abbr]: description`\n\n\nfunction parseAbbr(str, parserInline, options, env) {\n  var state, labelEnd, pos, max, label, title;\n\n  if (str.charCodeAt(0) !== 0x2A/* * */) { return -1; }\n  if (str.charCodeAt(1) !== 0x5B/* [ */) { return -1; }\n\n  if (str.indexOf(']:') === -1) { return -1; }\n\n  state = new StateInline(str, parserInline, options, env, []);\n  labelEnd = parseLinkLabel(state, 1);\n\n  if (labelEnd < 0 || str.charCodeAt(labelEnd + 1) !== 0x3A/* : */) { return -1; }\n\n  max = state.posMax;\n\n  // abbr title is always one line, so looking for ending \"\\n\" here\n  for (pos = labelEnd + 2; pos < max; pos++) {\n    if (state.src.charCodeAt(pos) === 0x0A) { break; }\n  }\n\n  label = str.slice(2, labelEnd);\n  title = str.slice(labelEnd + 2, pos).trim();\n  if (title.length === 0) { return -1; }\n  if (!env.abbreviations) { env.abbreviations = {}; }\n  // prepend ':' to avoid conflict with Object.prototype members\n  if (typeof env.abbreviations[':' + label] === 'undefined') {\n    env.abbreviations[':' + label] = title;\n  }\n\n  return pos;\n}\n\nfunction abbr(state) {\n  var tokens = state.tokens, i, l, content, pos;\n\n  if (state.inlineMode) {\n    return;\n  }\n\n  // Parse inlines\n  for (i = 1, l = tokens.length - 1; i < l; i++) {\n    if (tokens[i - 1].type === 'paragraph_open' &&\n        tokens[i].type === 'inline' &&\n        tokens[i + 1].type === 'paragraph_close') {\n\n      content = tokens[i].content;\n      while (content.length) {\n        pos = parseAbbr(content, state.inline, state.options, state.env);\n        if (pos < 0) { break; }\n        content = content.slice(pos).trim();\n      }\n\n      tokens[i].content = content;\n      if (!content.length) {\n        tokens[i - 1].tight = true;\n        tokens[i + 1].tight = true;\n      }\n    }\n  }\n}\n\nfunction normalizeLink(url) {\n  var normalized = replaceEntities(url);\n  // We shouldn't care about the result of malformed URIs,\n  // and should not throw an exception.\n  try {\n    normalized = decodeURI(normalized);\n  } catch (err) {}\n  return encodeURI(normalized);\n}\n\n/**\n * Parse link destination\n *\n *   - on success it returns a string and updates state.pos;\n *   - on failure it returns null\n *\n * @param  {Object} state\n * @param  {Number} pos\n * @api private\n */\n\nfunction parseLinkDestination(state, pos) {\n  var code, level, link,\n      start = pos,\n      max = state.posMax;\n\n  if (state.src.charCodeAt(pos) === 0x3C /* < */) {\n    pos++;\n    while (pos < max) {\n      code = state.src.charCodeAt(pos);\n      if (code === 0x0A /* \\n */) { return false; }\n      if (code === 0x3E /* > */) {\n        link = normalizeLink(unescapeMd(state.src.slice(start + 1, pos)));\n        if (!state.parser.validateLink(link)) { return false; }\n        state.pos = pos + 1;\n        state.linkContent = link;\n        return true;\n      }\n      if (code === 0x5C /* \\ */ && pos + 1 < max) {\n        pos += 2;\n        continue;\n      }\n\n      pos++;\n    }\n\n    // no closing '>'\n    return false;\n  }\n\n  // this should be ... } else { ... branch\n\n  level = 0;\n  while (pos < max) {\n    code = state.src.charCodeAt(pos);\n\n    if (code === 0x20) { break; }\n\n    // ascii control chars\n    if (code < 0x20 || code === 0x7F) { break; }\n\n    if (code === 0x5C /* \\ */ && pos + 1 < max) {\n      pos += 2;\n      continue;\n    }\n\n    if (code === 0x28 /* ( */) {\n      level++;\n      if (level > 1) { break; }\n    }\n\n    if (code === 0x29 /* ) */) {\n      level--;\n      if (level < 0) { break; }\n    }\n\n    pos++;\n  }\n\n  if (start === pos) { return false; }\n\n  link = unescapeMd(state.src.slice(start, pos));\n  if (!state.parser.validateLink(link)) { return false; }\n\n  state.linkContent = link;\n  state.pos = pos;\n  return true;\n}\n\n/**\n * Parse link title\n *\n *   - on success it returns a string and updates state.pos;\n *   - on failure it returns null\n *\n * @param  {Object} state\n * @param  {Number} pos\n * @api private\n */\n\nfunction parseLinkTitle(state, pos) {\n  var code,\n      start = pos,\n      max = state.posMax,\n      marker = state.src.charCodeAt(pos);\n\n  if (marker !== 0x22 /* \" */ && marker !== 0x27 /* ' */ && marker !== 0x28 /* ( */) { return false; }\n\n  pos++;\n\n  // if opening marker is \"(\", switch it to closing marker \")\"\n  if (marker === 0x28) { marker = 0x29; }\n\n  while (pos < max) {\n    code = state.src.charCodeAt(pos);\n    if (code === marker) {\n      state.pos = pos + 1;\n      state.linkContent = unescapeMd(state.src.slice(start + 1, pos));\n      return true;\n    }\n    if (code === 0x5C /* \\ */ && pos + 1 < max) {\n      pos += 2;\n      continue;\n    }\n\n    pos++;\n  }\n\n  return false;\n}\n\nfunction normalizeReference(str) {\n  // use .toUpperCase() instead of .toLowerCase()\n  // here to avoid a conflict with Object.prototype\n  // members (most notably, `__proto__`)\n  return str.trim().replace(/\\s+/g, ' ').toUpperCase();\n}\n\nfunction parseReference(str, parser, options, env) {\n  var state, labelEnd, pos, max, code, start, href, title, label;\n\n  if (str.charCodeAt(0) !== 0x5B/* [ */) { return -1; }\n\n  if (str.indexOf(']:') === -1) { return -1; }\n\n  state = new StateInline(str, parser, options, env, []);\n  labelEnd = parseLinkLabel(state, 0);\n\n  if (labelEnd < 0 || str.charCodeAt(labelEnd + 1) !== 0x3A/* : */) { return -1; }\n\n  max = state.posMax;\n\n  // [label]:   destination   'title'\n  //         ^^^ skip optional whitespace here\n  for (pos = labelEnd + 2; pos < max; pos++) {\n    code = state.src.charCodeAt(pos);\n    if (code !== 0x20 && code !== 0x0A) { break; }\n  }\n\n  // [label]:   destination   'title'\n  //            ^^^^^^^^^^^ parse this\n  if (!parseLinkDestination(state, pos)) { return -1; }\n  href = state.linkContent;\n  pos = state.pos;\n\n  // [label]:   destination   'title'\n  //                       ^^^ skipping those spaces\n  start = pos;\n  for (pos = pos + 1; pos < max; pos++) {\n    code = state.src.charCodeAt(pos);\n    if (code !== 0x20 && code !== 0x0A) { break; }\n  }\n\n  // [label]:   destination   'title'\n  //                          ^^^^^^^ parse this\n  if (pos < max && start !== pos && parseLinkTitle(state, pos)) {\n    title = state.linkContent;\n    pos = state.pos;\n  } else {\n    title = '';\n    pos = start;\n  }\n\n  // ensure that the end of the line is empty\n  while (pos < max && state.src.charCodeAt(pos) === 0x20/* space */) { pos++; }\n  if (pos < max && state.src.charCodeAt(pos) !== 0x0A) { return -1; }\n\n  label = normalizeReference(str.slice(1, labelEnd));\n  if (typeof env.references[label] === 'undefined') {\n    env.references[label] = { title: title, href: href };\n  }\n\n  return pos;\n}\n\n\nfunction references(state) {\n  var tokens = state.tokens, i, l, content, pos;\n\n  state.env.references = state.env.references || {};\n\n  if (state.inlineMode) {\n    return;\n  }\n\n  // Scan definitions in paragraph inlines\n  for (i = 1, l = tokens.length - 1; i < l; i++) {\n    if (tokens[i].type === 'inline' &&\n        tokens[i - 1].type === 'paragraph_open' &&\n        tokens[i + 1].type === 'paragraph_close') {\n\n      content = tokens[i].content;\n      while (content.length) {\n        pos = parseReference(content, state.inline, state.options, state.env);\n        if (pos < 0) { break; }\n        content = content.slice(pos).trim();\n      }\n\n      tokens[i].content = content;\n      if (!content.length) {\n        tokens[i - 1].tight = true;\n        tokens[i + 1].tight = true;\n      }\n    }\n  }\n}\n\nfunction inline(state) {\n  var tokens = state.tokens, tok, i, l;\n\n  // Parse inlines\n  for (i = 0, l = tokens.length; i < l; i++) {\n    tok = tokens[i];\n    if (tok.type === 'inline') {\n      state.inline.parse(tok.content, state.options, state.env, tok.children);\n    }\n  }\n}\n\nfunction footnote_block(state) {\n  var i, l, j, t, lastParagraph, list, tokens, current, currentLabel,\n      level = 0,\n      insideRef = false,\n      refTokens = {};\n\n  if (!state.env.footnotes) { return; }\n\n  state.tokens = state.tokens.filter(function(tok) {\n    if (tok.type === 'footnote_reference_open') {\n      insideRef = true;\n      current = [];\n      currentLabel = tok.label;\n      return false;\n    }\n    if (tok.type === 'footnote_reference_close') {\n      insideRef = false;\n      // prepend ':' to avoid conflict with Object.prototype members\n      refTokens[':' + currentLabel] = current;\n      return false;\n    }\n    if (insideRef) { current.push(tok); }\n    return !insideRef;\n  });\n\n  if (!state.env.footnotes.list) { return; }\n  list = state.env.footnotes.list;\n\n  state.tokens.push({\n    type: 'footnote_block_open',\n    level: level++\n  });\n  for (i = 0, l = list.length; i < l; i++) {\n    state.tokens.push({\n      type: 'footnote_open',\n      id: i,\n      level: level++\n    });\n\n    if (list[i].tokens) {\n      tokens = [];\n      tokens.push({\n        type: 'paragraph_open',\n        tight: false,\n        level: level++\n      });\n      tokens.push({\n        type: 'inline',\n        content: '',\n        level: level,\n        children: list[i].tokens\n      });\n      tokens.push({\n        type: 'paragraph_close',\n        tight: false,\n        level: --level\n      });\n    } else if (list[i].label) {\n      tokens = refTokens[':' + list[i].label];\n    }\n\n    state.tokens = state.tokens.concat(tokens);\n    if (state.tokens[state.tokens.length - 1].type === 'paragraph_close') {\n      lastParagraph = state.tokens.pop();\n    } else {\n      lastParagraph = null;\n    }\n\n    t = list[i].count > 0 ? list[i].count : 1;\n    for (j = 0; j < t; j++) {\n      state.tokens.push({\n        type: 'footnote_anchor',\n        id: i,\n        subId: j,\n        level: level\n      });\n    }\n\n    if (lastParagraph) {\n      state.tokens.push(lastParagraph);\n    }\n\n    state.tokens.push({\n      type: 'footnote_close',\n      level: --level\n    });\n  }\n  state.tokens.push({\n    type: 'footnote_block_close',\n    level: --level\n  });\n}\n\n// Enclose abbreviations in <abbr> tags\n//\n\nvar PUNCT_CHARS = ' \\n()[]\\'\".,!?-';\n\n\n// from Google closure library\n// http://closure-library.googlecode.com/git-history/docs/local_closure_goog_string_string.js.source.html#line1021\nfunction regEscape(s) {\n  return s.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1');\n}\n\n\nfunction abbr2(state) {\n  var i, j, l, tokens, token, text, nodes, pos, level, reg, m, regText,\n      blockTokens = state.tokens;\n\n  if (!state.env.abbreviations) { return; }\n  if (!state.env.abbrRegExp) {\n    regText = '(^|[' + PUNCT_CHARS.split('').map(regEscape).join('') + '])'\n            + '(' + Object.keys(state.env.abbreviations).map(function (x) {\n                      return x.substr(1);\n                    }).sort(function (a, b) {\n                      return b.length - a.length;\n                    }).map(regEscape).join('|') + ')'\n            + '($|[' + PUNCT_CHARS.split('').map(regEscape).join('') + '])';\n    state.env.abbrRegExp = new RegExp(regText, 'g');\n  }\n  reg = state.env.abbrRegExp;\n\n  for (j = 0, l = blockTokens.length; j < l; j++) {\n    if (blockTokens[j].type !== 'inline') { continue; }\n    tokens = blockTokens[j].children;\n\n    // We scan from the end, to keep position when new tags added.\n    for (i = tokens.length - 1; i >= 0; i--) {\n      token = tokens[i];\n      if (token.type !== 'text') { continue; }\n\n      pos = 0;\n      text = token.content;\n      reg.lastIndex = 0;\n      level = token.level;\n      nodes = [];\n\n      while ((m = reg.exec(text))) {\n        if (reg.lastIndex > pos) {\n          nodes.push({\n            type: 'text',\n            content: text.slice(pos, m.index + m[1].length),\n            level: level\n          });\n        }\n\n        nodes.push({\n          type: 'abbr_open',\n          title: state.env.abbreviations[':' + m[2]],\n          level: level++\n        });\n        nodes.push({\n          type: 'text',\n          content: m[2],\n          level: level\n        });\n        nodes.push({\n          type: 'abbr_close',\n          level: --level\n        });\n        pos = reg.lastIndex - m[3].length;\n      }\n\n      if (!nodes.length) { continue; }\n\n      if (pos < text.length) {\n        nodes.push({\n          type: 'text',\n          content: text.slice(pos),\n          level: level\n        });\n      }\n\n      // replace current node\n      blockTokens[j].children = tokens = [].concat(tokens.slice(0, i), nodes, tokens.slice(i + 1));\n    }\n  }\n}\n\n// Simple typographical replacements\n//\n// TODO:\n// - fractionals 1/2, 1/4, 3/4 -> \u00BD, \u00BC, \u00BE\n// - miltiplication 2 x 4 -> 2 \u00D7 4\n\nvar RARE_RE = /\\+-|\\.\\.|\\?\\?\\?\\?|!!!!|,,|--/;\n\nvar SCOPED_ABBR_RE = /\\((c|tm|r|p)\\)/ig;\nvar SCOPED_ABBR = {\n  'c': '\u00A9',\n  'r': '\u00AE',\n  'p': '\u00A7',\n  'tm': '\u2122'\n};\n\nfunction replaceScopedAbbr(str) {\n  if (str.indexOf('(') < 0) { return str; }\n\n  return str.replace(SCOPED_ABBR_RE, function(match, name) {\n    return SCOPED_ABBR[name.toLowerCase()];\n  });\n}\n\n\nfunction replace(state) {\n  var i, token, text, inlineTokens, blkIdx;\n\n  if (!state.options.typographer) { return; }\n\n  for (blkIdx = state.tokens.length - 1; blkIdx >= 0; blkIdx--) {\n\n    if (state.tokens[blkIdx].type !== 'inline') { continue; }\n\n    inlineTokens = state.tokens[blkIdx].children;\n\n    for (i = inlineTokens.length - 1; i >= 0; i--) {\n      token = inlineTokens[i];\n      if (token.type === 'text') {\n        text = token.content;\n\n        text = replaceScopedAbbr(text);\n\n        if (RARE_RE.test(text)) {\n          text = text\n            .replace(/\\+-/g, '\u00B1')\n            // .., ..., ....... -> \u2026\n            // but ?..... & !..... -> ?.. & !..\n            .replace(/\\.{2,}/g, '\u2026').replace(/([?!])\u2026/g, '$1..')\n            .replace(/([?!]){4,}/g, '$1$1$1').replace(/,{2,}/g, ',')\n            // em-dash\n            .replace(/(^|[^-])---([^-]|$)/mg, '$1\\u2014$2')\n            // en-dash\n            .replace(/(^|\\s)--(\\s|$)/mg, '$1\\u2013$2')\n            .replace(/(^|[^-\\s])--([^-\\s]|$)/mg, '$1\\u2013$2');\n        }\n\n        token.content = text;\n      }\n    }\n  }\n}\n\n// Convert straight quotation marks to typographic ones\n//\n\nvar QUOTE_TEST_RE = /['\"]/;\nvar QUOTE_RE = /['\"]/g;\nvar PUNCT_RE = /[-\\s()\\[\\]]/;\nvar APOSTROPHE = '\u2019';\n\n// This function returns true if the character at `pos`\n// could be inside a word.\nfunction isLetter(str, pos) {\n  if (pos < 0 || pos >= str.length) { return false; }\n  return !PUNCT_RE.test(str[pos]);\n}\n\n\nfunction replaceAt(str, index, ch) {\n  return str.substr(0, index) + ch + str.substr(index + 1);\n}\n\n\nfunction smartquotes(state) {\n  /*eslint max-depth:0*/\n  var i, token, text, t, pos, max, thisLevel, lastSpace, nextSpace, item,\n      canOpen, canClose, j, isSingle, blkIdx, tokens,\n      stack;\n\n  if (!state.options.typographer) { return; }\n\n  stack = [];\n\n  for (blkIdx = state.tokens.length - 1; blkIdx >= 0; blkIdx--) {\n\n    if (state.tokens[blkIdx].type !== 'inline') { continue; }\n\n    tokens = state.tokens[blkIdx].children;\n    stack.length = 0;\n\n    for (i = 0; i < tokens.length; i++) {\n      token = tokens[i];\n\n      if (token.type !== 'text' || QUOTE_TEST_RE.test(token.text)) { continue; }\n\n      thisLevel = tokens[i].level;\n\n      for (j = stack.length - 1; j >= 0; j--) {\n        if (stack[j].level <= thisLevel) { break; }\n      }\n      stack.length = j + 1;\n\n      text = token.content;\n      pos = 0;\n      max = text.length;\n\n      /*eslint no-labels:0,block-scoped-var:0*/\n      OUTER:\n      while (pos < max) {\n        QUOTE_RE.lastIndex = pos;\n        t = QUOTE_RE.exec(text);\n        if (!t) { break; }\n\n        lastSpace = !isLetter(text, t.index - 1);\n        pos = t.index + 1;\n        isSingle = (t[0] === \"'\");\n        nextSpace = !isLetter(text, pos);\n\n        if (!nextSpace && !lastSpace) {\n          // middle of word\n          if (isSingle) {\n            token.content = replaceAt(token.content, t.index, APOSTROPHE);\n          }\n          continue;\n        }\n\n        canOpen = !nextSpace;\n        canClose = !lastSpace;\n\n        if (canClose) {\n          // this could be a closing quote, rewind the stack to get a match\n          for (j = stack.length - 1; j >= 0; j--) {\n            item = stack[j];\n            if (stack[j].level < thisLevel) { break; }\n            if (item.single === isSingle && stack[j].level === thisLevel) {\n              item = stack[j];\n              if (isSingle) {\n                tokens[item.token].content = replaceAt(tokens[item.token].content, item.pos, state.options.quotes[2]);\n                token.content = replaceAt(token.content, t.index, state.options.quotes[3]);\n              } else {\n                tokens[item.token].content = replaceAt(tokens[item.token].content, item.pos, state.options.quotes[0]);\n                token.content = replaceAt(token.content, t.index, state.options.quotes[1]);\n              }\n              stack.length = j;\n              continue OUTER;\n            }\n          }\n        }\n\n        if (canOpen) {\n          stack.push({\n            token: i,\n            pos: t.index,\n            single: isSingle,\n            level: thisLevel\n          });\n        } else if (canClose && isSingle) {\n          token.content = replaceAt(token.content, t.index, APOSTROPHE);\n        }\n      }\n    }\n  }\n}\n\n/**\n * Core parser `rules`\n */\n\nvar _rules = [\n  [ 'block',          block          ],\n  [ 'abbr',           abbr           ],\n  [ 'references',     references     ],\n  [ 'inline',         inline         ],\n  [ 'footnote_tail',  footnote_block  ],\n  [ 'abbr2',          abbr2          ],\n  [ 'replacements',   replace   ],\n  [ 'smartquotes',    smartquotes    ],\n];\n\n/**\n * Class for top level (`core`) parser rules\n *\n * @api private\n */\n\nfunction Core() {\n  this.options = {};\n  this.ruler = new Ruler();\n  for (var i = 0; i < _rules.length; i++) {\n    this.ruler.push(_rules[i][0], _rules[i][1]);\n  }\n}\n\n/**\n * Process rules with the given `state`\n *\n * @param  {Object} `state`\n * @api private\n */\n\nCore.prototype.process = function (state) {\n  var i, l, rules;\n  rules = this.ruler.getRules('');\n  for (i = 0, l = rules.length; i < l; i++) {\n    rules[i](state);\n  }\n};\n\n// Parser state class\n\nfunction StateBlock(src, parser, options, env, tokens) {\n  var ch, s, start, pos, len, indent, indent_found;\n\n  this.src = src;\n\n  // Shortcuts to simplify nested calls\n  this.parser = parser;\n\n  this.options = options;\n\n  this.env = env;\n\n  //\n  // Internal state vartiables\n  //\n\n  this.tokens = tokens;\n\n  this.bMarks = [];  // line begin offsets for fast jumps\n  this.eMarks = [];  // line end offsets for fast jumps\n  this.tShift = [];  // indent for each line\n\n  // block parser variables\n  this.blkIndent  = 0; // required block content indent\n                       // (for example, if we are in list)\n  this.line       = 0; // line index in src\n  this.lineMax    = 0; // lines count\n  this.tight      = false;  // loose/tight mode for lists\n  this.parentType = 'root'; // if `list`, block parser stops on two newlines\n  this.ddIndent   = -1; // indent of the current dd block (-1 if there isn't any)\n\n  this.level = 0;\n\n  // renderer\n  this.result = '';\n\n  // Create caches\n  // Generate markers.\n  s = this.src;\n  indent = 0;\n  indent_found = false;\n\n  for (start = pos = indent = 0, len = s.length; pos < len; pos++) {\n    ch = s.charCodeAt(pos);\n\n    if (!indent_found) {\n      if (ch === 0x20/* space */) {\n        indent++;\n        continue;\n      } else {\n        indent_found = true;\n      }\n    }\n\n    if (ch === 0x0A || pos === len - 1) {\n      if (ch !== 0x0A) { pos++; }\n      this.bMarks.push(start);\n      this.eMarks.push(pos);\n      this.tShift.push(indent);\n\n      indent_found = false;\n      indent = 0;\n      start = pos + 1;\n    }\n  }\n\n  // Push fake entry to simplify cache bounds checks\n  this.bMarks.push(s.length);\n  this.eMarks.push(s.length);\n  this.tShift.push(0);\n\n  this.lineMax = this.bMarks.length - 1; // don't count last fake line\n}\n\nStateBlock.prototype.isEmpty = function isEmpty(line) {\n  return this.bMarks[line] + this.tShift[line] >= this.eMarks[line];\n};\n\nStateBlock.prototype.skipEmptyLines = function skipEmptyLines(from) {\n  for (var max = this.lineMax; from < max; from++) {\n    if (this.bMarks[from] + this.tShift[from] < this.eMarks[from]) {\n      break;\n    }\n  }\n  return from;\n};\n\n// Skip spaces from given position.\nStateBlock.prototype.skipSpaces = function skipSpaces(pos) {\n  for (var max = this.src.length; pos < max; pos++) {\n    if (this.src.charCodeAt(pos) !== 0x20/* space */) { break; }\n  }\n  return pos;\n};\n\n// Skip char codes from given position\nStateBlock.prototype.skipChars = function skipChars(pos, code) {\n  for (var max = this.src.length; pos < max; pos++) {\n    if (this.src.charCodeAt(pos) !== code) { break; }\n  }\n  return pos;\n};\n\n// Skip char codes reverse from given position - 1\nStateBlock.prototype.skipCharsBack = function skipCharsBack(pos, code, min) {\n  if (pos <= min) { return pos; }\n\n  while (pos > min) {\n    if (code !== this.src.charCodeAt(--pos)) { return pos + 1; }\n  }\n  return pos;\n};\n\n// cut lines range from source.\nStateBlock.prototype.getLines = function getLines(begin, end, indent, keepLastLF) {\n  var i, first, last, queue, shift,\n      line = begin;\n\n  if (begin >= end) {\n    return '';\n  }\n\n  // Opt: don't use push queue for single line;\n  if (line + 1 === end) {\n    first = this.bMarks[line] + Math.min(this.tShift[line], indent);\n    last = keepLastLF ? this.eMarks[line] + 1 : this.eMarks[line];\n    return this.src.slice(first, last);\n  }\n\n  queue = new Array(end - begin);\n\n  for (i = 0; line < end; line++, i++) {\n    shift = this.tShift[line];\n    if (shift > indent) { shift = indent; }\n    if (shift < 0) { shift = 0; }\n\n    first = this.bMarks[line] + shift;\n\n    if (line + 1 < end || keepLastLF) {\n      // No need for bounds check because we have fake entry on tail.\n      last = this.eMarks[line] + 1;\n    } else {\n      last = this.eMarks[line];\n    }\n\n    queue[i] = this.src.slice(first, last);\n  }\n\n  return queue.join('');\n};\n\n// Code block (4 spaces padded)\n\nfunction code(state, startLine, endLine/*, silent*/) {\n  var nextLine, last;\n\n  if (state.tShift[startLine] - state.blkIndent < 4) { return false; }\n\n  last = nextLine = startLine + 1;\n\n  while (nextLine < endLine) {\n    if (state.isEmpty(nextLine)) {\n      nextLine++;\n      continue;\n    }\n    if (state.tShift[nextLine] - state.blkIndent >= 4) {\n      nextLine++;\n      last = nextLine;\n      continue;\n    }\n    break;\n  }\n\n  state.line = nextLine;\n  state.tokens.push({\n    type: 'code',\n    content: state.getLines(startLine, last, 4 + state.blkIndent, true),\n    block: true,\n    lines: [ startLine, state.line ],\n    level: state.level\n  });\n\n  return true;\n}\n\n// fences (``` lang, ~~~ lang)\n\nfunction fences(state, startLine, endLine, silent) {\n  var marker, len, params, nextLine, mem,\n      haveEndMarker = false,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  if (pos + 3 > max) { return false; }\n\n  marker = state.src.charCodeAt(pos);\n\n  if (marker !== 0x7E/* ~ */ && marker !== 0x60 /* ` */) {\n    return false;\n  }\n\n  // scan marker length\n  mem = pos;\n  pos = state.skipChars(pos, marker);\n\n  len = pos - mem;\n\n  if (len < 3) { return false; }\n\n  params = state.src.slice(pos, max).trim();\n\n  if (params.indexOf('`') >= 0) { return false; }\n\n  // Since start is found, we can report success here in validation mode\n  if (silent) { return true; }\n\n  // search end of block\n  nextLine = startLine;\n\n  for (;;) {\n    nextLine++;\n    if (nextLine >= endLine) {\n      // unclosed block should be autoclosed by end of document.\n      // also block seems to be autoclosed by end of parent\n      break;\n    }\n\n    pos = mem = state.bMarks[nextLine] + state.tShift[nextLine];\n    max = state.eMarks[nextLine];\n\n    if (pos < max && state.tShift[nextLine] < state.blkIndent) {\n      // non-empty line with negative indent should stop the list:\n      // - ```\n      //  test\n      break;\n    }\n\n    if (state.src.charCodeAt(pos) !== marker) { continue; }\n\n    if (state.tShift[nextLine] - state.blkIndent >= 4) {\n      // closing fence should be indented less than 4 spaces\n      continue;\n    }\n\n    pos = state.skipChars(pos, marker);\n\n    // closing code fence must be at least as long as the opening one\n    if (pos - mem < len) { continue; }\n\n    // make sure tail has spaces only\n    pos = state.skipSpaces(pos);\n\n    if (pos < max) { continue; }\n\n    haveEndMarker = true;\n    // found!\n    break;\n  }\n\n  // If a fence has heading spaces, they should be removed from its inner block\n  len = state.tShift[startLine];\n\n  state.line = nextLine + (haveEndMarker ? 1 : 0);\n  state.tokens.push({\n    type: 'fence',\n    params: params,\n    content: state.getLines(startLine + 1, nextLine, len, true),\n    lines: [ startLine, state.line ],\n    level: state.level\n  });\n\n  return true;\n}\n\n// Block quotes\n\nfunction blockquote(state, startLine, endLine, silent) {\n  var nextLine, lastLineEmpty, oldTShift, oldBMarks, oldIndent, oldParentType, lines,\n      terminatorRules,\n      i, l, terminate,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  if (pos > max) { return false; }\n\n  // check the block quote marker\n  if (state.src.charCodeAt(pos++) !== 0x3E/* > */) { return false; }\n\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  // we know that it's going to be a valid blockquote,\n  // so no point trying to find the end of it in silent mode\n  if (silent) { return true; }\n\n  // skip one optional space after '>'\n  if (state.src.charCodeAt(pos) === 0x20) { pos++; }\n\n  oldIndent = state.blkIndent;\n  state.blkIndent = 0;\n\n  oldBMarks = [ state.bMarks[startLine] ];\n  state.bMarks[startLine] = pos;\n\n  // check if we have an empty blockquote\n  pos = pos < max ? state.skipSpaces(pos) : pos;\n  lastLineEmpty = pos >= max;\n\n  oldTShift = [ state.tShift[startLine] ];\n  state.tShift[startLine] = pos - state.bMarks[startLine];\n\n  terminatorRules = state.parser.ruler.getRules('blockquote');\n\n  // Search the end of the block\n  //\n  // Block ends with either:\n  //  1. an empty line outside:\n  //     ```\n  //     > test\n  //\n  //     ```\n  //  2. an empty line inside:\n  //     ```\n  //     >\n  //     test\n  //     ```\n  //  3. another tag\n  //     ```\n  //     > test\n  //      - - -\n  //     ```\n  for (nextLine = startLine + 1; nextLine < endLine; nextLine++) {\n    pos = state.bMarks[nextLine] + state.tShift[nextLine];\n    max = state.eMarks[nextLine];\n\n    if (pos >= max) {\n      // Case 1: line is not inside the blockquote, and this line is empty.\n      break;\n    }\n\n    if (state.src.charCodeAt(pos++) === 0x3E/* > */) {\n      // This line is inside the blockquote.\n\n      // skip one optional space after '>'\n      if (state.src.charCodeAt(pos) === 0x20) { pos++; }\n\n      oldBMarks.push(state.bMarks[nextLine]);\n      state.bMarks[nextLine] = pos;\n\n      pos = pos < max ? state.skipSpaces(pos) : pos;\n      lastLineEmpty = pos >= max;\n\n      oldTShift.push(state.tShift[nextLine]);\n      state.tShift[nextLine] = pos - state.bMarks[nextLine];\n      continue;\n    }\n\n    // Case 2: line is not inside the blockquote, and the last line was empty.\n    if (lastLineEmpty) { break; }\n\n    // Case 3: another tag found.\n    terminate = false;\n    for (i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n    if (terminate) { break; }\n\n    oldBMarks.push(state.bMarks[nextLine]);\n    oldTShift.push(state.tShift[nextLine]);\n\n    // A negative number means that this is a paragraph continuation;\n    //\n    // Any negative number will do the job here, but it's better for it\n    // to be large enough to make any bugs obvious.\n    state.tShift[nextLine] = -1337;\n  }\n\n  oldParentType = state.parentType;\n  state.parentType = 'blockquote';\n  state.tokens.push({\n    type: 'blockquote_open',\n    lines: lines = [ startLine, 0 ],\n    level: state.level++\n  });\n  state.parser.tokenize(state, startLine, nextLine);\n  state.tokens.push({\n    type: 'blockquote_close',\n    level: --state.level\n  });\n  state.parentType = oldParentType;\n  lines[1] = state.line;\n\n  // Restore original tShift; this might not be necessary since the parser\n  // has already been here, but just to make sure we can do that.\n  for (i = 0; i < oldTShift.length; i++) {\n    state.bMarks[i + startLine] = oldBMarks[i];\n    state.tShift[i + startLine] = oldTShift[i];\n  }\n  state.blkIndent = oldIndent;\n\n  return true;\n}\n\n// Horizontal rule\n\nfunction hr(state, startLine, endLine, silent) {\n  var marker, cnt, ch,\n      pos = state.bMarks[startLine],\n      max = state.eMarks[startLine];\n\n  pos += state.tShift[startLine];\n\n  if (pos > max) { return false; }\n\n  marker = state.src.charCodeAt(pos++);\n\n  // Check hr marker\n  if (marker !== 0x2A/* * */ &&\n      marker !== 0x2D/* - */ &&\n      marker !== 0x5F/* _ */) {\n    return false;\n  }\n\n  // markers can be mixed with spaces, but there should be at least 3 one\n\n  cnt = 1;\n  while (pos < max) {\n    ch = state.src.charCodeAt(pos++);\n    if (ch !== marker && ch !== 0x20/* space */) { return false; }\n    if (ch === marker) { cnt++; }\n  }\n\n  if (cnt < 3) { return false; }\n\n  if (silent) { return true; }\n\n  state.line = startLine + 1;\n  state.tokens.push({\n    type: 'hr',\n    lines: [ startLine, state.line ],\n    level: state.level\n  });\n\n  return true;\n}\n\n// Lists\n\n// Search `[-+*][\\n ]`, returns next pos arter marker on success\n// or -1 on fail.\nfunction skipBulletListMarker(state, startLine) {\n  var marker, pos, max;\n\n  pos = state.bMarks[startLine] + state.tShift[startLine];\n  max = state.eMarks[startLine];\n\n  if (pos >= max) { return -1; }\n\n  marker = state.src.charCodeAt(pos++);\n  // Check bullet\n  if (marker !== 0x2A/* * */ &&\n      marker !== 0x2D/* - */ &&\n      marker !== 0x2B/* + */) {\n    return -1;\n  }\n\n  if (pos < max && state.src.charCodeAt(pos) !== 0x20) {\n    // \" 1.test \" - is not a list item\n    return -1;\n  }\n\n  return pos;\n}\n\n// Search `\\d+[.)][\\n ]`, returns next pos arter marker on success\n// or -1 on fail.\nfunction skipOrderedListMarker(state, startLine) {\n  var ch,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  if (pos + 1 >= max) { return -1; }\n\n  ch = state.src.charCodeAt(pos++);\n\n  if (ch < 0x30/* 0 */ || ch > 0x39/* 9 */) { return -1; }\n\n  for (;;) {\n    // EOL -> fail\n    if (pos >= max) { return -1; }\n\n    ch = state.src.charCodeAt(pos++);\n\n    if (ch >= 0x30/* 0 */ && ch <= 0x39/* 9 */) {\n      continue;\n    }\n\n    // found valid marker\n    if (ch === 0x29/* ) */ || ch === 0x2e/* . */) {\n      break;\n    }\n\n    return -1;\n  }\n\n\n  if (pos < max && state.src.charCodeAt(pos) !== 0x20/* space */) {\n    // \" 1.test \" - is not a list item\n    return -1;\n  }\n  return pos;\n}\n\nfunction markTightParagraphs(state, idx) {\n  var i, l,\n      level = state.level + 2;\n\n  for (i = idx + 2, l = state.tokens.length - 2; i < l; i++) {\n    if (state.tokens[i].level === level && state.tokens[i].type === 'paragraph_open') {\n      state.tokens[i + 2].tight = true;\n      state.tokens[i].tight = true;\n      i += 2;\n    }\n  }\n}\n\n\nfunction list(state, startLine, endLine, silent) {\n  var nextLine,\n      indent,\n      oldTShift,\n      oldIndent,\n      oldTight,\n      oldParentType,\n      start,\n      posAfterMarker,\n      max,\n      indentAfterMarker,\n      markerValue,\n      markerCharCode,\n      isOrdered,\n      contentStart,\n      listTokIdx,\n      prevEmptyEnd,\n      listLines,\n      itemLines,\n      tight = true,\n      terminatorRules,\n      i, l, terminate;\n\n  // Detect list type and position after marker\n  if ((posAfterMarker = skipOrderedListMarker(state, startLine)) >= 0) {\n    isOrdered = true;\n  } else if ((posAfterMarker = skipBulletListMarker(state, startLine)) >= 0) {\n    isOrdered = false;\n  } else {\n    return false;\n  }\n\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  // We should terminate list on style change. Remember first one to compare.\n  markerCharCode = state.src.charCodeAt(posAfterMarker - 1);\n\n  // For validation mode we can terminate immediately\n  if (silent) { return true; }\n\n  // Start list\n  listTokIdx = state.tokens.length;\n\n  if (isOrdered) {\n    start = state.bMarks[startLine] + state.tShift[startLine];\n    markerValue = Number(state.src.substr(start, posAfterMarker - start - 1));\n\n    state.tokens.push({\n      type: 'ordered_list_open',\n      order: markerValue,\n      lines: listLines = [ startLine, 0 ],\n      level: state.level++\n    });\n\n  } else {\n    state.tokens.push({\n      type: 'bullet_list_open',\n      lines: listLines = [ startLine, 0 ],\n      level: state.level++\n    });\n  }\n\n  //\n  // Iterate list items\n  //\n\n  nextLine = startLine;\n  prevEmptyEnd = false;\n  terminatorRules = state.parser.ruler.getRules('list');\n\n  while (nextLine < endLine) {\n    contentStart = state.skipSpaces(posAfterMarker);\n    max = state.eMarks[nextLine];\n\n    if (contentStart >= max) {\n      // trimming space in \"-    \\n  3\" case, indent is 1 here\n      indentAfterMarker = 1;\n    } else {\n      indentAfterMarker = contentStart - posAfterMarker;\n    }\n\n    // If we have more than 4 spaces, the indent is 1\n    // (the rest is just indented code block)\n    if (indentAfterMarker > 4) { indentAfterMarker = 1; }\n\n    // If indent is less than 1, assume that it's one, example:\n    //  \"-\\n  test\"\n    if (indentAfterMarker < 1) { indentAfterMarker = 1; }\n\n    // \"  -  test\"\n    //  ^^^^^ - calculating total length of this thing\n    indent = (posAfterMarker - state.bMarks[nextLine]) + indentAfterMarker;\n\n    // Run subparser & write tokens\n    state.tokens.push({\n      type: 'list_item_open',\n      lines: itemLines = [ startLine, 0 ],\n      level: state.level++\n    });\n\n    oldIndent = state.blkIndent;\n    oldTight = state.tight;\n    oldTShift = state.tShift[startLine];\n    oldParentType = state.parentType;\n    state.tShift[startLine] = contentStart - state.bMarks[startLine];\n    state.blkIndent = indent;\n    state.tight = true;\n    state.parentType = 'list';\n\n    state.parser.tokenize(state, startLine, endLine, true);\n\n    // If any of list item is tight, mark list as tight\n    if (!state.tight || prevEmptyEnd) {\n      tight = false;\n    }\n    // Item become loose if finish with empty line,\n    // but we should filter last element, because it means list finish\n    prevEmptyEnd = (state.line - startLine) > 1 && state.isEmpty(state.line - 1);\n\n    state.blkIndent = oldIndent;\n    state.tShift[startLine] = oldTShift;\n    state.tight = oldTight;\n    state.parentType = oldParentType;\n\n    state.tokens.push({\n      type: 'list_item_close',\n      level: --state.level\n    });\n\n    nextLine = startLine = state.line;\n    itemLines[1] = nextLine;\n    contentStart = state.bMarks[startLine];\n\n    if (nextLine >= endLine) { break; }\n\n    if (state.isEmpty(nextLine)) {\n      break;\n    }\n\n    //\n    // Try to check if list is terminated or continued.\n    //\n    if (state.tShift[nextLine] < state.blkIndent) { break; }\n\n    // fail if terminating block found\n    terminate = false;\n    for (i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n    if (terminate) { break; }\n\n    // fail if list has another type\n    if (isOrdered) {\n      posAfterMarker = skipOrderedListMarker(state, nextLine);\n      if (posAfterMarker < 0) { break; }\n    } else {\n      posAfterMarker = skipBulletListMarker(state, nextLine);\n      if (posAfterMarker < 0) { break; }\n    }\n\n    if (markerCharCode !== state.src.charCodeAt(posAfterMarker - 1)) { break; }\n  }\n\n  // Finilize list\n  state.tokens.push({\n    type: isOrdered ? 'ordered_list_close' : 'bullet_list_close',\n    level: --state.level\n  });\n  listLines[1] = nextLine;\n\n  state.line = nextLine;\n\n  // mark paragraphs tight if needed\n  if (tight) {\n    markTightParagraphs(state, listTokIdx);\n  }\n\n  return true;\n}\n\n// Process footnote reference list\n\nfunction footnote(state, startLine, endLine, silent) {\n  var oldBMark, oldTShift, oldParentType, pos, label,\n      start = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  // line should be at least 5 chars - \"[^x]:\"\n  if (start + 4 > max) { return false; }\n\n  if (state.src.charCodeAt(start) !== 0x5B/* [ */) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x5E/* ^ */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  for (pos = start + 2; pos < max; pos++) {\n    if (state.src.charCodeAt(pos) === 0x20) { return false; }\n    if (state.src.charCodeAt(pos) === 0x5D /* ] */) {\n      break;\n    }\n  }\n\n  if (pos === start + 2) { return false; } // no empty footnote labels\n  if (pos + 1 >= max || state.src.charCodeAt(++pos) !== 0x3A /* : */) { return false; }\n  if (silent) { return true; }\n  pos++;\n\n  if (!state.env.footnotes) { state.env.footnotes = {}; }\n  if (!state.env.footnotes.refs) { state.env.footnotes.refs = {}; }\n  label = state.src.slice(start + 2, pos - 2);\n  state.env.footnotes.refs[':' + label] = -1;\n\n  state.tokens.push({\n    type: 'footnote_reference_open',\n    label: label,\n    level: state.level++\n  });\n\n  oldBMark = state.bMarks[startLine];\n  oldTShift = state.tShift[startLine];\n  oldParentType = state.parentType;\n  state.tShift[startLine] = state.skipSpaces(pos) - pos;\n  state.bMarks[startLine] = pos;\n  state.blkIndent += 4;\n  state.parentType = 'footnote';\n\n  if (state.tShift[startLine] < state.blkIndent) {\n    state.tShift[startLine] += state.blkIndent;\n    state.bMarks[startLine] -= state.blkIndent;\n  }\n\n  state.parser.tokenize(state, startLine, endLine, true);\n\n  state.parentType = oldParentType;\n  state.blkIndent -= 4;\n  state.tShift[startLine] = oldTShift;\n  state.bMarks[startLine] = oldBMark;\n\n  state.tokens.push({\n    type: 'footnote_reference_close',\n    level: --state.level\n  });\n\n  return true;\n}\n\n// heading (#, ##, ...)\n\nfunction heading(state, startLine, endLine, silent) {\n  var ch, level, tmp,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  if (pos >= max) { return false; }\n\n  ch  = state.src.charCodeAt(pos);\n\n  if (ch !== 0x23/* # */ || pos >= max) { return false; }\n\n  // count heading level\n  level = 1;\n  ch = state.src.charCodeAt(++pos);\n  while (ch === 0x23/* # */ && pos < max && level <= 6) {\n    level++;\n    ch = state.src.charCodeAt(++pos);\n  }\n\n  if (level > 6 || (pos < max && ch !== 0x20/* space */)) { return false; }\n\n  if (silent) { return true; }\n\n  // Let's cut tails like '    ###  ' from the end of string\n\n  max = state.skipCharsBack(max, 0x20, pos); // space\n  tmp = state.skipCharsBack(max, 0x23, pos); // #\n  if (tmp > pos && state.src.charCodeAt(tmp - 1) === 0x20/* space */) {\n    max = tmp;\n  }\n\n  state.line = startLine + 1;\n\n  state.tokens.push({ type: 'heading_open',\n    hLevel: level,\n    lines: [ startLine, state.line ],\n    level: state.level\n  });\n\n  // only if header is not empty\n  if (pos < max) {\n    state.tokens.push({\n      type: 'inline',\n      content: state.src.slice(pos, max).trim(),\n      level: state.level + 1,\n      lines: [ startLine, state.line ],\n      children: []\n    });\n  }\n  state.tokens.push({ type: 'heading_close', hLevel: level, level: state.level });\n\n  return true;\n}\n\n// lheading (---, ===)\n\nfunction lheading(state, startLine, endLine/*, silent*/) {\n  var marker, pos, max,\n      next = startLine + 1;\n\n  if (next >= endLine) { return false; }\n  if (state.tShift[next] < state.blkIndent) { return false; }\n\n  // Scan next line\n\n  if (state.tShift[next] - state.blkIndent > 3) { return false; }\n\n  pos = state.bMarks[next] + state.tShift[next];\n  max = state.eMarks[next];\n\n  if (pos >= max) { return false; }\n\n  marker = state.src.charCodeAt(pos);\n\n  if (marker !== 0x2D/* - */ && marker !== 0x3D/* = */) { return false; }\n\n  pos = state.skipChars(pos, marker);\n\n  pos = state.skipSpaces(pos);\n\n  if (pos < max) { return false; }\n\n  pos = state.bMarks[startLine] + state.tShift[startLine];\n\n  state.line = next + 1;\n  state.tokens.push({\n    type: 'heading_open',\n    hLevel: marker === 0x3D/* = */ ? 1 : 2,\n    lines: [ startLine, state.line ],\n    level: state.level\n  });\n  state.tokens.push({\n    type: 'inline',\n    content: state.src.slice(pos, state.eMarks[startLine]).trim(),\n    level: state.level + 1,\n    lines: [ startLine, state.line - 1 ],\n    children: []\n  });\n  state.tokens.push({\n    type: 'heading_close',\n    hLevel: marker === 0x3D/* = */ ? 1 : 2,\n    level: state.level\n  });\n\n  return true;\n}\n\n// List of valid html blocks names, accorting to commonmark spec\n// http://jgm.github.io/CommonMark/spec.html#html-blocks\n\nvar html_blocks = {};\n\n[\n  'article',\n  'aside',\n  'button',\n  'blockquote',\n  'body',\n  'canvas',\n  'caption',\n  'col',\n  'colgroup',\n  'dd',\n  'div',\n  'dl',\n  'dt',\n  'embed',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'footer',\n  'form',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'header',\n  'hgroup',\n  'hr',\n  'iframe',\n  'li',\n  'map',\n  'object',\n  'ol',\n  'output',\n  'p',\n  'pre',\n  'progress',\n  'script',\n  'section',\n  'style',\n  'table',\n  'tbody',\n  'td',\n  'textarea',\n  'tfoot',\n  'th',\n  'tr',\n  'thead',\n  'ul',\n  'video'\n].forEach(function (name) { html_blocks[name] = true; });\n\n// HTML block\n\n\nvar HTML_TAG_OPEN_RE = /^<([a-zA-Z]{1,15})[\\s\\/>]/;\nvar HTML_TAG_CLOSE_RE = /^<\\/([a-zA-Z]{1,15})[\\s>]/;\n\nfunction isLetter$1(ch) {\n  /*eslint no-bitwise:0*/\n  var lc = ch | 0x20; // to lower case\n  return (lc >= 0x61/* a */) && (lc <= 0x7a/* z */);\n}\n\nfunction htmlblock(state, startLine, endLine, silent) {\n  var ch, match, nextLine,\n      pos = state.bMarks[startLine],\n      max = state.eMarks[startLine],\n      shift = state.tShift[startLine];\n\n  pos += shift;\n\n  if (!state.options.html) { return false; }\n\n  if (shift > 3 || pos + 2 >= max) { return false; }\n\n  if (state.src.charCodeAt(pos) !== 0x3C/* < */) { return false; }\n\n  ch = state.src.charCodeAt(pos + 1);\n\n  if (ch === 0x21/* ! */ || ch === 0x3F/* ? */) {\n    // Directive start / comment start / processing instruction start\n    if (silent) { return true; }\n\n  } else if (ch === 0x2F/* / */ || isLetter$1(ch)) {\n\n    // Probably start or end of tag\n    if (ch === 0x2F/* \\ */) {\n      // closing tag\n      match = state.src.slice(pos, max).match(HTML_TAG_CLOSE_RE);\n      if (!match) { return false; }\n    } else {\n      // opening tag\n      match = state.src.slice(pos, max).match(HTML_TAG_OPEN_RE);\n      if (!match) { return false; }\n    }\n    // Make sure tag name is valid\n    if (html_blocks[match[1].toLowerCase()] !== true) { return false; }\n    if (silent) { return true; }\n\n  } else {\n    return false;\n  }\n\n  // If we are here - we detected HTML block.\n  // Let's roll down till empty line (block end).\n  nextLine = startLine + 1;\n  while (nextLine < state.lineMax && !state.isEmpty(nextLine)) {\n    nextLine++;\n  }\n\n  state.line = nextLine;\n  state.tokens.push({\n    type: 'htmlblock',\n    level: state.level,\n    lines: [ startLine, state.line ],\n    content: state.getLines(startLine, nextLine, 0, true)\n  });\n\n  return true;\n}\n\n// GFM table, non-standard\n\nfunction getLine(state, line) {\n  var pos = state.bMarks[line] + state.blkIndent,\n      max = state.eMarks[line];\n\n  return state.src.substr(pos, max - pos);\n}\n\nfunction table(state, startLine, endLine, silent) {\n  var ch, lineText, pos, i, nextLine, rows, cell,\n      aligns, t, tableLines, tbodyLines;\n\n  // should have at least three lines\n  if (startLine + 2 > endLine) { return false; }\n\n  nextLine = startLine + 1;\n\n  if (state.tShift[nextLine] < state.blkIndent) { return false; }\n\n  // first character of the second line should be '|' or '-'\n\n  pos = state.bMarks[nextLine] + state.tShift[nextLine];\n  if (pos >= state.eMarks[nextLine]) { return false; }\n\n  ch = state.src.charCodeAt(pos);\n  if (ch !== 0x7C/* | */ && ch !== 0x2D/* - */ && ch !== 0x3A/* : */) { return false; }\n\n  lineText = getLine(state, startLine + 1);\n  if (!/^[-:| ]+$/.test(lineText)) { return false; }\n\n  rows = lineText.split('|');\n  if (rows <= 2) { return false; }\n  aligns = [];\n  for (i = 0; i < rows.length; i++) {\n    t = rows[i].trim();\n    if (!t) {\n      // allow empty columns before and after table, but not in between columns;\n      // e.g. allow ` |---| `, disallow ` ---||--- `\n      if (i === 0 || i === rows.length - 1) {\n        continue;\n      } else {\n        return false;\n      }\n    }\n\n    if (!/^:?-+:?$/.test(t)) { return false; }\n    if (t.charCodeAt(t.length - 1) === 0x3A/* : */) {\n      aligns.push(t.charCodeAt(0) === 0x3A/* : */ ? 'center' : 'right');\n    } else if (t.charCodeAt(0) === 0x3A/* : */) {\n      aligns.push('left');\n    } else {\n      aligns.push('');\n    }\n  }\n\n  lineText = getLine(state, startLine).trim();\n  if (lineText.indexOf('|') === -1) { return false; }\n  rows = lineText.replace(/^\\||\\|$/g, '').split('|');\n  if (aligns.length !== rows.length) { return false; }\n  if (silent) { return true; }\n\n  state.tokens.push({\n    type: 'table_open',\n    lines: tableLines = [ startLine, 0 ],\n    level: state.level++\n  });\n  state.tokens.push({\n    type: 'thead_open',\n    lines: [ startLine, startLine + 1 ],\n    level: state.level++\n  });\n\n  state.tokens.push({\n    type: 'tr_open',\n    lines: [ startLine, startLine + 1 ],\n    level: state.level++\n  });\n  for (i = 0; i < rows.length; i++) {\n    state.tokens.push({\n      type: 'th_open',\n      align: aligns[i],\n      lines: [ startLine, startLine + 1 ],\n      level: state.level++\n    });\n    state.tokens.push({\n      type: 'inline',\n      content: rows[i].trim(),\n      lines: [ startLine, startLine + 1 ],\n      level: state.level,\n      children: []\n    });\n    state.tokens.push({ type: 'th_close', level: --state.level });\n  }\n  state.tokens.push({ type: 'tr_close', level: --state.level });\n  state.tokens.push({ type: 'thead_close', level: --state.level });\n\n  state.tokens.push({\n    type: 'tbody_open',\n    lines: tbodyLines = [ startLine + 2, 0 ],\n    level: state.level++\n  });\n\n  for (nextLine = startLine + 2; nextLine < endLine; nextLine++) {\n    if (state.tShift[nextLine] < state.blkIndent) { break; }\n\n    lineText = getLine(state, nextLine).trim();\n    if (lineText.indexOf('|') === -1) { break; }\n    rows = lineText.replace(/^\\||\\|$/g, '').split('|');\n\n    state.tokens.push({ type: 'tr_open', level: state.level++ });\n    for (i = 0; i < rows.length; i++) {\n      state.tokens.push({ type: 'td_open', align: aligns[i], level: state.level++ });\n      // 0x7c === '|'\n      cell = rows[i].substring(\n          rows[i].charCodeAt(0) === 0x7c ? 1 : 0,\n          rows[i].charCodeAt(rows[i].length - 1) === 0x7c ? rows[i].length - 1 : rows[i].length\n      ).trim();\n      state.tokens.push({\n        type: 'inline',\n        content: cell,\n        level: state.level,\n        children: []\n      });\n      state.tokens.push({ type: 'td_close', level: --state.level });\n    }\n    state.tokens.push({ type: 'tr_close', level: --state.level });\n  }\n  state.tokens.push({ type: 'tbody_close', level: --state.level });\n  state.tokens.push({ type: 'table_close', level: --state.level });\n\n  tableLines[1] = tbodyLines[1] = nextLine;\n  state.line = nextLine;\n  return true;\n}\n\n// Definition lists\n\n// Search `[:~][\\n ]`, returns next pos after marker on success\n// or -1 on fail.\nfunction skipMarker(state, line) {\n  var pos, marker,\n      start = state.bMarks[line] + state.tShift[line],\n      max = state.eMarks[line];\n\n  if (start >= max) { return -1; }\n\n  // Check bullet\n  marker = state.src.charCodeAt(start++);\n  if (marker !== 0x7E/* ~ */ && marker !== 0x3A/* : */) { return -1; }\n\n  pos = state.skipSpaces(start);\n\n  // require space after \":\"\n  if (start === pos) { return -1; }\n\n  // no empty definitions, e.g. \"  : \"\n  if (pos >= max) { return -1; }\n\n  return pos;\n}\n\nfunction markTightParagraphs$1(state, idx) {\n  var i, l,\n      level = state.level + 2;\n\n  for (i = idx + 2, l = state.tokens.length - 2; i < l; i++) {\n    if (state.tokens[i].level === level && state.tokens[i].type === 'paragraph_open') {\n      state.tokens[i + 2].tight = true;\n      state.tokens[i].tight = true;\n      i += 2;\n    }\n  }\n}\n\nfunction deflist(state, startLine, endLine, silent) {\n  var contentStart,\n      ddLine,\n      dtLine,\n      itemLines,\n      listLines,\n      listTokIdx,\n      nextLine,\n      oldIndent,\n      oldDDIndent,\n      oldParentType,\n      oldTShift,\n      oldTight,\n      prevEmptyEnd,\n      tight;\n\n  if (silent) {\n    // quirk: validation mode validates a dd block only, not a whole deflist\n    if (state.ddIndent < 0) { return false; }\n    return skipMarker(state, startLine) >= 0;\n  }\n\n  nextLine = startLine + 1;\n  if (state.isEmpty(nextLine)) {\n    if (++nextLine > endLine) { return false; }\n  }\n\n  if (state.tShift[nextLine] < state.blkIndent) { return false; }\n  contentStart = skipMarker(state, nextLine);\n  if (contentStart < 0) { return false; }\n\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  // Start list\n  listTokIdx = state.tokens.length;\n\n  state.tokens.push({\n    type: 'dl_open',\n    lines: listLines = [ startLine, 0 ],\n    level: state.level++\n  });\n\n  //\n  // Iterate list items\n  //\n\n  dtLine = startLine;\n  ddLine = nextLine;\n\n  // One definition list can contain multiple DTs,\n  // and one DT can be followed by multiple DDs.\n  //\n  // Thus, there is two loops here, and label is\n  // needed to break out of the second one\n  //\n  /*eslint no-labels:0,block-scoped-var:0*/\n  OUTER:\n  for (;;) {\n    tight = true;\n    prevEmptyEnd = false;\n\n    state.tokens.push({\n      type: 'dt_open',\n      lines: [ dtLine, dtLine ],\n      level: state.level++\n    });\n    state.tokens.push({\n      type: 'inline',\n      content: state.getLines(dtLine, dtLine + 1, state.blkIndent, false).trim(),\n      level: state.level + 1,\n      lines: [ dtLine, dtLine ],\n      children: []\n    });\n    state.tokens.push({\n      type: 'dt_close',\n      level: --state.level\n    });\n\n    for (;;) {\n      state.tokens.push({\n        type: 'dd_open',\n        lines: itemLines = [ nextLine, 0 ],\n        level: state.level++\n      });\n\n      oldTight = state.tight;\n      oldDDIndent = state.ddIndent;\n      oldIndent = state.blkIndent;\n      oldTShift = state.tShift[ddLine];\n      oldParentType = state.parentType;\n      state.blkIndent = state.ddIndent = state.tShift[ddLine] + 2;\n      state.tShift[ddLine] = contentStart - state.bMarks[ddLine];\n      state.tight = true;\n      state.parentType = 'deflist';\n\n      state.parser.tokenize(state, ddLine, endLine, true);\n\n      // If any of list item is tight, mark list as tight\n      if (!state.tight || prevEmptyEnd) {\n        tight = false;\n      }\n      // Item become loose if finish with empty line,\n      // but we should filter last element, because it means list finish\n      prevEmptyEnd = (state.line - ddLine) > 1 && state.isEmpty(state.line - 1);\n\n      state.tShift[ddLine] = oldTShift;\n      state.tight = oldTight;\n      state.parentType = oldParentType;\n      state.blkIndent = oldIndent;\n      state.ddIndent = oldDDIndent;\n\n      state.tokens.push({\n        type: 'dd_close',\n        level: --state.level\n      });\n\n      itemLines[1] = nextLine = state.line;\n\n      if (nextLine >= endLine) { break OUTER; }\n\n      if (state.tShift[nextLine] < state.blkIndent) { break OUTER; }\n      contentStart = skipMarker(state, nextLine);\n      if (contentStart < 0) { break; }\n\n      ddLine = nextLine;\n\n      // go to the next loop iteration:\n      // insert DD tag and repeat checking\n    }\n\n    if (nextLine >= endLine) { break; }\n    dtLine = nextLine;\n\n    if (state.isEmpty(dtLine)) { break; }\n    if (state.tShift[dtLine] < state.blkIndent) { break; }\n\n    ddLine = dtLine + 1;\n    if (ddLine >= endLine) { break; }\n    if (state.isEmpty(ddLine)) { ddLine++; }\n    if (ddLine >= endLine) { break; }\n\n    if (state.tShift[ddLine] < state.blkIndent) { break; }\n    contentStart = skipMarker(state, ddLine);\n    if (contentStart < 0) { break; }\n\n    // go to the next loop iteration:\n    // insert DT and DD tags and repeat checking\n  }\n\n  // Finilize list\n  state.tokens.push({\n    type: 'dl_close',\n    level: --state.level\n  });\n  listLines[1] = nextLine;\n\n  state.line = nextLine;\n\n  // mark paragraphs tight if needed\n  if (tight) {\n    markTightParagraphs$1(state, listTokIdx);\n  }\n\n  return true;\n}\n\n// Paragraph\n\nfunction paragraph(state, startLine/*, endLine*/) {\n  var endLine, content, terminate, i, l,\n      nextLine = startLine + 1,\n      terminatorRules;\n\n  endLine = state.lineMax;\n\n  // jump line-by-line until empty one or EOF\n  if (nextLine < endLine && !state.isEmpty(nextLine)) {\n    terminatorRules = state.parser.ruler.getRules('paragraph');\n\n    for (; nextLine < endLine && !state.isEmpty(nextLine); nextLine++) {\n      // this would be a code block normally, but after paragraph\n      // it's considered a lazy continuation regardless of what's there\n      if (state.tShift[nextLine] - state.blkIndent > 3) { continue; }\n\n      // Some tags can terminate paragraph without empty line.\n      terminate = false;\n      for (i = 0, l = terminatorRules.length; i < l; i++) {\n        if (terminatorRules[i](state, nextLine, endLine, true)) {\n          terminate = true;\n          break;\n        }\n      }\n      if (terminate) { break; }\n    }\n  }\n\n  content = state.getLines(startLine, nextLine, state.blkIndent, false).trim();\n\n  state.line = nextLine;\n  if (content.length) {\n    state.tokens.push({\n      type: 'paragraph_open',\n      tight: false,\n      lines: [ startLine, state.line ],\n      level: state.level\n    });\n    state.tokens.push({\n      type: 'inline',\n      content: content,\n      level: state.level + 1,\n      lines: [ startLine, state.line ],\n      children: []\n    });\n    state.tokens.push({\n      type: 'paragraph_close',\n      tight: false,\n      level: state.level\n    });\n  }\n\n  return true;\n}\n\n/**\n * Parser rules\n */\n\nvar _rules$1 = [\n  [ 'code',       code ],\n  [ 'fences',     fences,     [ 'paragraph', 'blockquote', 'list' ] ],\n  [ 'blockquote', blockquote, [ 'paragraph', 'blockquote', 'list' ] ],\n  [ 'hr',         hr,         [ 'paragraph', 'blockquote', 'list' ] ],\n  [ 'list',       list,       [ 'paragraph', 'blockquote' ] ],\n  [ 'footnote',   footnote,   [ 'paragraph' ] ],\n  [ 'heading',    heading,    [ 'paragraph', 'blockquote' ] ],\n  [ 'lheading',   lheading ],\n  [ 'htmlblock',  htmlblock,  [ 'paragraph', 'blockquote' ] ],\n  [ 'table',      table,      [ 'paragraph' ] ],\n  [ 'deflist',    deflist,    [ 'paragraph' ] ],\n  [ 'paragraph',  paragraph ]\n];\n\n/**\n * Block Parser class\n *\n * @api private\n */\n\nfunction ParserBlock() {\n  this.ruler = new Ruler();\n  for (var i = 0; i < _rules$1.length; i++) {\n    this.ruler.push(_rules$1[i][0], _rules$1[i][1], {\n      alt: (_rules$1[i][2] || []).slice()\n    });\n  }\n}\n\n/**\n * Generate tokens for the given input range.\n *\n * @param  {Object} `state` Has properties like `src`, `parser`, `options` etc\n * @param  {Number} `startLine`\n * @param  {Number} `endLine`\n * @api private\n */\n\nParserBlock.prototype.tokenize = function (state, startLine, endLine) {\n  var rules = this.ruler.getRules('');\n  var len = rules.length;\n  var line = startLine;\n  var hasEmptyLines = false;\n  var ok, i;\n\n  while (line < endLine) {\n    state.line = line = state.skipEmptyLines(line);\n    if (line >= endLine) {\n      break;\n    }\n\n    // Termination condition for nested calls.\n    // Nested calls currently used for blockquotes & lists\n    if (state.tShift[line] < state.blkIndent) {\n      break;\n    }\n\n    // Try all possible rules.\n    // On success, rule should:\n    //\n    // - update `state.line`\n    // - update `state.tokens`\n    // - return true\n\n    for (i = 0; i < len; i++) {\n      ok = rules[i](state, line, endLine, false);\n      if (ok) {\n        break;\n      }\n    }\n\n    // set state.tight iff we had an empty line before current tag\n    // i.e. latest empty line should not count\n    state.tight = !hasEmptyLines;\n\n    // paragraph might \"eat\" one newline after it in nested lists\n    if (state.isEmpty(state.line - 1)) {\n      hasEmptyLines = true;\n    }\n\n    line = state.line;\n\n    if (line < endLine && state.isEmpty(line)) {\n      hasEmptyLines = true;\n      line++;\n\n      // two empty lines should stop the parser in list mode\n      if (line < endLine && state.parentType === 'list' && state.isEmpty(line)) { break; }\n      state.line = line;\n    }\n  }\n};\n\nvar TABS_SCAN_RE = /[\\n\\t]/g;\nvar NEWLINES_RE  = /\\r[\\n\\u0085]|[\\u2424\\u2028\\u0085]/g;\nvar SPACES_RE    = /\\u00a0/g;\n\n/**\n * Tokenize the given `str`.\n *\n * @param  {String} `str` Source string\n * @param  {Object} `options`\n * @param  {Object} `env`\n * @param  {Array} `outTokens`\n * @api private\n */\n\nParserBlock.prototype.parse = function (str, options, env, outTokens) {\n  var state, lineStart = 0, lastTabPos = 0;\n  if (!str) { return []; }\n\n  // Normalize spaces\n  str = str.replace(SPACES_RE, ' ');\n\n  // Normalize newlines\n  str = str.replace(NEWLINES_RE, '\\n');\n\n  // Replace tabs with proper number of spaces (1..4)\n  if (str.indexOf('\\t') >= 0) {\n    str = str.replace(TABS_SCAN_RE, function (match, offset) {\n      var result;\n      if (str.charCodeAt(offset) === 0x0A) {\n        lineStart = offset + 1;\n        lastTabPos = 0;\n        return match;\n      }\n      result = '    '.slice((offset - lineStart - lastTabPos) % 4);\n      lastTabPos = offset - lineStart + 1;\n      return result;\n    });\n  }\n\n  state = new StateBlock(str, this, options, env, outTokens);\n  this.tokenize(state, state.line, state.lineMax);\n};\n\n// Skip text characters for text token, place those to pending buffer\n// and increment current pos\n\n// Rule to skip pure text\n// '{}$%@~+=:' reserved for extentions\n\nfunction isTerminatorChar(ch) {\n  switch (ch) {\n    case 0x0A/* \\n */:\n    case 0x5C/* \\ */:\n    case 0x60/* ` */:\n    case 0x2A/* * */:\n    case 0x5F/* _ */:\n    case 0x5E/* ^ */:\n    case 0x5B/* [ */:\n    case 0x5D/* ] */:\n    case 0x21/* ! */:\n    case 0x26/* & */:\n    case 0x3C/* < */:\n    case 0x3E/* > */:\n    case 0x7B/* { */:\n    case 0x7D/* } */:\n    case 0x24/* $ */:\n    case 0x25/* % */:\n    case 0x40/* @ */:\n    case 0x7E/* ~ */:\n    case 0x2B/* + */:\n    case 0x3D/* = */:\n    case 0x3A/* : */:\n      return true;\n    default:\n      return false;\n  }\n}\n\nfunction text(state, silent) {\n  var pos = state.pos;\n\n  while (pos < state.posMax && !isTerminatorChar(state.src.charCodeAt(pos))) {\n    pos++;\n  }\n\n  if (pos === state.pos) { return false; }\n\n  if (!silent) { state.pending += state.src.slice(state.pos, pos); }\n\n  state.pos = pos;\n\n  return true;\n}\n\n// Proceess '\\n'\n\nfunction newline(state, silent) {\n  var pmax, max, pos = state.pos;\n\n  if (state.src.charCodeAt(pos) !== 0x0A/* \\n */) { return false; }\n\n  pmax = state.pending.length - 1;\n  max = state.posMax;\n\n  // '  \\n' -> hardbreak\n  // Lookup in pending chars is bad practice! Don't copy to other rules!\n  // Pending string is stored in concat mode, indexed lookups will cause\n  // convertion to flat mode.\n  if (!silent) {\n    if (pmax >= 0 && state.pending.charCodeAt(pmax) === 0x20) {\n      if (pmax >= 1 && state.pending.charCodeAt(pmax - 1) === 0x20) {\n        // Strip out all trailing spaces on this line.\n        for (var i = pmax - 2; i >= 0; i--) {\n          if (state.pending.charCodeAt(i) !== 0x20) {\n            state.pending = state.pending.substring(0, i + 1);\n            break;\n          }\n        }\n        state.push({\n          type: 'hardbreak',\n          level: state.level\n        });\n      } else {\n        state.pending = state.pending.slice(0, -1);\n        state.push({\n          type: 'softbreak',\n          level: state.level\n        });\n      }\n\n    } else {\n      state.push({\n        type: 'softbreak',\n        level: state.level\n      });\n    }\n  }\n\n  pos++;\n\n  // skip heading spaces for next line\n  while (pos < max && state.src.charCodeAt(pos) === 0x20) { pos++; }\n\n  state.pos = pos;\n  return true;\n}\n\n// Proceess escaped chars and hardbreaks\n\nvar ESCAPED = [];\n\nfor (var i = 0; i < 256; i++) { ESCAPED.push(0); }\n\n'\\\\!\"#$%&\\'()*+,./:;<=>?@[]^_`{|}~-'\n  .split('').forEach(function(ch) { ESCAPED[ch.charCodeAt(0)] = 1; });\n\n\nfunction escape(state, silent) {\n  var ch, pos = state.pos, max = state.posMax;\n\n  if (state.src.charCodeAt(pos) !== 0x5C/* \\ */) { return false; }\n\n  pos++;\n\n  if (pos < max) {\n    ch = state.src.charCodeAt(pos);\n\n    if (ch < 256 && ESCAPED[ch] !== 0) {\n      if (!silent) { state.pending += state.src[pos]; }\n      state.pos += 2;\n      return true;\n    }\n\n    if (ch === 0x0A) {\n      if (!silent) {\n        state.push({\n          type: 'hardbreak',\n          level: state.level\n        });\n      }\n\n      pos++;\n      // skip leading whitespaces from next line\n      while (pos < max && state.src.charCodeAt(pos) === 0x20) { pos++; }\n\n      state.pos = pos;\n      return true;\n    }\n  }\n\n  if (!silent) { state.pending += '\\\\'; }\n  state.pos++;\n  return true;\n}\n\n// Parse backticks\n\nfunction backticks(state, silent) {\n  var start, max, marker, matchStart, matchEnd,\n      pos = state.pos,\n      ch = state.src.charCodeAt(pos);\n\n  if (ch !== 0x60/* ` */) { return false; }\n\n  start = pos;\n  pos++;\n  max = state.posMax;\n\n  while (pos < max && state.src.charCodeAt(pos) === 0x60/* ` */) { pos++; }\n\n  marker = state.src.slice(start, pos);\n\n  matchStart = matchEnd = pos;\n\n  while ((matchStart = state.src.indexOf('`', matchEnd)) !== -1) {\n    matchEnd = matchStart + 1;\n\n    while (matchEnd < max && state.src.charCodeAt(matchEnd) === 0x60/* ` */) { matchEnd++; }\n\n    if (matchEnd - matchStart === marker.length) {\n      if (!silent) {\n        state.push({\n          type: 'code',\n          content: state.src.slice(pos, matchStart)\n                              .replace(/[ \\n]+/g, ' ')\n                              .trim(),\n          block: false,\n          level: state.level\n        });\n      }\n      state.pos = matchEnd;\n      return true;\n    }\n  }\n\n  if (!silent) { state.pending += marker; }\n  state.pos += marker.length;\n  return true;\n}\n\n// Process ~~deleted text~~\n\nfunction del(state, silent) {\n  var found,\n      pos,\n      stack,\n      max = state.posMax,\n      start = state.pos,\n      lastChar,\n      nextChar;\n\n  if (state.src.charCodeAt(start) !== 0x7E/* ~ */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n  if (start + 4 >= max) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x7E/* ~ */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  lastChar = start > 0 ? state.src.charCodeAt(start - 1) : -1;\n  nextChar = state.src.charCodeAt(start + 2);\n\n  if (lastChar === 0x7E/* ~ */) { return false; }\n  if (nextChar === 0x7E/* ~ */) { return false; }\n  if (nextChar === 0x20 || nextChar === 0x0A) { return false; }\n\n  pos = start + 2;\n  while (pos < max && state.src.charCodeAt(pos) === 0x7E/* ~ */) { pos++; }\n  if (pos > start + 3) {\n    // sequence of 4+ markers taking as literal, same as in a emphasis\n    state.pos += pos - start;\n    if (!silent) { state.pending += state.src.slice(start, pos); }\n    return true;\n  }\n\n  state.pos = start + 2;\n  stack = 1;\n\n  while (state.pos + 1 < max) {\n    if (state.src.charCodeAt(state.pos) === 0x7E/* ~ */) {\n      if (state.src.charCodeAt(state.pos + 1) === 0x7E/* ~ */) {\n        lastChar = state.src.charCodeAt(state.pos - 1);\n        nextChar = state.pos + 2 < max ? state.src.charCodeAt(state.pos + 2) : -1;\n        if (nextChar !== 0x7E/* ~ */ && lastChar !== 0x7E/* ~ */) {\n          if (lastChar !== 0x20 && lastChar !== 0x0A) {\n            // closing '~~'\n            stack--;\n          } else if (nextChar !== 0x20 && nextChar !== 0x0A) {\n            // opening '~~'\n            stack++;\n          } // else {\n            //  // standalone ' ~~ ' indented with spaces\n            // }\n          if (stack <= 0) {\n            found = true;\n            break;\n          }\n        }\n      }\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (!found) {\n    // parser failed to find ending tag, so it's not valid emphasis\n    state.pos = start;\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + 2;\n\n  if (!silent) {\n    state.push({ type: 'del_open', level: state.level++ });\n    state.parser.tokenize(state);\n    state.push({ type: 'del_close', level: --state.level });\n  }\n\n  state.pos = state.posMax + 2;\n  state.posMax = max;\n  return true;\n}\n\n// Process ++inserted text++\n\nfunction ins(state, silent) {\n  var found,\n      pos,\n      stack,\n      max = state.posMax,\n      start = state.pos,\n      lastChar,\n      nextChar;\n\n  if (state.src.charCodeAt(start) !== 0x2B/* + */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n  if (start + 4 >= max) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x2B/* + */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  lastChar = start > 0 ? state.src.charCodeAt(start - 1) : -1;\n  nextChar = state.src.charCodeAt(start + 2);\n\n  if (lastChar === 0x2B/* + */) { return false; }\n  if (nextChar === 0x2B/* + */) { return false; }\n  if (nextChar === 0x20 || nextChar === 0x0A) { return false; }\n\n  pos = start + 2;\n  while (pos < max && state.src.charCodeAt(pos) === 0x2B/* + */) { pos++; }\n  if (pos !== start + 2) {\n    // sequence of 3+ markers taking as literal, same as in a emphasis\n    state.pos += pos - start;\n    if (!silent) { state.pending += state.src.slice(start, pos); }\n    return true;\n  }\n\n  state.pos = start + 2;\n  stack = 1;\n\n  while (state.pos + 1 < max) {\n    if (state.src.charCodeAt(state.pos) === 0x2B/* + */) {\n      if (state.src.charCodeAt(state.pos + 1) === 0x2B/* + */) {\n        lastChar = state.src.charCodeAt(state.pos - 1);\n        nextChar = state.pos + 2 < max ? state.src.charCodeAt(state.pos + 2) : -1;\n        if (nextChar !== 0x2B/* + */ && lastChar !== 0x2B/* + */) {\n          if (lastChar !== 0x20 && lastChar !== 0x0A) {\n            // closing '++'\n            stack--;\n          } else if (nextChar !== 0x20 && nextChar !== 0x0A) {\n            // opening '++'\n            stack++;\n          } // else {\n            //  // standalone ' ++ ' indented with spaces\n            // }\n          if (stack <= 0) {\n            found = true;\n            break;\n          }\n        }\n      }\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (!found) {\n    // parser failed to find ending tag, so it's not valid emphasis\n    state.pos = start;\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + 2;\n\n  if (!silent) {\n    state.push({ type: 'ins_open', level: state.level++ });\n    state.parser.tokenize(state);\n    state.push({ type: 'ins_close', level: --state.level });\n  }\n\n  state.pos = state.posMax + 2;\n  state.posMax = max;\n  return true;\n}\n\n// Process ==highlighted text==\n\nfunction mark(state, silent) {\n  var found,\n      pos,\n      stack,\n      max = state.posMax,\n      start = state.pos,\n      lastChar,\n      nextChar;\n\n  if (state.src.charCodeAt(start) !== 0x3D/* = */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n  if (start + 4 >= max) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x3D/* = */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  lastChar = start > 0 ? state.src.charCodeAt(start - 1) : -1;\n  nextChar = state.src.charCodeAt(start + 2);\n\n  if (lastChar === 0x3D/* = */) { return false; }\n  if (nextChar === 0x3D/* = */) { return false; }\n  if (nextChar === 0x20 || nextChar === 0x0A) { return false; }\n\n  pos = start + 2;\n  while (pos < max && state.src.charCodeAt(pos) === 0x3D/* = */) { pos++; }\n  if (pos !== start + 2) {\n    // sequence of 3+ markers taking as literal, same as in a emphasis\n    state.pos += pos - start;\n    if (!silent) { state.pending += state.src.slice(start, pos); }\n    return true;\n  }\n\n  state.pos = start + 2;\n  stack = 1;\n\n  while (state.pos + 1 < max) {\n    if (state.src.charCodeAt(state.pos) === 0x3D/* = */) {\n      if (state.src.charCodeAt(state.pos + 1) === 0x3D/* = */) {\n        lastChar = state.src.charCodeAt(state.pos - 1);\n        nextChar = state.pos + 2 < max ? state.src.charCodeAt(state.pos + 2) : -1;\n        if (nextChar !== 0x3D/* = */ && lastChar !== 0x3D/* = */) {\n          if (lastChar !== 0x20 && lastChar !== 0x0A) {\n            // closing '=='\n            stack--;\n          } else if (nextChar !== 0x20 && nextChar !== 0x0A) {\n            // opening '=='\n            stack++;\n          } // else {\n            //  // standalone ' == ' indented with spaces\n            // }\n          if (stack <= 0) {\n            found = true;\n            break;\n          }\n        }\n      }\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (!found) {\n    // parser failed to find ending tag, so it's not valid emphasis\n    state.pos = start;\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + 2;\n\n  if (!silent) {\n    state.push({ type: 'mark_open', level: state.level++ });\n    state.parser.tokenize(state);\n    state.push({ type: 'mark_close', level: --state.level });\n  }\n\n  state.pos = state.posMax + 2;\n  state.posMax = max;\n  return true;\n}\n\n// Process *this* and _that_\n\nfunction isAlphaNum(code) {\n  return (code >= 0x30 /* 0 */ && code <= 0x39 /* 9 */) ||\n         (code >= 0x41 /* A */ && code <= 0x5A /* Z */) ||\n         (code >= 0x61 /* a */ && code <= 0x7A /* z */);\n}\n\n// parse sequence of emphasis markers,\n// \"start\" should point at a valid marker\nfunction scanDelims(state, start) {\n  var pos = start, lastChar, nextChar, count,\n      can_open = true,\n      can_close = true,\n      max = state.posMax,\n      marker = state.src.charCodeAt(start);\n\n  lastChar = start > 0 ? state.src.charCodeAt(start - 1) : -1;\n\n  while (pos < max && state.src.charCodeAt(pos) === marker) { pos++; }\n  if (pos >= max) { can_open = false; }\n  count = pos - start;\n\n  if (count >= 4) {\n    // sequence of four or more unescaped markers can't start/end an emphasis\n    can_open = can_close = false;\n  } else {\n    nextChar = pos < max ? state.src.charCodeAt(pos) : -1;\n\n    // check whitespace conditions\n    if (nextChar === 0x20 || nextChar === 0x0A) { can_open = false; }\n    if (lastChar === 0x20 || lastChar === 0x0A) { can_close = false; }\n\n    if (marker === 0x5F /* _ */) {\n      // check if we aren't inside the word\n      if (isAlphaNum(lastChar)) { can_open = false; }\n      if (isAlphaNum(nextChar)) { can_close = false; }\n    }\n  }\n\n  return {\n    can_open: can_open,\n    can_close: can_close,\n    delims: count\n  };\n}\n\nfunction emphasis(state, silent) {\n  var startCount,\n      count,\n      found,\n      oldCount,\n      newCount,\n      stack,\n      res,\n      max = state.posMax,\n      start = state.pos,\n      marker = state.src.charCodeAt(start);\n\n  if (marker !== 0x5F/* _ */ && marker !== 0x2A /* * */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n\n  res = scanDelims(state, start);\n  startCount = res.delims;\n  if (!res.can_open) {\n    state.pos += startCount;\n    if (!silent) { state.pending += state.src.slice(start, state.pos); }\n    return true;\n  }\n\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  state.pos = start + startCount;\n  stack = [ startCount ];\n\n  while (state.pos < max) {\n    if (state.src.charCodeAt(state.pos) === marker) {\n      res = scanDelims(state, state.pos);\n      count = res.delims;\n      if (res.can_close) {\n        oldCount = stack.pop();\n        newCount = count;\n\n        while (oldCount !== newCount) {\n          if (newCount < oldCount) {\n            stack.push(oldCount - newCount);\n            break;\n          }\n\n          // assert(newCount > oldCount)\n          newCount -= oldCount;\n\n          if (stack.length === 0) { break; }\n          state.pos += oldCount;\n          oldCount = stack.pop();\n        }\n\n        if (stack.length === 0) {\n          startCount = oldCount;\n          found = true;\n          break;\n        }\n        state.pos += count;\n        continue;\n      }\n\n      if (res.can_open) { stack.push(count); }\n      state.pos += count;\n      continue;\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (!found) {\n    // parser failed to find ending tag, so it's not valid emphasis\n    state.pos = start;\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + startCount;\n\n  if (!silent) {\n    if (startCount === 2 || startCount === 3) {\n      state.push({ type: 'strong_open', level: state.level++ });\n    }\n    if (startCount === 1 || startCount === 3) {\n      state.push({ type: 'em_open', level: state.level++ });\n    }\n\n    state.parser.tokenize(state);\n\n    if (startCount === 1 || startCount === 3) {\n      state.push({ type: 'em_close', level: --state.level });\n    }\n    if (startCount === 2 || startCount === 3) {\n      state.push({ type: 'strong_close', level: --state.level });\n    }\n  }\n\n  state.pos = state.posMax + startCount;\n  state.posMax = max;\n  return true;\n}\n\n// Process ~subscript~\n\n// same as UNESCAPE_MD_RE plus a space\nvar UNESCAPE_RE = /\\\\([ \\\\!\"#$%&'()*+,.\\/:;<=>?@[\\]^_`{|}~-])/g;\n\nfunction sub(state, silent) {\n  var found,\n      content,\n      max = state.posMax,\n      start = state.pos;\n\n  if (state.src.charCodeAt(start) !== 0x7E/* ~ */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n  if (start + 2 >= max) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  state.pos = start + 1;\n\n  while (state.pos < max) {\n    if (state.src.charCodeAt(state.pos) === 0x7E/* ~ */) {\n      found = true;\n      break;\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (!found || start + 1 === state.pos) {\n    state.pos = start;\n    return false;\n  }\n\n  content = state.src.slice(start + 1, state.pos);\n\n  // don't allow unescaped spaces/newlines inside\n  if (content.match(/(^|[^\\\\])(\\\\\\\\)*\\s/)) {\n    state.pos = start;\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + 1;\n\n  if (!silent) {\n    state.push({\n      type: 'sub',\n      level: state.level,\n      content: content.replace(UNESCAPE_RE, '$1')\n    });\n  }\n\n  state.pos = state.posMax + 1;\n  state.posMax = max;\n  return true;\n}\n\n// Process ^superscript^\n\n// same as UNESCAPE_MD_RE plus a space\nvar UNESCAPE_RE$1 = /\\\\([ \\\\!\"#$%&'()*+,.\\/:;<=>?@[\\]^_`{|}~-])/g;\n\nfunction sup(state, silent) {\n  var found,\n      content,\n      max = state.posMax,\n      start = state.pos;\n\n  if (state.src.charCodeAt(start) !== 0x5E/* ^ */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n  if (start + 2 >= max) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  state.pos = start + 1;\n\n  while (state.pos < max) {\n    if (state.src.charCodeAt(state.pos) === 0x5E/* ^ */) {\n      found = true;\n      break;\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (!found || start + 1 === state.pos) {\n    state.pos = start;\n    return false;\n  }\n\n  content = state.src.slice(start + 1, state.pos);\n\n  // don't allow unescaped spaces/newlines inside\n  if (content.match(/(^|[^\\\\])(\\\\\\\\)*\\s/)) {\n    state.pos = start;\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + 1;\n\n  if (!silent) {\n    state.push({\n      type: 'sup',\n      level: state.level,\n      content: content.replace(UNESCAPE_RE$1, '$1')\n    });\n  }\n\n  state.pos = state.posMax + 1;\n  state.posMax = max;\n  return true;\n}\n\n// Process [links](<to> \"stuff\")\n\n\nfunction links(state, silent) {\n  var labelStart,\n      labelEnd,\n      label,\n      href,\n      title,\n      pos,\n      ref,\n      code,\n      isImage = false,\n      oldPos = state.pos,\n      max = state.posMax,\n      start = state.pos,\n      marker = state.src.charCodeAt(start);\n\n  if (marker === 0x21/* ! */) {\n    isImage = true;\n    marker = state.src.charCodeAt(++start);\n  }\n\n  if (marker !== 0x5B/* [ */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  labelStart = start + 1;\n  labelEnd = parseLinkLabel(state, start);\n\n  // parser failed to find ']', so it's not a valid link\n  if (labelEnd < 0) { return false; }\n\n  pos = labelEnd + 1;\n  if (pos < max && state.src.charCodeAt(pos) === 0x28/* ( */) {\n    //\n    // Inline link\n    //\n\n    // [link](  <href>  \"title\"  )\n    //        ^^ skipping these spaces\n    pos++;\n    for (; pos < max; pos++) {\n      code = state.src.charCodeAt(pos);\n      if (code !== 0x20 && code !== 0x0A) { break; }\n    }\n    if (pos >= max) { return false; }\n\n    // [link](  <href>  \"title\"  )\n    //          ^^^^^^ parsing link destination\n    start = pos;\n    if (parseLinkDestination(state, pos)) {\n      href = state.linkContent;\n      pos = state.pos;\n    } else {\n      href = '';\n    }\n\n    // [link](  <href>  \"title\"  )\n    //                ^^ skipping these spaces\n    start = pos;\n    for (; pos < max; pos++) {\n      code = state.src.charCodeAt(pos);\n      if (code !== 0x20 && code !== 0x0A) { break; }\n    }\n\n    // [link](  <href>  \"title\"  )\n    //                  ^^^^^^^ parsing link title\n    if (pos < max && start !== pos && parseLinkTitle(state, pos)) {\n      title = state.linkContent;\n      pos = state.pos;\n\n      // [link](  <href>  \"title\"  )\n      //                         ^^ skipping these spaces\n      for (; pos < max; pos++) {\n        code = state.src.charCodeAt(pos);\n        if (code !== 0x20 && code !== 0x0A) { break; }\n      }\n    } else {\n      title = '';\n    }\n\n    if (pos >= max || state.src.charCodeAt(pos) !== 0x29/* ) */) {\n      state.pos = oldPos;\n      return false;\n    }\n    pos++;\n  } else {\n    //\n    // Link reference\n    //\n\n    // do not allow nested reference links\n    if (state.linkLevel > 0) { return false; }\n\n    // [foo]  [bar]\n    //      ^^ optional whitespace (can include newlines)\n    for (; pos < max; pos++) {\n      code = state.src.charCodeAt(pos);\n      if (code !== 0x20 && code !== 0x0A) { break; }\n    }\n\n    if (pos < max && state.src.charCodeAt(pos) === 0x5B/* [ */) {\n      start = pos + 1;\n      pos = parseLinkLabel(state, pos);\n      if (pos >= 0) {\n        label = state.src.slice(start, pos++);\n      } else {\n        pos = start - 1;\n      }\n    }\n\n    // covers label === '' and label === undefined\n    // (collapsed reference link and shortcut reference link respectively)\n    if (!label) {\n      if (typeof label === 'undefined') {\n        pos = labelEnd + 1;\n      }\n      label = state.src.slice(labelStart, labelEnd);\n    }\n\n    ref = state.env.references[normalizeReference(label)];\n    if (!ref) {\n      state.pos = oldPos;\n      return false;\n    }\n    href = ref.href;\n    title = ref.title;\n  }\n\n  //\n  // We found the end of the link, and know for a fact it's a valid link;\n  // so all that's left to do is to call tokenizer.\n  //\n  if (!silent) {\n    state.pos = labelStart;\n    state.posMax = labelEnd;\n\n    if (isImage) {\n      state.push({\n        type: 'image',\n        src: href,\n        title: title,\n        alt: state.src.substr(labelStart, labelEnd - labelStart),\n        level: state.level\n      });\n    } else {\n      state.push({\n        type: 'link_open',\n        href: href,\n        title: title,\n        level: state.level++\n      });\n      state.linkLevel++;\n      state.parser.tokenize(state);\n      state.linkLevel--;\n      state.push({ type: 'link_close', level: --state.level });\n    }\n  }\n\n  state.pos = pos;\n  state.posMax = max;\n  return true;\n}\n\n// Process inline footnotes (^[...])\n\n\nfunction footnote_inline(state, silent) {\n  var labelStart,\n      labelEnd,\n      footnoteId,\n      oldLength,\n      max = state.posMax,\n      start = state.pos;\n\n  if (start + 2 >= max) { return false; }\n  if (state.src.charCodeAt(start) !== 0x5E/* ^ */) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x5B/* [ */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  labelStart = start + 2;\n  labelEnd = parseLinkLabel(state, start + 1);\n\n  // parser failed to find ']', so it's not a valid note\n  if (labelEnd < 0) { return false; }\n\n  // We found the end of the link, and know for a fact it's a valid link;\n  // so all that's left to do is to call tokenizer.\n  //\n  if (!silent) {\n    if (!state.env.footnotes) { state.env.footnotes = {}; }\n    if (!state.env.footnotes.list) { state.env.footnotes.list = []; }\n    footnoteId = state.env.footnotes.list.length;\n\n    state.pos = labelStart;\n    state.posMax = labelEnd;\n\n    state.push({\n      type: 'footnote_ref',\n      id: footnoteId,\n      level: state.level\n    });\n    state.linkLevel++;\n    oldLength = state.tokens.length;\n    state.parser.tokenize(state);\n    state.env.footnotes.list[footnoteId] = { tokens: state.tokens.splice(oldLength) };\n    state.linkLevel--;\n  }\n\n  state.pos = labelEnd + 1;\n  state.posMax = max;\n  return true;\n}\n\n// Process footnote references ([^...])\n\nfunction footnote_ref(state, silent) {\n  var label,\n      pos,\n      footnoteId,\n      footnoteSubId,\n      max = state.posMax,\n      start = state.pos;\n\n  // should be at least 4 chars - \"[^x]\"\n  if (start + 3 > max) { return false; }\n\n  if (!state.env.footnotes || !state.env.footnotes.refs) { return false; }\n  if (state.src.charCodeAt(start) !== 0x5B/* [ */) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x5E/* ^ */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  for (pos = start + 2; pos < max; pos++) {\n    if (state.src.charCodeAt(pos) === 0x20) { return false; }\n    if (state.src.charCodeAt(pos) === 0x0A) { return false; }\n    if (state.src.charCodeAt(pos) === 0x5D /* ] */) {\n      break;\n    }\n  }\n\n  if (pos === start + 2) { return false; } // no empty footnote labels\n  if (pos >= max) { return false; }\n  pos++;\n\n  label = state.src.slice(start + 2, pos - 1);\n  if (typeof state.env.footnotes.refs[':' + label] === 'undefined') { return false; }\n\n  if (!silent) {\n    if (!state.env.footnotes.list) { state.env.footnotes.list = []; }\n\n    if (state.env.footnotes.refs[':' + label] < 0) {\n      footnoteId = state.env.footnotes.list.length;\n      state.env.footnotes.list[footnoteId] = { label: label, count: 0 };\n      state.env.footnotes.refs[':' + label] = footnoteId;\n    } else {\n      footnoteId = state.env.footnotes.refs[':' + label];\n    }\n\n    footnoteSubId = state.env.footnotes.list[footnoteId].count;\n    state.env.footnotes.list[footnoteId].count++;\n\n    state.push({\n      type: 'footnote_ref',\n      id: footnoteId,\n      subId: footnoteSubId,\n      level: state.level\n    });\n  }\n\n  state.pos = pos;\n  state.posMax = max;\n  return true;\n}\n\n// List of valid url schemas, accorting to commonmark spec\n// http://jgm.github.io/CommonMark/spec.html#autolinks\n\nvar url_schemas = [\n  'coap',\n  'doi',\n  'javascript',\n  'aaa',\n  'aaas',\n  'about',\n  'acap',\n  'cap',\n  'cid',\n  'crid',\n  'data',\n  'dav',\n  'dict',\n  'dns',\n  'file',\n  'ftp',\n  'geo',\n  'go',\n  'gopher',\n  'h323',\n  'http',\n  'https',\n  'iax',\n  'icap',\n  'im',\n  'imap',\n  'info',\n  'ipp',\n  'iris',\n  'iris.beep',\n  'iris.xpc',\n  'iris.xpcs',\n  'iris.lwz',\n  'ldap',\n  'mailto',\n  'mid',\n  'msrp',\n  'msrps',\n  'mtqp',\n  'mupdate',\n  'news',\n  'nfs',\n  'ni',\n  'nih',\n  'nntp',\n  'opaquelocktoken',\n  'pop',\n  'pres',\n  'rtsp',\n  'service',\n  'session',\n  'shttp',\n  'sieve',\n  'sip',\n  'sips',\n  'sms',\n  'snmp',\n  'soap.beep',\n  'soap.beeps',\n  'tag',\n  'tel',\n  'telnet',\n  'tftp',\n  'thismessage',\n  'tn3270',\n  'tip',\n  'tv',\n  'urn',\n  'vemmi',\n  'ws',\n  'wss',\n  'xcon',\n  'xcon-userid',\n  'xmlrpc.beep',\n  'xmlrpc.beeps',\n  'xmpp',\n  'z39.50r',\n  'z39.50s',\n  'adiumxtra',\n  'afp',\n  'afs',\n  'aim',\n  'apt',\n  'attachment',\n  'aw',\n  'beshare',\n  'bitcoin',\n  'bolo',\n  'callto',\n  'chrome',\n  'chrome-extension',\n  'com-eventbrite-attendee',\n  'content',\n  'cvs',\n  'dlna-playsingle',\n  'dlna-playcontainer',\n  'dtn',\n  'dvb',\n  'ed2k',\n  'facetime',\n  'feed',\n  'finger',\n  'fish',\n  'gg',\n  'git',\n  'gizmoproject',\n  'gtalk',\n  'hcp',\n  'icon',\n  'ipn',\n  'irc',\n  'irc6',\n  'ircs',\n  'itms',\n  'jar',\n  'jms',\n  'keyparc',\n  'lastfm',\n  'ldaps',\n  'magnet',\n  'maps',\n  'market',\n  'message',\n  'mms',\n  'ms-help',\n  'msnim',\n  'mumble',\n  'mvn',\n  'notes',\n  'oid',\n  'palm',\n  'paparazzi',\n  'platform',\n  'proxy',\n  'psyc',\n  'query',\n  'res',\n  'resource',\n  'rmi',\n  'rsync',\n  'rtmp',\n  'secondlife',\n  'sftp',\n  'sgn',\n  'skype',\n  'smb',\n  'soldat',\n  'spotify',\n  'ssh',\n  'steam',\n  'svn',\n  'teamspeak',\n  'things',\n  'udp',\n  'unreal',\n  'ut2004',\n  'ventrilo',\n  'view-source',\n  'webcal',\n  'wtai',\n  'wyciwyg',\n  'xfire',\n  'xri',\n  'ymsgr'\n];\n\n// Process autolinks '<protocol:...>'\n\n\n/*eslint max-len:0*/\nvar EMAIL_RE    = /^<([a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/;\nvar AUTOLINK_RE = /^<([a-zA-Z.\\-]{1,25}):([^<>\\x00-\\x20]*)>/;\n\n\nfunction autolink(state, silent) {\n  var tail, linkMatch, emailMatch, url, fullUrl, pos = state.pos;\n\n  if (state.src.charCodeAt(pos) !== 0x3C/* < */) { return false; }\n\n  tail = state.src.slice(pos);\n\n  if (tail.indexOf('>') < 0) { return false; }\n\n  linkMatch = tail.match(AUTOLINK_RE);\n\n  if (linkMatch) {\n    if (url_schemas.indexOf(linkMatch[1].toLowerCase()) < 0) { return false; }\n\n    url = linkMatch[0].slice(1, -1);\n    fullUrl = normalizeLink(url);\n    if (!state.parser.validateLink(url)) { return false; }\n\n    if (!silent) {\n      state.push({\n        type: 'link_open',\n        href: fullUrl,\n        level: state.level\n      });\n      state.push({\n        type: 'text',\n        content: url,\n        level: state.level + 1\n      });\n      state.push({ type: 'link_close', level: state.level });\n    }\n\n    state.pos += linkMatch[0].length;\n    return true;\n  }\n\n  emailMatch = tail.match(EMAIL_RE);\n\n  if (emailMatch) {\n\n    url = emailMatch[0].slice(1, -1);\n\n    fullUrl = normalizeLink('mailto:' + url);\n    if (!state.parser.validateLink(fullUrl)) { return false; }\n\n    if (!silent) {\n      state.push({\n        type: 'link_open',\n        href: fullUrl,\n        level: state.level\n      });\n      state.push({\n        type: 'text',\n        content: url,\n        level: state.level + 1\n      });\n      state.push({ type: 'link_close', level: state.level });\n    }\n\n    state.pos += emailMatch[0].length;\n    return true;\n  }\n\n  return false;\n}\n\n// Regexps to match html elements\n\nfunction replace$1(regex, options) {\n  regex = regex.source;\n  options = options || '';\n\n  return function self(name, val) {\n    if (!name) {\n      return new RegExp(regex, options);\n    }\n    val = val.source || val;\n    regex = regex.replace(name, val);\n    return self;\n  };\n}\n\n\nvar attr_name     = /[a-zA-Z_:][a-zA-Z0-9:._-]*/;\n\nvar unquoted      = /[^\"'=<>`\\x00-\\x20]+/;\nvar single_quoted = /'[^']*'/;\nvar double_quoted = /\"[^\"]*\"/;\n\n/*eslint no-spaced-func:0*/\nvar attr_value  = replace$1(/(?:unquoted|single_quoted|double_quoted)/)\n                    ('unquoted', unquoted)\n                    ('single_quoted', single_quoted)\n                    ('double_quoted', double_quoted)\n                    ();\n\nvar attribute   = replace$1(/(?:\\s+attr_name(?:\\s*=\\s*attr_value)?)/)\n                    ('attr_name', attr_name)\n                    ('attr_value', attr_value)\n                    ();\n\nvar open_tag    = replace$1(/<[A-Za-z][A-Za-z0-9]*attribute*\\s*\\/?>/)\n                    ('attribute', attribute)\n                    ();\n\nvar close_tag   = /<\\/[A-Za-z][A-Za-z0-9]*\\s*>/;\nvar comment     = /<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->/;\nvar processing  = /<[?].*?[?]>/;\nvar declaration = /<![A-Z]+\\s+[^>]*>/;\nvar cdata       = /<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/;\n\nvar HTML_TAG_RE = replace$1(/^(?:open_tag|close_tag|comment|processing|declaration|cdata)/)\n  ('open_tag', open_tag)\n  ('close_tag', close_tag)\n  ('comment', comment)\n  ('processing', processing)\n  ('declaration', declaration)\n  ('cdata', cdata)\n  ();\n\n// Process html tags\n\n\nfunction isLetter$2(ch) {\n  /*eslint no-bitwise:0*/\n  var lc = ch | 0x20; // to lower case\n  return (lc >= 0x61/* a */) && (lc <= 0x7a/* z */);\n}\n\n\nfunction htmltag(state, silent) {\n  var ch, match, max, pos = state.pos;\n\n  if (!state.options.html) { return false; }\n\n  // Check start\n  max = state.posMax;\n  if (state.src.charCodeAt(pos) !== 0x3C/* < */ ||\n      pos + 2 >= max) {\n    return false;\n  }\n\n  // Quick fail on second char\n  ch = state.src.charCodeAt(pos + 1);\n  if (ch !== 0x21/* ! */ &&\n      ch !== 0x3F/* ? */ &&\n      ch !== 0x2F/* / */ &&\n      !isLetter$2(ch)) {\n    return false;\n  }\n\n  match = state.src.slice(pos).match(HTML_TAG_RE);\n  if (!match) { return false; }\n\n  if (!silent) {\n    state.push({\n      type: 'htmltag',\n      content: state.src.slice(pos, pos + match[0].length),\n      level: state.level\n    });\n  }\n  state.pos += match[0].length;\n  return true;\n}\n\n// Process html entity - &#123;, &#xAF;, &quot;, ...\n\n\nvar DIGITAL_RE = /^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i;\nvar NAMED_RE   = /^&([a-z][a-z0-9]{1,31});/i;\n\n\nfunction entity(state, silent) {\n  var ch, code, match, pos = state.pos, max = state.posMax;\n\n  if (state.src.charCodeAt(pos) !== 0x26/* & */) { return false; }\n\n  if (pos + 1 < max) {\n    ch = state.src.charCodeAt(pos + 1);\n\n    if (ch === 0x23 /* # */) {\n      match = state.src.slice(pos).match(DIGITAL_RE);\n      if (match) {\n        if (!silent) {\n          code = match[1][0].toLowerCase() === 'x' ? parseInt(match[1].slice(1), 16) : parseInt(match[1], 10);\n          state.pending += isValidEntityCode(code) ? fromCodePoint(code) : fromCodePoint(0xFFFD);\n        }\n        state.pos += match[0].length;\n        return true;\n      }\n    } else {\n      match = state.src.slice(pos).match(NAMED_RE);\n      if (match) {\n        var decoded = decodeEntity(match[1]);\n        if (match[1] !== decoded) {\n          if (!silent) { state.pending += decoded; }\n          state.pos += match[0].length;\n          return true;\n        }\n      }\n    }\n  }\n\n  if (!silent) { state.pending += '&'; }\n  state.pos++;\n  return true;\n}\n\n/**\n * Inline Parser `rules`\n */\n\nvar _rules$2 = [\n  [ 'text',            text ],\n  [ 'newline',         newline ],\n  [ 'escape',          escape ],\n  [ 'backticks',       backticks ],\n  [ 'del',             del ],\n  [ 'ins',             ins ],\n  [ 'mark',            mark ],\n  [ 'emphasis',        emphasis ],\n  [ 'sub',             sub ],\n  [ 'sup',             sup ],\n  [ 'links',           links ],\n  [ 'footnote_inline', footnote_inline ],\n  [ 'footnote_ref',    footnote_ref ],\n  [ 'autolink',        autolink ],\n  [ 'htmltag',         htmltag ],\n  [ 'entity',          entity ]\n];\n\n/**\n * Inline Parser class. Note that link validation is stricter\n * in Remarkable than what is specified by CommonMark. If you\n * want to change this you can use a custom validator.\n *\n * @api private\n */\n\nfunction ParserInline() {\n  this.ruler = new Ruler();\n  for (var i = 0; i < _rules$2.length; i++) {\n    this.ruler.push(_rules$2[i][0], _rules$2[i][1]);\n  }\n\n  // Can be overridden with a custom validator\n  this.validateLink = validateLink;\n}\n\n/**\n * Skip a single token by running all rules in validation mode.\n * Returns `true` if any rule reports success.\n *\n * @param  {Object} `state`\n * @api privage\n */\n\nParserInline.prototype.skipToken = function (state) {\n  var rules = this.ruler.getRules('');\n  var len = rules.length;\n  var pos = state.pos;\n  var i, cached_pos;\n\n  if ((cached_pos = state.cacheGet(pos)) > 0) {\n    state.pos = cached_pos;\n    return;\n  }\n\n  for (i = 0; i < len; i++) {\n    if (rules[i](state, true)) {\n      state.cacheSet(pos, state.pos);\n      return;\n    }\n  }\n\n  state.pos++;\n  state.cacheSet(pos, state.pos);\n};\n\n/**\n * Generate tokens for the given input range.\n *\n * @param  {Object} `state`\n * @api private\n */\n\nParserInline.prototype.tokenize = function (state) {\n  var rules = this.ruler.getRules('');\n  var len = rules.length;\n  var end = state.posMax;\n  var ok, i;\n\n  while (state.pos < end) {\n\n    // Try all possible rules.\n    // On success, the rule should:\n    //\n    // - update `state.pos`\n    // - update `state.tokens`\n    // - return true\n    for (i = 0; i < len; i++) {\n      ok = rules[i](state, false);\n\n      if (ok) {\n        break;\n      }\n    }\n\n    if (ok) {\n      if (state.pos >= end) { break; }\n      continue;\n    }\n\n    state.pending += state.src[state.pos++];\n  }\n\n  if (state.pending) {\n    state.pushPending();\n  }\n};\n\n/**\n * Parse the given input string.\n *\n * @param  {String} `str`\n * @param  {Object} `options`\n * @param  {Object} `env`\n * @param  {Array} `outTokens`\n * @api private\n */\n\nParserInline.prototype.parse = function (str, options, env, outTokens) {\n  var state = new StateInline(str, this, options, env, outTokens);\n  this.tokenize(state);\n};\n\n/**\n * Validate the given `url` by checking for bad protocols.\n *\n * @param  {String} `url`\n * @return {Boolean}\n */\n\nfunction validateLink(url) {\n  var BAD_PROTOCOLS = [ 'vbscript', 'javascript', 'file', 'data' ];\n  var str = url.trim().toLowerCase();\n  // Care about digital entities \"javascript&#x3A;alert(1)\"\n  str = replaceEntities(str);\n  if (str.indexOf(':') !== -1 && BAD_PROTOCOLS.indexOf(str.split(':')[0]) !== -1) {\n    return false;\n  }\n  return true;\n}\n\n// Remarkable default options\n\nvar defaultConfig = {\n  options: {\n    html:         false,        // Enable HTML tags in source\n    xhtmlOut:     false,        // Use '/' to close single tags (<br />)\n    breaks:       false,        // Convert '\\n' in paragraphs into <br>\n    langPrefix:   'language-',  // CSS language prefix for fenced blocks\n    linkTarget:   '',           // set target to open link in\n\n    // Enable some language-neutral replacements + quotes beautification\n    typographer:  false,\n\n    // Double + single quotes replacement pairs, when typographer enabled,\n    // and smartquotes on. Set doubles to '\u00AB\u00BB' for Russian, '\u201E\u201C' for German.\n    quotes: '\u201C\u201D\u2018\u2019',\n\n    // Highlighter function. Should return escaped HTML,\n    // or '' if input not changed\n    //\n    // function (/*str, lang*/) { return ''; }\n    //\n    highlight: null,\n\n    maxNesting:   20            // Internal protection, recursion limit\n  },\n\n  components: {\n\n    core: {\n      rules: [\n        'block',\n        'inline',\n        'references',\n        'replacements',\n        'smartquotes',\n        'references',\n        'abbr2',\n        'footnote_tail'\n      ]\n    },\n\n    block: {\n      rules: [\n        'blockquote',\n        'code',\n        'fences',\n        'footnote',\n        'heading',\n        'hr',\n        'htmlblock',\n        'lheading',\n        'list',\n        'paragraph',\n        'table'\n      ]\n    },\n\n    inline: {\n      rules: [\n        'autolink',\n        'backticks',\n        'del',\n        'emphasis',\n        'entity',\n        'escape',\n        'footnote_ref',\n        'htmltag',\n        'links',\n        'newline',\n        'text'\n      ]\n    }\n  }\n};\n\n// Remarkable default options\n\nvar fullConfig = {\n  options: {\n    html:         false,        // Enable HTML tags in source\n    xhtmlOut:     false,        // Use '/' to close single tags (<br />)\n    breaks:       false,        // Convert '\\n' in paragraphs into <br>\n    langPrefix:   'language-',  // CSS language prefix for fenced blocks\n    linkTarget:   '',           // set target to open link in\n\n    // Enable some language-neutral replacements + quotes beautification\n    typographer:  false,\n\n    // Double + single quotes replacement pairs, when typographer enabled,\n    // and smartquotes on. Set doubles to '\u00AB\u00BB' for Russian, '\u201E\u201C' for German.\n    quotes:       '\u201C\u201D\u2018\u2019',\n\n    // Highlighter function. Should return escaped HTML,\n    // or '' if input not changed\n    //\n    // function (/*str, lang*/) { return ''; }\n    //\n    highlight:     null,\n\n    maxNesting:    20            // Internal protection, recursion limit\n  },\n\n  components: {\n    // Don't restrict core/block/inline rules\n    core: {},\n    block: {},\n    inline: {}\n  }\n};\n\n// Commonmark default options\n\nvar commonmarkConfig = {\n  options: {\n    html:         true,         // Enable HTML tags in source\n    xhtmlOut:     true,         // Use '/' to close single tags (<br />)\n    breaks:       false,        // Convert '\\n' in paragraphs into <br>\n    langPrefix:   'language-',  // CSS language prefix for fenced blocks\n    linkTarget:   '',           // set target to open link in\n\n    // Enable some language-neutral replacements + quotes beautification\n    typographer:  false,\n\n    // Double + single quotes replacement pairs, when typographer enabled,\n    // and smartquotes on. Set doubles to '\u00AB\u00BB' for Russian, '\u201E\u201C' for German.\n    quotes: '\u201C\u201D\u2018\u2019',\n\n    // Highlighter function. Should return escaped HTML,\n    // or '' if input not changed\n    //\n    // function (/*str, lang*/) { return ''; }\n    //\n    highlight: null,\n\n    maxNesting:   20            // Internal protection, recursion limit\n  },\n\n  components: {\n\n    core: {\n      rules: [\n        'block',\n        'inline',\n        'references',\n        'abbr2'\n      ]\n    },\n\n    block: {\n      rules: [\n        'blockquote',\n        'code',\n        'fences',\n        'heading',\n        'hr',\n        'htmlblock',\n        'lheading',\n        'list',\n        'paragraph'\n      ]\n    },\n\n    inline: {\n      rules: [\n        'autolink',\n        'backticks',\n        'emphasis',\n        'entity',\n        'escape',\n        'htmltag',\n        'links',\n        'newline',\n        'text'\n      ]\n    }\n  }\n};\n\n/**\n * Preset configs\n */\n\nvar config = {\n  'default': defaultConfig,\n  'full': fullConfig,\n  'commonmark': commonmarkConfig\n};\n\n/**\n * The `StateCore` class manages state.\n *\n * @param {Object} `instance` Remarkable instance\n * @param {String} `str` Markdown string\n * @param {Object} `env`\n */\n\nfunction StateCore(instance, str, env) {\n  this.src = str;\n  this.env = env;\n  this.options = instance.options;\n  this.tokens = [];\n  this.inlineMode = false;\n\n  this.inline = instance.inline;\n  this.block = instance.block;\n  this.renderer = instance.renderer;\n  this.typographer = instance.typographer;\n}\n\n/**\n * The main `Remarkable` class. Create an instance of\n * `Remarkable` with a `preset` and/or `options`.\n *\n * @param {String} `preset` If no preset is given, `default` is used.\n * @param {Object} `options`\n */\n\nfunction Remarkable(preset, options) {\n  if (typeof preset !== 'string') {\n    options = preset;\n    preset = 'default';\n  }\n\n  if (options && options.linkify != null) {\n    console.warn(\n      'linkify option is removed. Use linkify plugin instead:\\n\\n' +\n      'import Remarkable from \\'remarkable\\';\\n' +\n      'import linkify from \\'remarkable/linkify\\';\\n' +\n      'new Remarkable().use(linkify)\\n'\n    );\n  }\n\n  this.inline   = new ParserInline();\n  this.block    = new ParserBlock();\n  this.core     = new Core();\n  this.renderer = new Renderer();\n  this.ruler    = new Ruler();\n\n  this.options  = {};\n  this.configure(config[preset]);\n  this.set(options || {});\n}\n\n/**\n * Set options as an alternative to passing them\n * to the constructor.\n *\n * ```js\n * md.set({typographer: true});\n * ```\n * @param {Object} `options`\n * @api public\n */\n\nRemarkable.prototype.set = function (options) {\n  assign(this.options, options);\n};\n\n/**\n * Batch loader for components rules states, and options\n *\n * @param  {Object} `presets`\n */\n\nRemarkable.prototype.configure = function (presets) {\n  var self = this;\n\n  if (!presets) { throw new Error('Wrong `remarkable` preset, check name/content'); }\n  if (presets.options) { self.set(presets.options); }\n  if (presets.components) {\n    Object.keys(presets.components).forEach(function (name) {\n      if (presets.components[name].rules) {\n        self[name].ruler.enable(presets.components[name].rules, true);\n      }\n    });\n  }\n};\n\n/**\n * Use a plugin.\n *\n * ```js\n * var md = new Remarkable();\n *\n * md.use(plugin1)\n *   .use(plugin2, opts)\n *   .use(plugin3);\n * ```\n *\n * @param  {Function} `plugin`\n * @param  {Object} `options`\n * @return {Object} `Remarkable` for chaining\n */\n\nRemarkable.prototype.use = function (plugin, options) {\n  plugin(this, options);\n  return this;\n};\n\n\n/**\n * Parse the input `string` and return a tokens array.\n * Modifies `env` with definitions data.\n *\n * @param  {String} `string`\n * @param  {Object} `env`\n * @return {Array} Array of tokens\n */\n\nRemarkable.prototype.parse = function (str, env) {\n  var state = new StateCore(this, str, env);\n  this.core.process(state);\n  return state.tokens;\n};\n\n/**\n * The main `.render()` method that does all the magic :)\n *\n * @param  {String} `string`\n * @param  {Object} `env`\n * @return {String} Rendered HTML.\n */\n\nRemarkable.prototype.render = function (str, env) {\n  env = env || {};\n  return this.renderer.render(this.parse(str, env), this.options, env);\n};\n\n/**\n * Parse the given content `string` as a single string.\n *\n * @param  {String} `string`\n * @param  {Object} `env`\n * @return {Array} Array of tokens\n */\n\nRemarkable.prototype.parseInline = function (str, env) {\n  var state = new StateCore(this, str, env);\n  state.inlineMode = true;\n  this.core.process(state);\n  return state.tokens;\n};\n\n/**\n * Render a single content `string`, without wrapping it\n * to paragraphs\n *\n * @param  {String} `str`\n * @param  {Object} `env`\n * @return {String}\n */\n\nRemarkable.prototype.renderInline = function (str, env) {\n  env = env || {};\n  return this.renderer.render(this.parseInline(str, env), this.options, env);\n};\n\nexport { Remarkable, utils };\n", "// page.js controls the spa flow. It technically has 3 files into it, page.js, parser.js and search.js\r\n// This is done because, while other spa may do similar things to keep filesize low, our build system is done considering multiple pages\r\n// TODO - Maybe there is a proper way to do this based on the HTML file. For now, this is pretty light.\r\n// TODO -   for top performance, the parser would only be loaded once you click the search or a game... how to do that?\r\n\r\n// ---------\r\n// CTRL+F parser.js and search.js for the start of their sections. The following is for page.js\r\n// It includes two functions that most files also use:\r\n//   - updatePage() : reloads most things after a page change.\r\n//   - addPageChangeEvent() : treats redirections.\r\n// This makes the page responsive, but can make the code a bit messy. Not sure what would the best fix.\r\n\r\nimport { loadTooltip, unloadTooltip } from \"./tooltip.js\";\r\n/*\r\nimport { parseGFM } from \"./parser.js\";\r\nimport {\r\n  fillSearch,\r\n  clearFunction,\r\n  filterFunction,\r\n  revealID,\r\n  enableSmoothTOC,\r\n} from \"./search.js\";\r\n*/\r\nimport {\r\n  collapseHeadings,\r\n  collapseHeadingStyle,\r\n  sortTables,\r\n  treatSpoilers,\r\n  styleImages,\r\n  h2Collection,\r\n  dragScrollElement,\r\n} from \"./style.js\";\r\n\r\nvar currentSection = null;\r\nvar currentDocument = null;\r\nvar inTechPage = false;\r\n\r\n// TODO - DISABLE SOURCEMAPS before setting up hosting.\r\n\r\nfunction pageInit() {\r\n  // Fill search elements\r\n  // Add page change events to nav-bar (requires search bar to be filled)\r\n  document\r\n    .querySelectorAll(\r\n      \"div#nav-bar__title, p.footer-container__help--links, a.nav-bar__search--results\"\r\n    )\r\n    .forEach((item) => {\r\n      addPageChangeEvent(item);\r\n    });\r\n\r\n  let searchLogo = document.querySelector(\"#nav-bar__search--icon\");\r\n  searchLogo.addEventListener(\"click\", searchBoxListener);\r\n  searchLogo.targetParam = \"search\";\r\n\r\n  let gamesLogo = document.querySelector(\"#nav-bar__games--icon\");\r\n  gamesLogo.addEventListener(\"click\", searchBoxListener);\r\n  gamesLogo.targetParam = \"games\";\r\n\r\n  // Update page (done after content changes)\r\n  updatePage();\r\n}\r\n\r\nif (document.readyState !== \"loading\") {\r\n  pageInit(); // Or setTimeout(pageInit, 0);\r\n} else {\r\n  document.addEventListener(\"DOMContentLoaded\", pageInit);\r\n}\r\n\r\n// --- Generic actions every time the page is updated\r\nexport function updatePage() {\r\n  // Create TOC\r\n  createTOC();\r\n  // Enable smooth scroll on hash links\r\n  enableSmoothTOC();\r\n  // Treat custom directives\r\n  compileTags();\r\n  sortTables();\r\n  treatSpoilers();\r\n  styleImages();\r\n}\r\n\r\nfunction compileH2s() {\r\n  // Add events to selector tab\r\n  document.querySelectorAll(\".content__selectorbox--item\").forEach((selectorBox) => {\r\n    selectorBox.style.setProperty('--highlight-color', selectorBox.dataset.highlight);\r\n    selectorBox.addEventListener(\"click\", (event) => {\r\n      // iterate every selectorbox--item\r\n      // -- remove selected status from other elements\r\n      document.querySelectorAll(\".content__selectorbox--item\").forEach((selectorBox) => {\r\n        selectorBox.className = \"content__selectorbox--item\";\r\n      });\r\n      // add selected status to the clicked selectorbox--item\r\n      event.currentTarget.className = \"content__selectorbox--item selected\";\r\n      // replace content_currenth2 with data from h2Collectio[x][3]\r\n      // select the h2Collection based on the current selectorBox.dataset.open\r\n      let currentCollection = h2Collection.filter((h2) => h2[0] == event.currentTarget.dataset.open);\r\n      document.getElementById(\"content__currenth2\").innerHTML = currentCollection[0][2];\r\n\r\n      // Adds click events for the buttons\r\n      document.querySelectorAll(\".content__collapse\").forEach((button) => {\r\n        button.addEventListener(\"click\", collapseHeadingStyle);\r\n      });\r\n      updatePage();\r\n      highlightTOC();\r\n    });\r\n  });\r\n\r\n  // Opens first H2\r\n  document.querySelectorAll(\".content__selectorbox--item\")[0].click();\r\n}\r\n\r\n// --- Function related to tagging behaviour\r\nfunction compileTags() {\r\n  //Iterator over every element that needs tagging\r\n  document.querySelectorAll(\".tagging, .tagging-text\").forEach((taggedElement) => {\r\n    //Get tags from the first child (first heading), which are saved as JSON\r\n    let tagTextData = taggedElement.dataset.tags;\r\n    let tagData = JSON.parse(tagTextData.replace(/'/g, '\"'));\r\n\r\n    if (tagData.todo) {\r\n      //If it has a todo tag, add an icon with a tooltip.\r\n      let todoTag = document.createElement(\"span\");\r\n      todoTag.className = \"material-symbols-rounded\";\r\n      todoTag.style.color = \"goldenrod\";\r\n      todoTag.style.marginRight = \"15px\";\r\n      todoTag.style.cursor = \"help\";\r\n      todoTag.textContent = \"error_outline\";\r\n      taggedElement.appendChild(todoTag);\r\n      todoTag.addEventListener(\"mouseover\", () => {\r\n        loadTooltip(\r\n          todoTag,\r\n          \"This section needs work, is not confirmed or needs testing.\"\r\n        );\r\n      });\r\n      todoTag.addEventListener(\"mouseleave\", () => {\r\n        unloadTooltip(todoTag);\r\n      });\r\n    }\r\n\r\n    if (tagData.versions) {\r\n      //If it has a version tag, add an icon with a tooltip which contains the value of the tag.\r\n      let versionText = \"Versions: \";\r\n      versionText = versionText.concat(tagData.versions);\r\n      versionText = versionText.concat(\".\");\r\n      let versionTag = document.createElement(\"span\");\r\n      versionTag.className = \"material-symbols-rounded\";\r\n      versionTag.style.marginRight = \"15px\";\r\n      versionTag.style.cursor = \"help\";\r\n      versionTag.textContent = \"devices\";\r\n      taggedElement.appendChild(versionTag);\r\n      versionTag.addEventListener(\"mouseover\", () => {\r\n        loadTooltip(versionTag, versionText);\r\n      });\r\n      versionTag.addEventListener(\"mouseleave\", () => {\r\n        unloadTooltip(versionTag);\r\n      });\r\n    }\r\n\r\n    if (tagData.media) {\r\n      //If it has a media tag, check if it is forced on the page or not.\r\n      if (tagData.forcedvideo) {\r\n        //If yes, add it just below the paragraph/heading.\r\n        let mediaTag = document.createElement(\"video\");\r\n        mediaTag.width = \"640\";\r\n        mediaTag.height = \"480\";\r\n        mediaTag.preload = \"metadata\";\r\n        mediaTag.style.order = 2;\r\n        mediaTag.style.width = \"80%\";\r\n        mediaTag.style.outline = \"none\";\r\n        mediaTag.controls = true;\r\n        mediaTag.muted = true;\r\n        mediaTag.loop = true;\r\n        let sourceVideo = document.createElement(\"source\");\r\n        sourceVideo.src = tagData.media;\r\n        sourceVideo.type = \"video/mp4\";\r\n        mediaTag.appendChild(sourceVideo);\r\n        taggedElement.appendChild(mediaTag);\r\n      } else {\r\n        //If no, display an icon that can create the video once clicked.\r\n        let mediaTag = document.createElement(\"span\");\r\n        mediaTag.dataset.media = tagData.media;\r\n        mediaTag.className = \"material-symbols-rounded\";\r\n        mediaTag.style.marginRight = \"15px\";\r\n        mediaTag.style.cursor = \"pointer\";\r\n        mediaTag.textContent = \"play_circle\";\r\n        taggedElement.appendChild(mediaTag);\r\n        mediaTag.addEventListener(\"click\", (mediaIcon) => {\r\n          let videoSibling = mediaIcon.target.nextSibling;\r\n          if (videoSibling == null) {\r\n            let hiddenMedia = document.createElement(\"video\");\r\n            hiddenMedia.width = \"640\";\r\n            hiddenMedia.height = \"480\";\r\n            hiddenMedia.preload = \"metadata\";\r\n            hiddenMedia.style.order = 2;\r\n            hiddenMedia.style.width = \"80%\";\r\n            hiddenMedia.style.outline = \"none\";\r\n            hiddenMedia.controls = true;\r\n            hiddenMedia.muted = true;\r\n            hiddenMedia.loop = true;\r\n            let sourceVideo = document.createElement(\"source\");\r\n            sourceVideo.src = mediaIcon.target.dataset.media;\r\n            sourceVideo.type = \"video/mp4\";\r\n            hiddenMedia.appendChild(sourceVideo);\r\n            mediaIcon.target.parentNode.appendChild(hiddenMedia);\r\n          } else {\r\n            videoSibling.remove();\r\n          }\r\n        });\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nfunction changeEvent(event){\r\n  // Variables to cosmetic modifications on the page\r\n  let i, tabContent, tabLinks;\r\n\r\n  // Get all elements with class=\"nav-bar__tab-bar--content\" and hide them\r\n  tabContent = document.getElementsByClassName(\"nav-bar__tab-bar--content\");\r\n  for (i = 0; i < tabContent.length; i++) {\r\n    tabContent[i].style.display = \"none\";\r\n  }\r\n\r\n  // Get all elements with class=\"nav-bar__tab-bar--links\" and remove the class \"active\"\r\n  tabLinks = document.getElementsByClassName(\"nav-bar__tab-bar--links\");\r\n  for (i = 0; i < tabLinks.length; i++) {\r\n    tabLinks[i].className = tabLinks[i].className.replace(\" active\", \"\");\r\n  }\r\n\r\n  // Show the current tab, and add an \"active\" class to the button that opened the tab;\r\n  if (\r\n    !(\r\n      event.currentTarget.dataset.document == \"HOME\" ||\r\n      event.currentTarget.dataset.document.includes(\"./\")\r\n    )\r\n  ) {\r\n    for (i = 0; i < tabLinks.length; i++) {\r\n      if (\r\n        tabLinks[i].dataset.document == event.currentTarget.dataset.document\r\n      ) {\r\n        tabLinks[i].className += \" active\";\r\n      }\r\n    }\r\n  }\r\n\r\n  // Get the section and content elements to change the document presented on the page\r\n  let sectionText = document.getElementById(\"section-container__text\");\r\n  let contentText = document.getElementById(\"content\");\r\n\r\n  if (event.currentTarget.dataset.document == \"HOME\") {\r\n    //If the event is tagged as \"HOME\" (nav-bar logo redirect)\r\n    headings = [];\r\n    currentSection = \"HOME\";\r\n    currentDocument = \"HOME\";\r\n    // Removes #content__tocicon if it exists (will be created again for the current page if needed)\r\n    let tocIcon = document.getElementById(\"content__tocicon\");\r\n    if (tocIcon != null) {\r\n      tocIcon.remove();\r\n    }\r\n    // TODO - loadHome?();\r\n    contentText.innerHTML = \"UNDER CONSTRUCTION\";\r\n    sectionText.innerHTML = \"HOME\"\r\n    inTechPage = false;\r\n    document.querySelector(\"#nav-bar\").scrollIntoView({\r\n      behavior: \"smooth\",\r\n    });\r\n  } else {\r\n    //Continuous page view\r\n    if (event.currentTarget.dataset.document.includes(\"./\")) {\r\n      headings = [];\r\n      // Removes #content__tocicon if it exists (will be created again for the current page if needed)\r\n      let tocIcon = document.getElementById(\"content__tocicon\");\r\n      if (tocIcon != null) {\r\n        tocIcon.remove();\r\n      }\r\n      inTechPage = false;\r\n      currentSection = event.currentTarget.dataset.section;\r\n      currentDocument = event.currentTarget.dataset.document;\r\n      sectionText.innerHTML = event.currentTarget.dataset.section;\r\n      parseGFM(event.currentTarget.dataset.document).then((page) => {\r\n        contentText.innerHTML = page;\r\n        //Update page & Clear search results\r\n        updatePage();\r\n        clearFunction();\r\n        document.querySelector(\"#nav-bar\").scrollIntoView({\r\n          behavior: \"smooth\",\r\n        });\r\n      });\r\n    } else {\r\n      //Event is a tech document, set the section as the game name and update the content\r\n      inTechPage = true;\r\n      sectionText.innerHTML = event.currentTarget.dataset.section;\r\n      let pastDocument = currentDocument;\r\n      currentSection = event.currentTarget.dataset.section;\r\n      currentDocument = event.currentTarget.dataset.document;\r\n      let currentDataset = event.currentTarget.dataset;\r\n      if (currentDocument == pastDocument) {\r\n        // Just redirect\r\n        clearFunction();\r\n        if (currentDataset.redirect != null) {\r\n          //Event has a redirect location, collapse the headings if needed\r\n          revealID(currentDataset.redirect.substring(1));\r\n          document.querySelector(currentDataset.redirect).scrollIntoView({\r\n            behavior: \"smooth\",\r\n          });\r\n        } else {\r\n          //No redirect location, scroll to top\r\n          document.querySelector(\"#nav-bar\").scrollIntoView({\r\n            behavior: \"smooth\",\r\n          });\r\n        }\r\n      } else {\r\n        headings = [];\r\n        // Removes #content__tocicon if it exists (will be created again for the current page if needed)\r\n        let tocIcon = document.getElementById(\"content__tocicon\");\r\n        if (tocIcon != null) {\r\n          tocIcon.remove();\r\n        }\r\n        parseGFM(\r\n          (\"./tech/\" + event.currentTarget.dataset.document).toLowerCase()\r\n        ).then((page) => {\r\n          // TODO - Add a loading icon here?\r\n          // content is hidden until collapseHeadings is finished -- the function itself changes it back\r\n          //   that function adds a selection menu and TOC to the page\r\n          contentText.style.visibility = \"hidden\";\r\n          contentText.innerHTML = page;\r\n          collapseHeadings(contentText);\r\n          //Update page & Clear search results\r\n          compileH2s();\r\n          //updatePage(); compileH2s has an updatePage() call already.\r\n          clearFunction();\r\n          if (currentDataset.redirect != null) {\r\n            //Event has a redirect location, collapse the headings if needed\r\n            revealID(currentDataset.redirect.substring(1));\r\n            document.querySelector(currentDataset.redirect).scrollIntoView({\r\n              behavior: \"smooth\",\r\n            });\r\n          } else {\r\n            //No redirect location, scroll to top\r\n            document.querySelector(\"#nav-bar\").scrollIntoView({\r\n              behavior: \"smooth\",\r\n            });\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// --- Function for click events on the nav-bar\r\nexport function addPageChangeEvent(item) {\r\n  // Remove the previous event if one exist. This is a bandaid fix fo the fillSearch function.\r\n  item.removeEventListener(\"click\", changeEvent);\r\n  item.addEventListener(\"click\", changeEvent);\r\n}\r\n\r\n// ---------\r\n// parser.js is an async markdown-to-html parser.\r\n\r\nimport { Remarkable } from 'remarkable'; // This is where the bulk of the filesize comes from\r\n\r\nvar md = new Remarkable('full', {\r\n  html: true,\r\n  typographer: false,\r\n});\r\n\r\nconst openEmRenderer = md.renderer.rules.em_open;\r\nconst closeEmRenderer = md.renderer.rules.em_close;\r\n//const openHeadingRenderer = md.renderer.rules.heading_open;  // Headings are always modified\r\nconst closeHeadingRenderer = md.renderer.rules.heading_close;\r\n\r\nvar injectedHeading = false;\r\nvar injectedEm = false;\r\n\r\nvar tagMap = {\r\n  \"r\": \"red\",\r\n  \"b\": \"blue\",\r\n  \"g\": \"green\",\r\n  \"y\": \"yellow\",\r\n  \"p\": \"pink\",\r\n  \"t\": \"teal\",\r\n  \"!\": \"spoiler\"\r\n};\r\n\r\n// https://www.npmjs.com/package/remarkable-youtube\r\n//     When video sources are from Youtube?\r\n\r\nmd.renderer.rules.heading_open = function(tokens, idx, options, env) {\r\n  if (tokens[idx+1].content[0] == ':') {\r\n    injectedHeading = true;\r\n    // Inject a span depending on the category\r\n    if (tokens[idx+1].content[1] == '{') {\r\n      // parseJsonTag modifies tokens, so baseReturn should be recalculated.\r\n      let spanReturn = parseJsonTag(tokens, idx);\r\n      let baseReturn = '<h' + tokens[idx].hLevel + ' id=\"' + tokens[idx+1].content.replace(/\\s+/g, '-').toLowerCase() + '\">';\r\n      return spanReturn + baseReturn;\r\n    }\r\n  } else {\r\n    let baseReturn = '<h' + tokens[idx].hLevel + ' id=\"' + tokens[idx+1].content.replace(/\\s+/g, '-').toLowerCase() + '\">';\r\n    return baseReturn;\r\n  }\r\n};\r\n\r\nmd.renderer.rules.em_open = function(tokens, idx, options, env) {\r\n  return parseTags(tokens, idx, options, env, openEmRenderer);\r\n};\r\n\r\nmd.renderer.rules.heading_close = function(tokens, idx, options, env) {\r\n  if (injectedHeading) {\r\n    injectedHeading = false;\r\n    let headingEnd = closeHeadingRenderer(tokens, idx, options, env);\r\n    // Change new line position on styling will mess up\r\n    return headingEnd.concat(\"</span>\").replace(/\\n/g, ' ') + \"\\n\";\r\n  } else {\r\n    return closeHeadingRenderer(tokens, idx, options, env);\r\n  }\r\n};\r\n\r\nmd.renderer.rules.em_close = function(tokens, idx, options, env) {\r\n  if (injectedEm) {\r\n    injectedEm = false;\r\n    return '</span>';\r\n  } else {\r\n    return closeEmRenderer(tokens, idx, options, env);\r\n  }\r\n};\r\n\r\nfunction parseTags(tokens, idx, options, env, fallback) {\r\n  // Check if first token is a :\r\n  //   if yes, apply changes\r\n  //   if not, use default handler\r\n  if (tokens[idx+1].type == \"text\") {\r\n    if (tokens[idx+1].content[0] == ':') {\r\n      injectedEm = true;\r\n      // Inject a span depending on the category\r\n      if (tokens[idx+1].content[1] == '{') {\r\n        return parseJsonTag(tokens, idx);\r\n      } else {\r\n        let tagToken = tokens[idx+1].content[1];\r\n        tokens[idx+1].content = tokens[idx+1].content.slice(2);\r\n        return '<span class=\"' + tagMap[tagToken] + '\">';\r\n      }\r\n    } else {\r\n      return fallback(tokens, idx, options, env);\r\n    }\r\n  } else {\r\n    return fallback(tokens, idx, options, env);\r\n  }\r\n}\r\n\r\nfunction parseJsonTag(tokens, idx) {\r\n  // Find index of closing bracket\r\n  let endingIndex = tokens[idx+1].content.indexOf('}');\r\n  let jsonTag = tokens[idx+1].content.substring(1, endingIndex + 1);\r\n  tokens[idx+1].content = tokens[idx+1].content.slice(endingIndex + 2);\r\n  // Inline segments don't change if you only change their content\r\n  if (tokens[idx+1].type == \"inline\") {\r\n    tokens[idx+1].children[0].content = tokens[idx+1].content;\r\n  }\r\n  let classOp = \"tagging\";\r\n  if (tokens[idx].type == \"em_open\") {\r\n    classOp = \"tagging-text\";\r\n  }\r\n  return '<span class=\"'+ classOp +'\" data-tags=\"' + jsonTag + '\">';\r\n}\r\n\r\n// --- Functions related to file parsing\r\nfunction loadFile(filePath) {\r\n  return new Promise(function (resolve, reject) {\r\n    let xhr = new XMLHttpRequest();\r\n    xhr.open(\"GET\", filePath, true);\r\n    xhr.onload = function () {\r\n      if (this.status >= 200 && this.status < 300) {\r\n        resolve(xhr.response);\r\n      } else {\r\n        reject({\r\n          status: this.status,\r\n          statusText: xhr.statusText,\r\n        });\r\n      }\r\n    };\r\n    xhr.onerror = function () {\r\n      reject({\r\n        status: this.status,\r\n        statusText: xhr.statusText,\r\n      });\r\n    };\r\n    xhr.send();\r\n  });\r\n}\r\n\r\nexport async function parseGFM(file) {\r\n  //Read GFM file\r\n  let fileData = await loadFile(file + \".md\");\r\n  if (fileData.length <= 1 || fileData == null) {\r\n    return \"\";\r\n  }\r\n  let content = \"\";\r\n  //Return the HTML data\r\n  content = md.render(fileData);\r\n  return content;\r\n}\r\n\r\n// ---------\r\n// search.js controls the search box and also redirects to search links (includes ToC).\r\n\r\n//import { parseGFM } from \"./parser.js\";\r\n//import { addPageChangeEvent } from \"./page.js\";\r\n\r\n// -- Function for search on the nav-bar\r\n\r\nvar navLock = false;\r\nvar currentActiveSearch = null;\r\n\r\n// Listener that adds games to both tabs.\r\nfunction searchBoxListener() {\r\n  if (navLock) {\r\n    return;\r\n  }\r\n  let type = event.currentTarget.targetParam;\r\n  currentActiveSearch = type;\r\n  if (type == \"search\") {\r\n    injectSearchBox(\"#nav-bar__search\");\r\n  } else {\r\n    injectSearchBox(\"#nav-bar__games\");\r\n  }\r\n  let searchCount = document.querySelector(\".nav-bar__search--results\");\r\n  if (searchCount == null) {\r\n    fillSearch();\r\n  }\r\n  if (type == \"games\") {\r\n    let gamesBox = document.querySelector(\"#nav-bar__gamesbox\");\r\n    let children = gamesBox.children;\r\n    for (elem of children) {\r\n      elem.style.display = \"inline-block\";\r\n    }\r\n    // TODO : check fillsearch function. Remove the following two lines when done\r\n    document.querySelector(\"#nav-bar__games--hr2D\").style.display = \"none\";\r\n    document.querySelector(\"#nav-bar__games--hr3D\").style.display = \"none\";\r\n  }\r\n}\r\n\r\nfunction injectSearchBox(id) {\r\n  if (navLock) {\r\n    return;\r\n  }\r\n  let searchIcon = document.querySelector(id);\r\n  searchIcon.removeEventListener(\"click\", searchBoxListener);\r\n\r\n  var baseName = id + \"box\";\r\n  var inputName = id + \"--input\";\r\n  var logoName = id + \"--icon\";\r\n  var base = document.querySelector(baseName);\r\n  var inputField = document.querySelector(inputName);\r\n  // If NULL, create both boxes and create correct reference for base\r\n  if (base == null) {\r\n    let searchBase = document.createElement(\"div\");\r\n    let gamesBase = document.createElement(\"div\");\r\n    searchBase.id = \"nav-bar__searchbox\";\r\n    gamesBase.id = \"nav-bar__gamesbox\";\r\n    searchBase.style.width = \"0px\";\r\n    gamesBase.style.width = \"0px\";\r\n    gamesBase.tabIndex = \"0\";\r\n\r\n    let searchInputField = document.createElement(\"input\");\r\n    searchInputField.id = \"nav-bar__search--input\";\r\n    searchBase.appendChild(searchInputField);\r\n\r\n    let searchIconInst = document.querySelector(\"#nav-bar__search\");\r\n    searchIconInst.appendChild(searchBase);\r\n    let gamesIconInst = document.querySelector(\"#nav-bar__games\");\r\n    gamesIconInst.appendChild(gamesBase);\r\n    searchInputField.addEventListener(\"keyup\", filterFunction);\r\n    searchInputField.addEventListener(\"focusout\", (event) => {\r\n      let searchField = document.querySelector(\"#nav-bar__search\");\r\n      event.stopPropagation();\r\n      if (!(searchField.contains(event.relatedTarget))) {\r\n        clearFunction();\r\n      }\r\n    });\r\n    gamesBase.addEventListener(\"focusout\", (event) => {\r\n      let searchField = document.querySelector(\"#nav-bar__games\");\r\n      event.stopPropagation();\r\n      if (!(searchField.contains(event.relatedTarget))) {\r\n        clearFunction();\r\n      }\r\n    });\r\n    inputField = searchInputField;\r\n  }\r\n\r\n  base = document.querySelector(baseName);\r\n\r\n  var searchboxWidth = 220;\r\n  if (currentActiveSearch == \"search\"){\r\n    if (document.body.clientWidth >= 480) {\r\n      searchboxWidth = 360;\r\n    }\r\n  } else {\r\n    searchboxWidth = 300;\r\n  }\r\n  base.style.width = searchboxWidth + \"px\";\r\n\r\n  let searchLogo = document.querySelector(logoName);\r\n  searchLogo.className = \"material-symbols-rounded logo-fadeout\";\r\n  searchLogo.removeEventListener(\"click\", searchBoxListener);\r\n  searchLogo.addEventListener(\"click\", clearFunction);\r\n\r\n  if (currentActiveSearch == \"search\"){\r\n    inputField = document.querySelector(inputName);\r\n    inputField.focus();\r\n  } else {\r\n    base.focus();\r\n  }\r\n\r\n  base.className = \"fadein\";\r\n}\r\n\r\n\r\nexport function clearFunction() {\r\n  if (currentActiveSearch == null){\r\n    return;\r\n  }\r\n  var a, i;\r\n  // Function to hide all computed links\r\n  var searchBox = document.querySelector(\"#nav-bar__searchbox\");\r\n  var gamesBox = document.querySelector(\"#nav-bar__gamesbox\");\r\n  if (searchBox == null || gamesBox == null) {\r\n    return;\r\n  }\r\n\r\n  navLock = true;\r\n  var referenceBox = null;\r\n  currentActiveSearch == \"search\" ? referenceBox = searchBox : referenceBox = gamesBox;\r\n  let referenceId = \"#nav-bar__\" + currentActiveSearch;\r\n\r\n  if (currentActiveSearch == \"search\"){\r\n    a = referenceBox.getElementsByTagName(\"a\");\r\n    for (i = 0; i < a.length; i++) {\r\n      a[i].style.display = \"none\";\r\n    }\r\n    document.querySelector(referenceId + \"--hr\").style.display = \"none\";\r\n  } else {\r\n    figs = referenceBox.getElementsByTagName(\"figure\");\r\n    for (i = 0; i < figs.length; i++) {\r\n      figs[i].style.display = \"none\";\r\n    }\r\n    document.querySelector(referenceId + \"--hr2D\").style.display = \"none\";\r\n    document.querySelector(referenceId + \"--hr3D\").style.display = \"none\";\r\n  }\r\n\r\n  var searchLogo = document.querySelector(referenceId + \"--icon\");\r\n  searchLogo.className = \"material-symbols-rounded logo-fadein\";\r\n  searchLogo.removeEventListener(\"click\", clearFunction);\r\n  searchLogo.addEventListener(\"click\", searchBoxListener);\r\n\r\n\r\n  if (currentActiveSearch == \"search\") {\r\n    searchLogo.targetParam = \"search\";\r\n    setTimeout(() => {\r\n      searchBox.className = \"fadeout\";\r\n      navLock = false;\r\n    }, \"300\");\r\n  } else {\r\n    searchLogo.targetParam = \"games\";\r\n    setTimeout(() => {\r\n      gamesBox.className = \"fadeout\";\r\n      navLock = false;\r\n    }, \"300\");\r\n  }\r\n  currentActiveSearch = null;\r\n}\r\n\r\nexport function filterFunction() {\r\n  var input, filter, a, i;\r\n  var idReference = \"#nav-bar__search\";\r\n  if (currentActiveSearch == \"games\") {\r\n    return;\r\n  }\r\n  // Gets the value from the user input, set each word into an array\r\n  input = document.querySelector(idReference + \"--input\");\r\n  filter = input.value.toUpperCase().trim();\r\n  filterArray = filter.split(\" \");\r\n  // Gets the element of the container and all current computed links\r\n  let searchBox = document.querySelector(idReference + \"box\");\r\n  a = searchBox.getElementsByTagName(\"a\");\r\n  let searchCounter = 0;\r\n  for (i = 0; i < a.length; i++) {\r\n    // For each link, test if the user input makes part of its text value (ignoring empty inputs)\r\n    // Hide any link that does not have any relation to the current input\r\n    txtValue = a[i].textContent || a[i].innerText;\r\n    txtValue = txtValue + \" \" + a[i].dataset.section + \" \" + a[i].dataset.document;\r\n    let compareTxtValue = txtValue.toUpperCase();\r\n    let containFlag = true;\r\n    for (const stringFilter of filterArray.values()) {\r\n      if (!(compareTxtValue.includes(stringFilter) && !(filter.length === 0))) {\r\n        containFlag = false;\r\n      }\r\n    }\r\n    if (containFlag) {\r\n      // Hard limit of 6 options on screen\r\n      if (searchCounter < 6 || currentActiveSearch == \"games\") {\r\n        a[i].style.display = \"block\";\r\n      } else {\r\n        a[i].style.display = \"none\";\r\n      }\r\n      searchCounter = searchCounter + 1;\r\n    } else {\r\n      a[i].style.display = \"none\";\r\n    }\r\n  }\r\n  if (searchCounter > 0) {\r\n    document.querySelector(idReference + \"--hr\").style.display = \"block\";\r\n  } else {\r\n    document.querySelector(idReference + \"--hr\").style.display = \"none\";\r\n  }\r\n}\r\n\r\n// TODO - Filling Search, Games and Pre-Loading MD files should probably be done after page load is done. I think there is a document eventListener for it.\r\n// TODO -   also, since it's a bunch of stuff, it would probably be cool to add a little loading animation at home so the user knows when it's done.\r\nexport function fillSearch() {\r\n  // Get all items on the tab bar\r\n  var tabLinks = document.getElementsByClassName(\"game-instances--links\");\r\n  var searchContents = \"\";\r\n  var game2DContents = \"\";\r\n  var game3DContents = \"\";\r\n  var i = 0;\r\n  var searchResults = document.querySelector(\"#nav-bar__searchbox\");\r\n  var gamesResults = document.querySelector(\"#nav-bar__gamesbox\");\r\n\r\n  // Insert a hidden hr on the first slot of the search\r\n  let hrElem = \"<hr id='nav-bar__search--hr'  tabindex='0' style='display: none;'>\";\r\n  searchResults.insertAdjacentHTML(\"beforeend\", hrElem);\r\n\r\n  let spanElem = '<span style=\"cursor: default;height: 50px; display: block; float: right; padding-left: 30px;\"></span>';\r\n  gamesResults.insertAdjacentHTML(\"beforeend\", spanElem);\r\n\r\n  // TODO : While you can unhide this and make the line appear, right now it doesn't look so good\r\n  // TODO :   so the styling of other elements need to change first\r\n  let hrElem2D = \"<hr id='nav-bar__games--hr2D'  tabindex='0' style='display: none;'>\";\r\n  gamesResults.insertAdjacentHTML(\"beforeend\", hrElem2D);\r\n  let hrElem3D = \"<hr id='nav-bar__games--hr3D'  tabindex='0' style='display: none;'>\";\r\n  gamesResults.insertAdjacentHTML(\"beforeend\", hrElem3D);\r\n  //hrElem = \"<div class='nav-bar__games--divider' id='nav-bar__games--hr2D'  tabindex='0'><hr/><span>2D</span><hr/></div>\";\r\n  //gamesResults.insertAdjacentHTML(\"beforeend\", hrElem);\r\n  //hrElem = \"<div  class='nav-bar__games--divider' id='nav-bar__games--hr3D'  tabindex='0'><hr/><span>3D</span><hr/></div>\";\r\n  //gamesResults.insertAdjacentHTML(\"beforeend\", hrElem);\r\n\r\n  //searchResults.insertAdjacentHTML(\"beforeend\", searchContents);\r\n\r\n  for (i = 0; i < tabLinks.length; i++) {\r\n    // Creates a local variable related to the index so it doesn't get overwritten\r\n    let currentIndex = i;\r\n    parseGFM(\"./tech/\" + tabLinks[i].dataset.document.toLowerCase()).then(\r\n      (techDocument) => {\r\n        let currentDocument = techDocument;\r\n        const parser = new DOMParser();\r\n        // Add default page search\r\n        let gameContents = \"\";\r\n        gameContents = gameContents.concat('<figure class=\"nav-bar__games--wrapper\" data-document=\"');\r\n        gameContents = gameContents.concat(\r\n          tabLinks[currentIndex].dataset.document\r\n        );\r\n        gameContents = gameContents.concat(\r\n          '\" data-dim=\"'\r\n        );\r\n        gameContents = gameContents.concat(\r\n          tabLinks[currentIndex].dataset.dim\r\n        );\r\n        gameContents = gameContents.concat(\r\n          '\" tabindex=\"0\" data-section=\"'\r\n        );\r\n        gameContents = gameContents.concat(\r\n          tabLinks[currentIndex].dataset.section\r\n        );\r\n        gameContents = gameContents.concat('\"><figcaption>');\r\n        gameContents = gameContents.concat(\r\n          tabLinks[currentIndex].dataset.document\r\n        );\r\n        gameContents = gameContents.concat('</figcaption><img  class=\"nav-bar__search--results\" src=\"media/');\r\n        gameContents = gameContents.concat(\r\n          tabLinks[currentIndex].dataset.document.toLowerCase().trim()\r\n        );\r\n        gameContents = gameContents.concat('/');\r\n        gameContents = gameContents.concat(\r\n          tabLinks[currentIndex].dataset.document.trim()\r\n        );\r\n        gameContents = gameContents.concat('ICONs.webp\"></img></figure>');\r\n\r\n        if(tabLinks[currentIndex].dataset.dim == \"2D\"){\r\n          let content2D = document.querySelector(\"#nav-bar__games--hr2D\");\r\n          // Inject AFTER 2D HR  \"afterend\" 2D HR\r\n          content2D.insertAdjacentHTML(\"beforebegin\", gameContents);\r\n        } else {\r\n          let content3D = document.querySelector(\"#nav-bar__games--hr3D\");\r\n          // Inject AFTER 3D HR\r\n          content3D.insertAdjacentHTML(\"beforebegin\", gameContents);\r\n        }\r\n\r\n        //gamesResults.insertAdjacentHTML(\"beforeend\", gameContents);\r\n\r\n        gameContents = \"\";\r\n        document\r\n          .querySelectorAll(\"figure.nav-bar__games--wrapper\")\r\n          .forEach((item) => {\r\n            addPageChangeEvent(item);\r\n          });\r\n\r\n        const doc = parser.parseFromString(currentDocument, \"text/html\");\r\n        // H1 First - Game Title\r\n        doc.querySelectorAll(\"h1\").forEach((currentHeading) => {\r\n          searchContents = searchContents.concat('<a data-document=\"');\r\n          // Create a link composed of the game name (short) and tech name and concat to the other links made by this function\r\n          searchContents = searchContents.concat(\r\n            tabLinks[currentIndex].dataset.document\r\n          );\r\n          searchContents = searchContents.concat(\r\n            '\" class = \"nav-bar__search--results\" tabindex=\"0\" data-section=\"'\r\n          );\r\n          searchContents = searchContents.concat(\r\n            tabLinks[currentIndex].dataset.section\r\n          );\r\n          searchContents = searchContents.concat('\" data-redirect=\"#');\r\n          searchContents = searchContents.concat(currentHeading.id);\r\n          searchContents = searchContents.concat('\"><b>');\r\n          searchContents = searchContents.concat(\r\n            tabLinks[currentIndex].dataset.section\r\n          );\r\n          searchContents = searchContents.concat(\"</b> </a>\");\r\n        });\r\n        // H3 Second - Articles\r\n        doc.querySelectorAll(\"h3\").forEach((currentHeading) => {\r\n          searchContents = searchContents.concat('<a data-document=\"');\r\n          // Create a link composed of the game name (short) and tech name and concat to the other links made by this function\r\n          searchContents = searchContents.concat(\r\n            tabLinks[currentIndex].dataset.document\r\n          );\r\n          searchContents = searchContents.concat(\r\n            '\" class = \"nav-bar__search--results\" tabindex=\"0\" data-section=\"'\r\n          );\r\n          searchContents = searchContents.concat(\r\n            tabLinks[currentIndex].dataset.section\r\n          );\r\n          searchContents = searchContents.concat('\" data-redirect=\"#');\r\n          searchContents = searchContents.concat(currentHeading.id);\r\n          searchContents = searchContents.concat('\"><b>');\r\n          searchContents = searchContents.concat(\r\n            tabLinks[currentIndex].dataset.document\r\n          );\r\n          searchContents = searchContents.concat(\"</b> <br>&nbsp;&nbsp;&nbsp;\");\r\n          searchContents = searchContents.concat(currentHeading.textContent);\r\n          searchContents = searchContents.concat(\"</a>\");\r\n        });\r\n        // H4 Third - Specific Tech\r\n        doc.querySelectorAll(\"h4\").forEach((currentHeading) => {\r\n          searchContents = searchContents.concat('<a data-document=\"');\r\n          // Create a link composed of the game name (short) and tech name and concat to the other links made by this function\r\n          searchContents = searchContents.concat(\r\n            tabLinks[currentIndex].dataset.document\r\n          );\r\n          searchContents = searchContents.concat(\r\n            '\" class = \"nav-bar__search--results\" tabindex=\"0\" data-section=\"'\r\n          );\r\n          searchContents = searchContents.concat(\r\n            tabLinks[currentIndex].dataset.section\r\n          );\r\n          searchContents = searchContents.concat('\" data-redirect=\"#');\r\n          searchContents = searchContents.concat(currentHeading.id);\r\n          searchContents = searchContents.concat('\"><b>');\r\n          searchContents = searchContents.concat(\r\n            tabLinks[currentIndex].dataset.document\r\n          );\r\n          searchContents = searchContents.concat(\"</b> <br>&nbsp;&nbsp;&nbsp;\");\r\n          searchContents = searchContents.concat(currentHeading.textContent);\r\n          searchContents = searchContents.concat(\"</a>\");\r\n        });\r\n        // Insert the HTML on the search bar\r\n        // TODO - this probably does for the same link multiple times... (not really but...JS)\r\n        // TODO -   not sure what to best way to deal with it is since we're in a promise\r\n        searchResults.insertAdjacentHTML(\"beforeend\", searchContents);\r\n        searchContents = \"\";\r\n        document\r\n          .querySelectorAll(\"a.nav-bar__search--results\")\r\n          .forEach((item) => {\r\n            addPageChangeEvent(item);\r\n          });\r\n      }\r\n    );\r\n  }\r\n}\r\n\r\n// --- Show all headings for a specific ID\r\nexport function revealID(id) {\r\n  // Gets the object of the provided ID\r\n  targetHeading = document.getElementById(id);\r\n  if (targetHeading == null) {\r\n    // Target hidden within an h2 section -- first we need to open it\r\n    h2Section = 0;\r\n    for (let x = 0; x < h2Collection.length; x++) {\r\n      if (h2Collection[x][2].includes(`id=\"${id}\"`)) {\r\n        h2Section = x;\r\n        break;\r\n      }\r\n    }\r\n    document.querySelectorAll(\".content__selectorbox--item\")[h2Section].click();\r\n  }\r\n  targetHeading = document.getElementById(id);\r\n  let hiddenItems = null;\r\n  let success = false;\r\n  // Gets the div that holds all the content for a given heading\r\n  if (targetHeading.tagName == \"H4\") {\r\n    if (targetHeading.dataset.open != null) {\r\n      hiddenItems = targetHeading.dataset.open.split(\" \");\r\n      success = true;\r\n    }\r\n  } else if (targetHeading.parentNode.className.includes(\"content__\")) {\r\n    if (targetHeading.parentNode.firstElementChild.dataset.open != null) {\r\n      hiddenItems =\r\n        targetHeading.parentNode.firstElementChild.dataset.open.split(\" \");\r\n      success = true;\r\n    }\r\n  } else {\r\n    // Div is one level higher if a tagging div was used\r\n    if (\r\n      targetHeading.parentNode.parentNode.firstElementChild.dataset.open != null\r\n    ) {\r\n      hiddenItems =\r\n        targetHeading.parentNode.parentNode.firstElementChild.dataset.open.split(\r\n          \" \"\r\n        );\r\n      success = true;\r\n    }\r\n  }\r\n  if (success) {\r\n    // Iterates over all related classes needed to reveal a specific heading\r\n    hiddenItems.forEach((item) => {\r\n      let targetList = document.getElementsByClassName(item);\r\n      // Get all objects that are possibly hidden\r\n      for (let target of targetList) {\r\n        if (target.hidden) {\r\n          target.hidden = false;\r\n          // Change the button depending on the current art\r\n          if (target.parentNode.className.includes(\"content__\")) {\r\n            if (\r\n              target.parentNode.firstElementChild.firstChild.innerHTML ==\r\n              \"expand_more\"\r\n            ) {\r\n              target.parentNode.firstElementChild.firstChild.innerHTML =\r\n                \"expand_less\";\r\n            } else {\r\n              target.parentNode.firstElementChild.firstChild.innerHTML =\r\n                \"remove\";\r\n            }\r\n          } else {\r\n            // Target is one level higher if a tagging div was used\r\n            if (\r\n              target.parentNode.parentNode.firstElementChild.firstChild\r\n                .innerHTML == \"expand_more\"\r\n            ) {\r\n              target.parentNode.parentNode.firstElementChild.firstChild.innerHTML =\r\n                \"expand_less\";\r\n            } else {\r\n              target.parentNode.parentNode.firstElementChild.firstChild.innerHTML =\r\n                \"remove\";\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nvar headings = [];\r\n\r\nfunction createTOC() {\r\n  //Check if tocborder already exists\r\n  let tocBorder = document.getElementById(\"content__tocborder\");\r\n  let selector = null;\r\n  let content = null;\r\n  let toc = null;\r\n  let tocMobile = null;\r\n  if (tocBorder == null) {\r\n    //Check if it is a tech page by searching for an active h2 (class == content__selectorbox--item selected)\r\n    let techPage = document.querySelector(\".content__selectorbox--item.selected\");\r\n    if (techPage == null) {\r\n      return;\r\n    } else {\r\n      // Title is the content of the div\r\n      h2Title = techPage.textContent;\r\n    }\r\n    //Gets div of id content and creats a new div as children\r\n    content = document.getElementById(\"content\");\r\n    tocBorder = document.createElement(\"div\");\r\n    tocBorder.id = \"content__tocborder\";\r\n    content.appendChild(tocBorder);\r\n    toc = document.createElement(\"div\");\r\n    toc.id = \"content__toc\";\r\n    tocMobile = document.createElement(\"div\");\r\n    tocMobile.id = \"content__tocmobile\";\r\n    tocBorder.appendChild(toc);\r\n    //Set TOC y location just after #content__selector\r\n    selector = document.getElementById(\"content__selector\");\r\n    tocBorder.style.top = (selector.offsetTop + 150) + \"px\";\r\n\r\n    // Also add an icon on the #section-container__div for mobile\r\n    let tocIcon = document.createElement(\"span\");\r\n    tocIcon.className = \"material-symbols-rounded\";\r\n    tocIcon.id = \"content__tocicon\";\r\n    tocIcon.innerHTML = \"menu_book\";\r\n    tocIcon.style.display = \"none\";\r\n    let sectionContainer = document.getElementById(\"section-container__div\");\r\n    sectionContainer.appendChild(tocIcon);\r\n    // And a box so the ToC can be added to it. <div id=\"content__tocicon--box\" style=\"width: 300px;\" tabindex=\"0\" class=\"fadeout\">\r\n    let tocIconBox = document.createElement(\"div\");\r\n    tocIconBox.id = \"content__tocicon--box\";\r\n    tocIconBox.style.width = \"0px\";\r\n    // set tabindex so it can get focused\r\n    tocIconBox.tabIndex = \"0\";\r\n    sectionContainer.appendChild(tocIconBox);\r\n    // Add the toc to the box\r\n    tocIconBox.appendChild(tocMobile);\r\n    dragScrollElement((\"#\" + tocIconBox.id), 1);\r\n    dragScrollElement((\"#\" + toc.id), 1);\r\n    // Add an event listener to the icon\r\n    tocIcon.addEventListener(\"click\", (event) => {\r\n      let box = document.getElementById(\"content__tocicon--box\");\r\n      var boxWidth = 300;\r\n      if (document.body.clientWidth >= 480) {\r\n        boxWidth = 360;\r\n      }\r\n      box.style.width = boxWidth + \"px\";\r\n      box.className = \"fadein\";\r\n      tocIconBox.display = \"block\";\r\n      box.focus();\r\n    });\r\n    tocIconBox.addEventListener(\"focusout\", (event) => {\r\n      let box = document.getElementById(\"content__tocicon--box\");\r\n      event.stopPropagation();\r\n      box.className = \"fadeout\";\r\n    });\r\n  } else {\r\n    selector = document.getElementById(\"content__selector\");\r\n    content = document.getElementById(\"content\");\r\n    toc = document.getElementById(\"content__toc\");\r\n    tocMobile = document.getElementById(\"content__tocmobile\");\r\n    h2Title = document.querySelector(\".content__selectorbox--item.selected\").textContent;\r\n  }\r\n  //Set TOCborder size to content size - offset\r\n  tocBorder.style.height = \"calc(100% - \" + (selector.offsetTop + 150) + \"px)\";\r\n  //Add content to TOC\r\n  let tocContent = \"<p>\u2014 On this section:</p><hr>\";\r\n  toc.innerHTML = tocContent;\r\n  tocMobile.innerHTML = tocContent;\r\n  // - Scan headinds (h3s and h4s) on #content__currenth2, creates objects with name, clientY, isH3 or isH4, and parent (if H4)\r\n  headings = [];\r\n  let h3s = document.querySelectorAll(\"#content__currenth2 h3\");\r\n  let h4s = document.querySelectorAll(\"#content__currenth2 h4\");\r\n  for (let h3 of h3s) {\r\n    headings.push({\r\n      name: h3.textContent,\r\n      clientY: h3.getBoundingClientRect().top,\r\n      isH3: true,\r\n      obj : h3,\r\n      id : h3.id\r\n    });\r\n  }\r\n  for (let h4 of h4s) {\r\n    headings.push({\r\n      name: h4.textContent,\r\n      clientY: h4.getBoundingClientRect().top,\r\n      isH3: false,\r\n      obj : h4,\r\n      id : h4.id\r\n    });\r\n  }\r\n  // - Sort the objects by clientY\r\n  headings.sort((a, b) => a.clientY - b.clientY);\r\n\r\n  // - Create a list of links to the headings\r\n  let tocLinks = \"\";\r\n  for (let heading of headings) {\r\n    let link = '<a data-document=\"' + currentDocument + '\" data-section=\"'+ currentSection + '\" data-redirect=\"#' + heading.id + '\" class=\"content__toc--search\" style=\"display: block;';\r\n    if (!(heading.isH3)) {\r\n      link = link.concat('padding-left: 30px; font-size: 13px; padding-top: 6px; padding-bottom: 6px;');\r\n    }\r\n    link = link.concat('\">' + heading.name);\r\n    link = link.concat(\"</a>\");\r\n    tocLinks = tocLinks.concat(link);\r\n  }\r\n  // - Add the list to the TOC\r\n  toc.innerHTML = tocContent.concat(tocLinks);\r\n  tocMobile.innerHTML = tocContent.concat(tocLinks);\r\n  // Add addPageChangeEvent to links\r\n  document.querySelectorAll(\".content__toc--search\").forEach((item) => {\r\n    addPageChangeEvent(item);\r\n  });\r\n}\r\n\r\nvar ticking = false;\r\n\r\nfunction highlightTOC() {\r\n  // Check which H3 is the current one based on scrollPos & headings and hide all other h4s that are not theirs\r\n  let currentH3 = null;\r\n  let currentH3Index = 0;\r\n  let nextH3Index = 0;\r\n  for (let i = 0; i < headings.length; i++) {\r\n    if (headings[i].isH3) {\r\n      // TODO : Something related to viewport instead of 320\r\n      if (headings[i].obj.getBoundingClientRect().top <= 320 || (currentH3 == null)) {\r\n        currentH3 = headings[i];\r\n        currentH3Index = i;\r\n      } else {\r\n        nextH3Index = i;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  // Hide SEARCH h4s (display: none) before and after the indexes and show (display:block) the ones between\r\n  for (let i = 0; i < headings.length; i++) {\r\n    if (!(headings[i].isH3)) {\r\n      if ((i >= currentH3Index && i <= nextH3Index) || (nextH3Index == 0 && currentH3Index > 0 && i >= currentH3Index)) {\r\n        let searchH4 = document.querySelectorAll('.content__toc--search[data-redirect=\"#' + headings[i].id + '\"]');\r\n        for (let search of searchH4) {\r\n          search.style.display = \"block\";\r\n        }\r\n      } else {\r\n        let searchH4 = document.querySelectorAll('.content__toc--search[data-redirect=\"#' + headings[i].id + '\"]');\r\n        for (let search of searchH4) {\r\n          search.style.display = \"none\";\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Add an active to the current h3 and remove active (if there are any) from other\r\n  let currentActive = document.querySelectorAll(\".content__toc--search.active\");\r\n  for (let active of currentActive) {\r\n    active.classList.remove(\"active\");\r\n  }\r\n  let currentH3Link = document.querySelectorAll('.content__toc--search[data-redirect=\"#' + currentH3.id + '\"]');\r\n  for (let active of currentH3Link) {\r\n    active.classList.add(\"active\");\r\n  }\r\n}\r\n\r\ndocument.addEventListener(\"scroll\", (event) => {\r\n  if (!ticking && inTechPage) {\r\n    window.requestAnimationFrame(() => {\r\n      highlightTOC();\r\n      ticking = false;\r\n    });\r\n    ticking = true;\r\n  }\r\n});\r\n\r\n\r\n// --- Function for click events on the nav-bar\r\nexport function enableSmoothTOC() {\r\n  //Gets all hash events\r\n  document.querySelectorAll('a[href^=\"#\"]').forEach((anchor) => {\r\n    anchor.addEventListener(\"click\", function (e) {\r\n      //Add smooth behaviour to all matches\r\n      e.preventDefault();\r\n      //Collapses the heading if needed\r\n      revealID(this.getAttribute(\"href\").substring(1));\r\n      document.querySelector(this.getAttribute(\"href\")).scrollIntoView({\r\n        behavior: \"smooth\",\r\n      });\r\n    });\r\n  });\r\n}\r\n\r\n"],
  "mappings": "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AMkB,CAAK,EAAI,GAC1CoL,EAAatM,EAAM,IAAI,UAAU,KAAK,OACtCA,EAAM,IAAI,UAAU,KAAKsM,CAAU,EAAI,CAAE,MAAOpL,EAAO,MAAO,CAAE,EAChElB,EAAM,IAAI,UAAU,KAAK,IAAMkB,CAAK,EAAIoL,GAExCA,EAAatM,EAAM,IAAI,UAAU,KAAK,IAAMkB,CAAK,EAGnDuL,EAAgBzM,EAAM,IAAI,UAAU,KAAKsM,CAAU,EAAE,MACrDtM,EAAM,IAAI,UAAU,KAAKsM,CAAU,EAAE,QAErCtM,EAAM,KAAK,CACT,KAAM,eACN,GAAIsM,EACJ,MAAOG,EACP,MAAOzM,EAAM,KACf,CAAC,GAGHA,EAAM,IAAMiB,EACZjB,EAAM,OAASY,EACR,GACT,CAKA,IAAI8L,GAAc,CAChB,OACA,MACA,aACA,MACA,OACA,QACA,OACA,MACA,MACA,OACA,OACA,MACA,OACA,MACA,OACA,MACA,MACA,KACA,SACA,OACA,OACA,QACA,MACA,OACA,KACA,OACA,OACA,MACA,OACA,YACA,WACA,YACA,WACA,OACA,SACA,MACA,OACA,QACA,OACA,UACA,OACA,MACA,KACA,MACA,OACA,kBACA,MACA,OACA,OACA,UACA,UACA,QACA,QACA,MACA,OACA,MACA,OACA,YACA,aACA,MACA,MACA,SACA,OACA,cACA,SACA,MACA,KACA,MACA,QACA,KACA,MACA,OACA,cACA,cACA,eACA,OACA,UACA,UACA,YACA,MACA,MACA,MACA,MACA,aACA,KACA,UACA,UACA,OACA,SACA,SACA,mBACA,0BACA,UACA,MACA,kBACA,qBACA,MACA,MACA,OACA,WACA,OACA,SACA,OACA,KACA,MACA,eACA,QACA,MACA,OACA,MACA,MACA,OACA,OACA,OACA,MACA,MACA,UACA,SACA,QACA,SACA,OACA,SACA,UACA,MACA,UACA,QACA,SACA,MACA,QACA,MACA,OACA,YACA,WACA,QACA,OACA,QACA,MACA,WACA,MACA,QACA,OACA,aACA,OACA,MACA,QACA,MACA,SACA,UACA,MACA,QACA,M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",
  "names": ["tooltipInit", "tabBarLink", "loadTooltip", "unloadTooltip", "tooltip", "tooltipText", "base", "tip", "boundingBox", "colorCollection", "sortTables", "getCellValue", "tr", "idx", "comparer", "asc", "a", "b", "v1", "v2", "th", "tbody", "treatSpoilers", "spoilerElement", "event", "styleImages", "imageList", "contentElement", "i", "mouseDown", "h2Collection", "startX", "scrollLeft", "collapseHeadings", "page", "h2Collection", "currentH4", "currentH3", "currentH2", "newInner", "newHeading", "firstH2", "currentHTML", "contentElem", "i", "injectionIndex", "injectedSearch", "newH4", "selectionTab", "colorCollection", "dragScrollElement", "query", "direction", "sliderSelector", "startDraggingX", "e", "mouseDown", "startX", "scrollLeft", "startDraggingY", "moveX", "x", "scroll", "moveY", "y", "stopDragging", "event", "collapseHeadingStyle", "openTags", "target", "textarea", "decodeEntity", "name", "hasOwn", "has", "object", "key", "assign", "obj", "sources", "source", "UNESCAPE_MD_RE", "unescapeMd", "str", "isValidEntityCode", "c", "fromCodePoint", "surrogate1", "surrogate2", "NAMED_ENTITY_RE", "DIGITAL_ENTITY_TEST_RE", "replaceEntityPattern", "match", "name", "code", "decoded", "decodeEntity", "replaceEntities", "HTML_ESCAPE_TEST_RE", "HTML_ESCAPE_REPLACE_RE", "HTML_REPLACEMENTS", "replaceUnsafeChar", "ch", "escapeHtml", "rules", "tokens", "idx", "getBreak", "escapeHtml", "options", "env", "instance", "token", "langClass", "langPrefix", "langName", "fences", "fenceName", "highlighted", "has", "replaceEntities", "unescapeMd", "order", "addBreak", "title", "target", "src", "alt", "suffix", "n", "id", "hr", "nextToken", "Renderer", "assign", "_rules", "len", "i", "result", "Ruler", "name", "self", "chains", "rule", "altName", "chain", "fn", "opt", "beforeName", "ruleName", "afterName", "list", "strict", "chainName", "block", "state", "StateInline", "parserInline", "outTokens", "key", "val", "parseLinkLabel", "start", "level", "found", "marker", "labelEnd", "max", "oldPos", "oldFlag", "parseAbbr", "str", "pos", "label", "abbr", "l", "content", "normalizeLink", "url", "normalized", "parseLinkDestination", "code", "link", "parseLinkTitle", "normalizeReference", "parseReference", "parser", "href", "references", "inline", "tok", "footnote_block", "j", "t", "lastParagraph", "current", "currentLabel", "insideRef", "refTokens", "PUNCT_CHARS", "regEscape", "s", "abbr2", "text", "nodes", "reg", "m", "regText", "blockTokens", "x", "a", "b", "RARE_RE", "SCOPED_ABBR_RE", "SCOPED_ABBR", "replaceScopedAbbr", "match", "replace", "inlineTokens", "blkIdx", "QUOTE_TEST_RE", "QUOTE_RE", "PUNCT_RE", "APOSTROPHE", "isLetter", "replaceAt", "index", "ch", "smartquotes", "thisLevel", "lastSpace", "nextSpace", "item", "canOpen", "canClose", "isSingle", "stack", "OUTER", "Core", "StateBlock", "indent", "indent_found", "line", "from", "min", "begin", "end", "keepLastLF", "first", "last", "queue", "shift", "startLine", "endLine", "nextLine", "silent", "params", "mem", "haveEndMarker", "blockquote", "lastLineEmpty", "oldTShift", "oldBMarks", "oldIndent", "oldParentType", "lines", "terminatorRules", "terminate", "cnt", "skipBulletListMarker", "skipOrderedListMarker", "markTightParagraphs", "oldTight", "posAfterMarker", "indentAfterMarker", "markerValue", "markerCharCode", "isOrdered", "contentStart", "listTokIdx", "prevEmptyEnd", "listLines", "itemLines", "tight", "footnote", "oldBMark", "heading", "tmp", "lheading", "next", "html_blocks", "HTML_TAG_OPEN_RE", "HTML_TAG_CLOSE_RE", "isLetter$1", "lc", "htmlblock", "getLine", "table", "lineText", "rows", "cell", "aligns", "tableLines", "tbodyLines", "skipMarker", "markTightParagraphs$1", "deflist", "ddLine", "dtLine", "oldDDIndent", "paragraph", "_rules$1", "ParserBlock", "hasEmptyLines", "ok", "TABS_SCAN_RE", "NEWLINES_RE", "SPACES_RE", "lineStart", "lastTabPos", "offset", "isTerminatorChar", "newline", "pmax", "ESCAPED", "escape", "backticks", "matchStart", "matchEnd", "del", "lastChar", "nextChar", "ins", "mark", "isAlphaNum", "scanDelims", "count", "can_open", "can_close", "emphasis", "startCount", "oldCount", "newCount", "res", "UNESCAPE_RE", "sub", "UNESCAPE_RE$1", "sup", "links", "labelStart", "ref", "isImage", "footnote_inline", "footnoteId", "oldLength", "footnote_ref", "footnoteSubId", "url_schemas", "EMAIL_RE", "AUTOLINK_RE", "autolink", "tail", "linkMatch", "emailMatch", "fullUrl", "replace$1", "regex", "attr_name", "unquoted", "single_quoted", "double_quoted", "attr_value", "attribute", "open_tag", "close_tag", "comment", "processing", "declaration", "cdata", "HTML_TAG_RE", "isLetter$2", "htmltag", "DIGITAL_RE", "NAMED_RE", "entity", "isValidEntityCode", "fromCodePoint", "decoded", "decodeEntity", "_rules$2", "ParserInline", "validateLink", "cached_pos", "BAD_PROTOCOLS", "defaultConfig", "fullConfig", "commonmarkConfig", "config", "StateCore", "Remarkable", "preset", "presets", "plugin", "currentSection", "currentDocument", "inTechPage", "pageInit", "item", "addPageChangeEvent", "searchLogo", "searchBoxListener", "gamesLogo", "updatePage", "createTOC", "enableSmoothTOC", "compileTags", "sortTables", "treatSpoilers", "styleImages", "compileH2s", "selectorBox", "event", "currentCollection", "h2Collection", "h2", "button", "collapseHeadingStyle", "highlightTOC", "taggedElement", "tagTextData", "tagData", "todoTag", "loadTooltip", "unloadTooltip", "versionText", "versionTag", "mediaTag", "sourceVideo", "mediaIcon", "videoSibling", "hiddenMedia", "changeEvent", "i", "tabContent", "tabLinks", "sectionText", "contentText", "headings", "tocIcon", "parseGFM", "page", "clearFunction", "pastDocument", "currentDataset", "revealID", "collapseHeadings", "md", "Remarkable", "openEmRenderer", "closeEmRenderer", "closeHeadingRenderer", "injectedHeading", "injectedEm", "tagMap", "tokens", "idx", "options", "env", "spanReturn", "parseJsonTag", "baseReturn", "parseTags", "fallback", "tagToken", "endingIndex", "jsonTag", "classOp", "loadFile", "filePath", "resolve", "reject", "xhr", "file", "fileData", "content", "navLock", "currentActiveSearch", "type", "injectSearchBox", "fillSearch", "children", "id", "baseName", "inputName", "logoName", "base", "inputField", "searchBase", "gamesBase", "searchInputField", "filterFunction", "searchField", "searchboxWidth", "a", "searchBox", "gamesBox", "referenceBox", "referenceId", "input", "filter", "idReference", "searchCounter", "compareTxtValue", "containFlag", "stringFilter", "searchContents", "game2DContents", "game3DContents", "searchResults", "gamesResults", "currentIndex", "techDocument", "parser", "gameContents", "doc", "currentHeading", "x", "hiddenItems", "success", "targetList", "target", "tocBorder", "selector", "toc", "tocMobile", "techPage", "sectionContainer", "tocIconBox", "dragScrollElement", "box", "boxWidth", "tocContent", "h3s", "h4s", "h3", "h4", "b", "tocLinks", "heading", "link", "ticking", "currentH3", "currentH3Index", "nextH3Index", "searchH4", "search", "currentActive", "active", "currentH3Link", "anchor", "e"]
}
