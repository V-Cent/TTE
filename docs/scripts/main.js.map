{
  "version": 3,
  "sources": ["../../node_modules/remarkable/dist/esm/index.browser.js", "../../src/parser.ts", "../../src/search.ts", "../../src/toc.ts", "../../src/headings.ts", "../../src/directives.ts", "../../src/helper.ts", "../../src/main.ts"],
  "sourcesContent": ["var textarea;\n\nfunction decodeEntity(name) {\n  textarea = textarea || document.createElement('textarea');\n  textarea.innerHTML = '&' + name + ';';\n  return textarea.value;\n}\n\n/**\n * Utility functions\n */\n\nfunction typeOf(obj) {\n  return Object.prototype.toString.call(obj);\n}\n\nfunction isString(obj) {\n  return typeOf(obj) === '[object String]';\n}\n\nvar hasOwn = Object.prototype.hasOwnProperty;\n\nfunction has(object, key) {\n  return object\n    ? hasOwn.call(object, key)\n    : false;\n}\n\n// Extend objects\n//\nfunction assign(obj /*from1, from2, from3, ...*/) {\n  var sources = [].slice.call(arguments, 1);\n\n  sources.forEach(function (source) {\n    if (!source) { return; }\n\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be object');\n    }\n\n    Object.keys(source).forEach(function (key) {\n      obj[key] = source[key];\n    });\n  });\n\n  return obj;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\nvar UNESCAPE_MD_RE = /\\\\([\\\\!\"#$%&'()*+,.\\/:;<=>?@[\\]^_`{|}~-])/g;\n\nfunction unescapeMd(str) {\n  if (str.indexOf('\\\\') < 0) { return str; }\n  return str.replace(UNESCAPE_MD_RE, '$1');\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\nfunction isValidEntityCode(c) {\n  /*eslint no-bitwise:0*/\n  // broken sequence\n  if (c >= 0xD800 && c <= 0xDFFF) { return false; }\n  // never used\n  if (c >= 0xFDD0 && c <= 0xFDEF) { return false; }\n  if ((c & 0xFFFF) === 0xFFFF || (c & 0xFFFF) === 0xFFFE) { return false; }\n  // control codes\n  if (c >= 0x00 && c <= 0x08) { return false; }\n  if (c === 0x0B) { return false; }\n  if (c >= 0x0E && c <= 0x1F) { return false; }\n  if (c >= 0x7F && c <= 0x9F) { return false; }\n  // out of range\n  if (c > 0x10FFFF) { return false; }\n  return true;\n}\n\nfunction fromCodePoint(c) {\n  /*eslint no-bitwise:0*/\n  if (c > 0xffff) {\n    c -= 0x10000;\n    var surrogate1 = 0xd800 + (c >> 10),\n        surrogate2 = 0xdc00 + (c & 0x3ff);\n\n    return String.fromCharCode(surrogate1, surrogate2);\n  }\n  return String.fromCharCode(c);\n}\n\nvar NAMED_ENTITY_RE   = /&([a-z#][a-z0-9]{1,31});/gi;\nvar DIGITAL_ENTITY_TEST_RE = /^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i;\n\nfunction replaceEntityPattern(match, name) {\n  var code = 0;\n  var decoded = decodeEntity(name);\n\n  if (name !== decoded) {\n    return decoded;\n  } else if (name.charCodeAt(0) === 0x23/* # */ && DIGITAL_ENTITY_TEST_RE.test(name)) {\n    code = name[1].toLowerCase() === 'x' ?\n      parseInt(name.slice(2), 16)\n    :\n      parseInt(name.slice(1), 10);\n    if (isValidEntityCode(code)) {\n      return fromCodePoint(code);\n    }\n  }\n  return match;\n}\n\nfunction replaceEntities(str) {\n  if (str.indexOf('&') < 0) { return str; }\n\n  return str.replace(NAMED_ENTITY_RE, replaceEntityPattern);\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\nvar HTML_ESCAPE_TEST_RE = /[&<>\"]/;\nvar HTML_ESCAPE_REPLACE_RE = /[&<>\"]/g;\nvar HTML_REPLACEMENTS = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;'\n};\n\nfunction replaceUnsafeChar(ch) {\n  return HTML_REPLACEMENTS[ch];\n}\n\nfunction escapeHtml(str) {\n  if (HTML_ESCAPE_TEST_RE.test(str)) {\n    return str.replace(HTML_ESCAPE_REPLACE_RE, replaceUnsafeChar);\n  }\n  return str;\n}\n\nvar utils = /*#__PURE__*/Object.freeze({\n  isString: isString,\n  has: has,\n  assign: assign,\n  unescapeMd: unescapeMd,\n  isValidEntityCode: isValidEntityCode,\n  fromCodePoint: fromCodePoint,\n  replaceEntities: replaceEntities,\n  escapeHtml: escapeHtml\n});\n\n/**\n * Renderer rules cache\n */\n\nvar rules = {};\n\n/**\n * Blockquotes\n */\n\nrules.blockquote_open = function(/* tokens, idx, options, env */) {\n  return '<blockquote>\\n';\n};\n\nrules.blockquote_close = function(tokens, idx /*, options, env */) {\n  return '</blockquote>' + getBreak(tokens, idx);\n};\n\n/**\n * Code\n */\n\nrules.code = function(tokens, idx /*, options, env */) {\n  if (tokens[idx].block) {\n    return '<pre><code>' + escapeHtml(tokens[idx].content) + '</code></pre>' + getBreak(tokens, idx);\n  }\n  return '<code>' + escapeHtml(tokens[idx].content) + '</code>';\n};\n\n/**\n * Fenced code blocks\n */\n\nrules.fence = function(tokens, idx, options, env, instance) {\n  var token = tokens[idx];\n  var langClass = '';\n  var langPrefix = options.langPrefix;\n  var langName = '', fences, fenceName;\n  var highlighted;\n\n  if (token.params) {\n\n    //\n    // ```foo bar\n    //\n    // Try custom renderer \"foo\" first. That will simplify overwrite\n    // for diagrams, latex, and any other fenced block with custom look\n    //\n\n    fences = token.params.split(/\\s+/g);\n    fenceName = fences.join(' ');\n\n    if (has(instance.rules.fence_custom, fences[0])) {\n      return instance.rules.fence_custom[fences[0]](tokens, idx, options, env, instance);\n    }\n\n    langName = escapeHtml(replaceEntities(unescapeMd(fenceName)));\n    langClass = ' class=\"' + langPrefix + langName + '\"';\n  }\n\n  if (options.highlight) {\n    highlighted = options.highlight.apply(options.highlight, [ token.content ].concat(fences))\n      || escapeHtml(token.content);\n  } else {\n    highlighted = escapeHtml(token.content);\n  }\n\n  return '<pre><code' + langClass + '>'\n        + highlighted\n        + '</code></pre>'\n        + getBreak(tokens, idx);\n};\n\nrules.fence_custom = {};\n\n/**\n * Headings\n */\n\nrules.heading_open = function(tokens, idx /*, options, env */) {\n  return '<h' + tokens[idx].hLevel + '>';\n};\nrules.heading_close = function(tokens, idx /*, options, env */) {\n  return '</h' + tokens[idx].hLevel + '>\\n';\n};\n\n/**\n * Horizontal rules\n */\n\nrules.hr = function(tokens, idx, options /*, env */) {\n  return (options.xhtmlOut ? '<hr />' : '<hr>') + getBreak(tokens, idx);\n};\n\n/**\n * Bullets\n */\n\nrules.bullet_list_open = function(/* tokens, idx, options, env */) {\n  return '<ul>\\n';\n};\nrules.bullet_list_close = function(tokens, idx /*, options, env */) {\n  return '</ul>' + getBreak(tokens, idx);\n};\n\n/**\n * List items\n */\n\nrules.list_item_open = function(/* tokens, idx, options, env */) {\n  return '<li>';\n};\nrules.list_item_close = function(/* tokens, idx, options, env */) {\n  return '</li>\\n';\n};\n\n/**\n * Ordered list items\n */\n\nrules.ordered_list_open = function(tokens, idx /*, options, env */) {\n  var token = tokens[idx];\n  var order = token.order > 1 ? ' start=\"' + token.order + '\"' : '';\n  return '<ol' + order + '>\\n';\n};\nrules.ordered_list_close = function(tokens, idx /*, options, env */) {\n  return '</ol>' + getBreak(tokens, idx);\n};\n\n/**\n * Paragraphs\n */\n\nrules.paragraph_open = function(tokens, idx /*, options, env */) {\n  return tokens[idx].tight ? '' : '<p>';\n};\nrules.paragraph_close = function(tokens, idx /*, options, env */) {\n  var addBreak = !(tokens[idx].tight && idx && tokens[idx - 1].type === 'inline' && !tokens[idx - 1].content);\n  return (tokens[idx].tight ? '' : '</p>') + (addBreak ? getBreak(tokens, idx) : '');\n};\n\n/**\n * Links\n */\n\nrules.link_open = function(tokens, idx, options /* env */) {\n  var title = tokens[idx].title ? (' title=\"' + escapeHtml(replaceEntities(tokens[idx].title)) + '\"') : '';\n  var target = options.linkTarget ? (' target=\"' + options.linkTarget + '\"') : '';\n  return '<a href=\"' + escapeHtml(tokens[idx].href) + '\"' + title + target + '>';\n};\nrules.link_close = function(/* tokens, idx, options, env */) {\n  return '</a>';\n};\n\n/**\n * Images\n */\n\nrules.image = function(tokens, idx, options /*, env */) {\n  var src = ' src=\"' + escapeHtml(tokens[idx].src) + '\"';\n  var title = tokens[idx].title ? (' title=\"' + escapeHtml(replaceEntities(tokens[idx].title)) + '\"') : '';\n  var alt = ' alt=\"' + (tokens[idx].alt ? escapeHtml(replaceEntities(unescapeMd(tokens[idx].alt))) : '') + '\"';\n  var suffix = options.xhtmlOut ? ' /' : '';\n  return '<img' + src + alt + title + suffix + '>';\n};\n\n/**\n * Tables\n */\n\nrules.table_open = function(/* tokens, idx, options, env */) {\n  return '<table>\\n';\n};\nrules.table_close = function(/* tokens, idx, options, env */) {\n  return '</table>\\n';\n};\nrules.thead_open = function(/* tokens, idx, options, env */) {\n  return '<thead>\\n';\n};\nrules.thead_close = function(/* tokens, idx, options, env */) {\n  return '</thead>\\n';\n};\nrules.tbody_open = function(/* tokens, idx, options, env */) {\n  return '<tbody>\\n';\n};\nrules.tbody_close = function(/* tokens, idx, options, env */) {\n  return '</tbody>\\n';\n};\nrules.tr_open = function(/* tokens, idx, options, env */) {\n  return '<tr>';\n};\nrules.tr_close = function(/* tokens, idx, options, env */) {\n  return '</tr>\\n';\n};\nrules.th_open = function(tokens, idx /*, options, env */) {\n  var token = tokens[idx];\n  return '<th'\n    + (token.align ? ' style=\"text-align:' + token.align + '\"' : '')\n    + '>';\n};\nrules.th_close = function(/* tokens, idx, options, env */) {\n  return '</th>';\n};\nrules.td_open = function(tokens, idx /*, options, env */) {\n  var token = tokens[idx];\n  return '<td'\n    + (token.align ? ' style=\"text-align:' + token.align + '\"' : '')\n    + '>';\n};\nrules.td_close = function(/* tokens, idx, options, env */) {\n  return '</td>';\n};\n\n/**\n * Bold\n */\n\nrules.strong_open = function(/* tokens, idx, options, env */) {\n  return '<strong>';\n};\nrules.strong_close = function(/* tokens, idx, options, env */) {\n  return '</strong>';\n};\n\n/**\n * Italicize\n */\n\nrules.em_open = function(/* tokens, idx, options, env */) {\n  return '<em>';\n};\nrules.em_close = function(/* tokens, idx, options, env */) {\n  return '</em>';\n};\n\n/**\n * Strikethrough\n */\n\nrules.del_open = function(/* tokens, idx, options, env */) {\n  return '<del>';\n};\nrules.del_close = function(/* tokens, idx, options, env */) {\n  return '</del>';\n};\n\n/**\n * Insert\n */\n\nrules.ins_open = function(/* tokens, idx, options, env */) {\n  return '<ins>';\n};\nrules.ins_close = function(/* tokens, idx, options, env */) {\n  return '</ins>';\n};\n\n/**\n * Highlight\n */\n\nrules.mark_open = function(/* tokens, idx, options, env */) {\n  return '<mark>';\n};\nrules.mark_close = function(/* tokens, idx, options, env */) {\n  return '</mark>';\n};\n\n/**\n * Super- and sub-script\n */\n\nrules.sub = function(tokens, idx /*, options, env */) {\n  return '<sub>' + escapeHtml(tokens[idx].content) + '</sub>';\n};\nrules.sup = function(tokens, idx /*, options, env */) {\n  return '<sup>' + escapeHtml(tokens[idx].content) + '</sup>';\n};\n\n/**\n * Breaks\n */\n\nrules.hardbreak = function(tokens, idx, options /*, env */) {\n  return options.xhtmlOut ? '<br />\\n' : '<br>\\n';\n};\nrules.softbreak = function(tokens, idx, options /*, env */) {\n  return options.breaks ? (options.xhtmlOut ? '<br />\\n' : '<br>\\n') : '\\n';\n};\n\n/**\n * Text\n */\n\nrules.text = function(tokens, idx /*, options, env */) {\n  return escapeHtml(tokens[idx].content);\n};\n\n/**\n * Content\n */\n\nrules.htmlblock = function(tokens, idx /*, options, env */) {\n  return tokens[idx].content;\n};\nrules.htmltag = function(tokens, idx /*, options, env */) {\n  return tokens[idx].content;\n};\n\n/**\n * Abbreviations, initialism\n */\n\nrules.abbr_open = function(tokens, idx /*, options, env */) {\n  return '<abbr title=\"' + escapeHtml(replaceEntities(tokens[idx].title)) + '\">';\n};\nrules.abbr_close = function(/* tokens, idx, options, env */) {\n  return '</abbr>';\n};\n\n/**\n * Footnotes\n */\n\nrules.footnote_ref = function(tokens, idx) {\n  var n = Number(tokens[idx].id + 1).toString();\n  var id = 'fnref' + n;\n  if (tokens[idx].subId > 0) {\n    id += ':' + tokens[idx].subId;\n  }\n  return '<sup class=\"footnote-ref\"><a href=\"#fn' + n + '\" id=\"' + id + '\">[' + n + ']</a></sup>';\n};\nrules.footnote_block_open = function(tokens, idx, options) {\n  var hr = options.xhtmlOut\n    ? '<hr class=\"footnotes-sep\" />\\n'\n    : '<hr class=\"footnotes-sep\">\\n';\n  return hr + '<section class=\"footnotes\">\\n<ol class=\"footnotes-list\">\\n';\n};\nrules.footnote_block_close = function() {\n  return '</ol>\\n</section>\\n';\n};\nrules.footnote_open = function(tokens, idx) {\n  var id = Number(tokens[idx].id + 1).toString();\n  return '<li id=\"fn' + id + '\"  class=\"footnote-item\">';\n};\nrules.footnote_close = function() {\n  return '</li>\\n';\n};\nrules.footnote_anchor = function(tokens, idx) {\n  var n = Number(tokens[idx].id + 1).toString();\n  var id = 'fnref' + n;\n  if (tokens[idx].subId > 0) {\n    id += ':' + tokens[idx].subId;\n  }\n  return ' <a href=\"#' + id + '\" class=\"footnote-backref\">\u21A9</a>';\n};\n\n/**\n * Definition lists\n */\n\nrules.dl_open = function() {\n  return '<dl>\\n';\n};\nrules.dt_open = function() {\n  return '<dt>';\n};\nrules.dd_open = function() {\n  return '<dd>';\n};\nrules.dl_close = function() {\n  return '</dl>\\n';\n};\nrules.dt_close = function() {\n  return '</dt>\\n';\n};\nrules.dd_close = function() {\n  return '</dd>\\n';\n};\n\n/**\n * Helper functions\n */\n\nfunction nextToken(tokens, idx) {\n  if (++idx >= tokens.length - 2) {\n    return idx;\n  }\n  if ((tokens[idx].type === 'paragraph_open' && tokens[idx].tight) &&\n      (tokens[idx + 1].type === 'inline' && tokens[idx + 1].content.length === 0) &&\n      (tokens[idx + 2].type === 'paragraph_close' && tokens[idx + 2].tight)) {\n    return nextToken(tokens, idx + 2);\n  }\n  return idx;\n}\n\n/**\n * Check to see if `\\n` is needed before the next token.\n *\n * @param  {Array} `tokens`\n * @param  {Number} `idx`\n * @return {String} Empty string or newline\n * @api private\n */\n\nvar getBreak = rules.getBreak = function getBreak(tokens, idx) {\n  idx = nextToken(tokens, idx);\n  if (idx < tokens.length && tokens[idx].type === 'list_item_close') {\n    return '';\n  }\n  return '\\n';\n};\n\n/**\n * Renderer class. Renders HTML and exposes `rules` to allow\n * local modifications.\n */\n\nfunction Renderer() {\n  this.rules = assign({}, rules);\n\n  // exported helper, for custom rules only\n  this.getBreak = rules.getBreak;\n}\n\n/**\n * Render a string of inline HTML with the given `tokens` and\n * `options`.\n *\n * @param  {Array} `tokens`\n * @param  {Object} `options`\n * @param  {Object} `env`\n * @return {String}\n * @api public\n */\n\nRenderer.prototype.renderInline = function (tokens, options, env) {\n  var _rules = this.rules;\n  var len = tokens.length, i = 0;\n  var result = '';\n\n  while (len--) {\n    result += _rules[tokens[i].type](tokens, i++, options, env, this);\n  }\n\n  return result;\n};\n\n/**\n * Render a string of HTML with the given `tokens` and\n * `options`.\n *\n * @param  {Array} `tokens`\n * @param  {Object} `options`\n * @param  {Object} `env`\n * @return {String}\n * @api public\n */\n\nRenderer.prototype.render = function (tokens, options, env) {\n  var _rules = this.rules;\n  var len = tokens.length, i = -1;\n  var result = '';\n\n  while (++i < len) {\n    if (tokens[i].type === 'inline') {\n      result += this.renderInline(tokens[i].children, options, env);\n    } else {\n      result += _rules[tokens[i].type](tokens, i, options, env, this);\n    }\n  }\n  return result;\n};\n\n/**\n * Ruler is a helper class for building responsibility chains from\n * parse rules. It allows:\n *\n *   - easy stack rules chains\n *   - getting main chain and named chains content (as arrays of functions)\n *\n * Helper methods, should not be used directly.\n * @api private\n */\n\nfunction Ruler() {\n  // List of added rules. Each element is:\n  //\n  // { name: XXX,\n  //   enabled: Boolean,\n  //   fn: Function(),\n  //   alt: [ name2, name3 ] }\n  //\n  this.__rules__ = [];\n\n  // Cached rule chains.\n  //\n  // First level - chain name, '' for default.\n  // Second level - digital anchor for fast filtering by charcodes.\n  //\n  this.__cache__ = null;\n}\n\n/**\n * Find the index of a rule by `name`.\n *\n * @param  {String} `name`\n * @return {Number} Index of the given `name`\n * @api private\n */\n\nRuler.prototype.__find__ = function (name) {\n  var len = this.__rules__.length;\n  var i = -1;\n\n  while (len--) {\n    if (this.__rules__[++i].name === name) {\n      return i;\n    }\n  }\n  return -1;\n};\n\n/**\n * Build the rules lookup cache\n *\n * @api private\n */\n\nRuler.prototype.__compile__ = function () {\n  var self = this;\n  var chains = [ '' ];\n\n  // collect unique names\n  self.__rules__.forEach(function (rule) {\n    if (!rule.enabled) {\n      return;\n    }\n\n    rule.alt.forEach(function (altName) {\n      if (chains.indexOf(altName) < 0) {\n        chains.push(altName);\n      }\n    });\n  });\n\n  self.__cache__ = {};\n\n  chains.forEach(function (chain) {\n    self.__cache__[chain] = [];\n    self.__rules__.forEach(function (rule) {\n      if (!rule.enabled) {\n        return;\n      }\n\n      if (chain && rule.alt.indexOf(chain) < 0) {\n        return;\n      }\n      self.__cache__[chain].push(rule.fn);\n    });\n  });\n};\n\n/**\n * Ruler public methods\n * ------------------------------------------------\n */\n\n/**\n * Replace rule function\n *\n * @param  {String} `name` Rule name\n * @param  {Function `fn`\n * @param  {Object} `options`\n * @api private\n */\n\nRuler.prototype.at = function (name, fn, options) {\n  var idx = this.__find__(name);\n  var opt = options || {};\n\n  if (idx === -1) {\n    throw new Error('Parser rule not found: ' + name);\n  }\n\n  this.__rules__[idx].fn = fn;\n  this.__rules__[idx].alt = opt.alt || [];\n  this.__cache__ = null;\n};\n\n/**\n * Add a rule to the chain before given the `ruleName`.\n *\n * @param  {String}   `beforeName`\n * @param  {String}   `ruleName`\n * @param  {Function} `fn`\n * @param  {Object}   `options`\n * @api private\n */\n\nRuler.prototype.before = function (beforeName, ruleName, fn, options) {\n  var idx = this.__find__(beforeName);\n  var opt = options || {};\n\n  if (idx === -1) {\n    throw new Error('Parser rule not found: ' + beforeName);\n  }\n\n  this.__rules__.splice(idx, 0, {\n    name: ruleName,\n    enabled: true,\n    fn: fn,\n    alt: opt.alt || []\n  });\n\n  this.__cache__ = null;\n};\n\n/**\n * Add a rule to the chain after the given `ruleName`.\n *\n * @param  {String}   `afterName`\n * @param  {String}   `ruleName`\n * @param  {Function} `fn`\n * @param  {Object}   `options`\n * @api private\n */\n\nRuler.prototype.after = function (afterName, ruleName, fn, options) {\n  var idx = this.__find__(afterName);\n  var opt = options || {};\n\n  if (idx === -1) {\n    throw new Error('Parser rule not found: ' + afterName);\n  }\n\n  this.__rules__.splice(idx + 1, 0, {\n    name: ruleName,\n    enabled: true,\n    fn: fn,\n    alt: opt.alt || []\n  });\n\n  this.__cache__ = null;\n};\n\n/**\n * Add a rule to the end of chain.\n *\n * @param  {String}   `ruleName`\n * @param  {Function} `fn`\n * @param  {Object}   `options`\n * @return {String}\n */\n\nRuler.prototype.push = function (ruleName, fn, options) {\n  var opt = options || {};\n\n  this.__rules__.push({\n    name: ruleName,\n    enabled: true,\n    fn: fn,\n    alt: opt.alt || []\n  });\n\n  this.__cache__ = null;\n};\n\n/**\n * Enable a rule or list of rules.\n *\n * @param  {String|Array} `list` Name or array of rule names to enable\n * @param  {Boolean} `strict` If `true`, all non listed rules will be disabled.\n * @api private\n */\n\nRuler.prototype.enable = function (list, strict) {\n  list = !Array.isArray(list)\n    ? [ list ]\n    : list;\n\n  // In strict mode disable all existing rules first\n  if (strict) {\n    this.__rules__.forEach(function (rule) {\n      rule.enabled = false;\n    });\n  }\n\n  // Search by name and enable\n  list.forEach(function (name) {\n    var idx = this.__find__(name);\n    if (idx < 0) {\n      throw new Error('Rules manager: invalid rule name ' + name);\n    }\n    this.__rules__[idx].enabled = true;\n  }, this);\n\n  this.__cache__ = null;\n};\n\n\n/**\n * Disable a rule or list of rules.\n *\n * @param  {String|Array} `list` Name or array of rule names to disable\n * @api private\n */\n\nRuler.prototype.disable = function (list) {\n  list = !Array.isArray(list)\n    ? [ list ]\n    : list;\n\n  // Search by name and disable\n  list.forEach(function (name) {\n    var idx = this.__find__(name);\n    if (idx < 0) {\n      throw new Error('Rules manager: invalid rule name ' + name);\n    }\n    this.__rules__[idx].enabled = false;\n  }, this);\n\n  this.__cache__ = null;\n};\n\n/**\n * Get a rules list as an array of functions.\n *\n * @param  {String} `chainName`\n * @return {Object}\n * @api private\n */\n\nRuler.prototype.getRules = function (chainName) {\n  if (this.__cache__ === null) {\n    this.__compile__();\n  }\n  return this.__cache__[chainName] || [];\n};\n\nfunction block(state) {\n\n  if (state.inlineMode) {\n    state.tokens.push({\n      type: 'inline',\n      content: state.src.replace(/\\n/g, ' ').trim(),\n      level: 0,\n      lines: [ 0, 1 ],\n      children: []\n    });\n\n  } else {\n    state.block.parse(state.src, state.options, state.env, state.tokens);\n  }\n}\n\n// Inline parser state\n\nfunction StateInline(src, parserInline, options, env, outTokens) {\n  this.src = src;\n  this.env = env;\n  this.options = options;\n  this.parser = parserInline;\n  this.tokens = outTokens;\n  this.pos = 0;\n  this.posMax = this.src.length;\n  this.level = 0;\n  this.pending = '';\n  this.pendingLevel = 0;\n\n  this.cache = [];        // Stores { start: end } pairs. Useful for backtrack\n                          // optimization of pairs parse (emphasis, strikes).\n\n  // Link parser state vars\n\n  this.isInLabel = false; // Set true when seek link label - we should disable\n                          // \"paired\" rules (emphasis, strikes) to not skip\n                          // tailing `]`\n\n  this.linkLevel = 0;     // Increment for each nesting link. Used to prevent\n                          // nesting in definitions\n\n  this.linkContent = '';  // Temporary storage for link url\n\n  this.labelUnmatchedScopes = 0; // Track unpaired `[` for link labels\n                                 // (backtrack optimization)\n}\n\n// Flush pending text\n//\nStateInline.prototype.pushPending = function () {\n  this.tokens.push({\n    type: 'text',\n    content: this.pending,\n    level: this.pendingLevel\n  });\n  this.pending = '';\n};\n\n// Push new token to \"stream\".\n// If pending text exists - flush it as text token\n//\nStateInline.prototype.push = function (token) {\n  if (this.pending) {\n    this.pushPending();\n  }\n\n  this.tokens.push(token);\n  this.pendingLevel = this.level;\n};\n\n// Store value to cache.\n// !!! Implementation has parser-specific optimizations\n// !!! keys MUST be integer, >= 0; values MUST be integer, > 0\n//\nStateInline.prototype.cacheSet = function (key, val) {\n  for (var i = this.cache.length; i <= key; i++) {\n    this.cache.push(0);\n  }\n\n  this.cache[key] = val;\n};\n\n// Get cache value\n//\nStateInline.prototype.cacheGet = function (key) {\n  return key < this.cache.length ? this.cache[key] : 0;\n};\n\n/**\n * Parse link labels\n *\n * This function assumes that first character (`[`) already matches;\n * returns the end of the label.\n *\n * @param  {Object} state\n * @param  {Number} start\n * @api private\n */\n\nfunction parseLinkLabel(state, start) {\n  var level, found, marker,\n      labelEnd = -1,\n      max = state.posMax,\n      oldPos = state.pos,\n      oldFlag = state.isInLabel;\n\n  if (state.isInLabel) { return -1; }\n\n  if (state.labelUnmatchedScopes) {\n    state.labelUnmatchedScopes--;\n    return -1;\n  }\n\n  state.pos = start + 1;\n  state.isInLabel = true;\n  level = 1;\n\n  while (state.pos < max) {\n    marker = state.src.charCodeAt(state.pos);\n    if (marker === 0x5B /* [ */) {\n      level++;\n    } else if (marker === 0x5D /* ] */) {\n      level--;\n      if (level === 0) {\n        found = true;\n        break;\n      }\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (found) {\n    labelEnd = state.pos;\n    state.labelUnmatchedScopes = 0;\n  } else {\n    state.labelUnmatchedScopes = level - 1;\n  }\n\n  // restore old state\n  state.pos = oldPos;\n  state.isInLabel = oldFlag;\n\n  return labelEnd;\n}\n\n// Parse abbreviation definitions, i.e. `*[abbr]: description`\n\n\nfunction parseAbbr(str, parserInline, options, env) {\n  var state, labelEnd, pos, max, label, title;\n\n  if (str.charCodeAt(0) !== 0x2A/* * */) { return -1; }\n  if (str.charCodeAt(1) !== 0x5B/* [ */) { return -1; }\n\n  if (str.indexOf(']:') === -1) { return -1; }\n\n  state = new StateInline(str, parserInline, options, env, []);\n  labelEnd = parseLinkLabel(state, 1);\n\n  if (labelEnd < 0 || str.charCodeAt(labelEnd + 1) !== 0x3A/* : */) { return -1; }\n\n  max = state.posMax;\n\n  // abbr title is always one line, so looking for ending \"\\n\" here\n  for (pos = labelEnd + 2; pos < max; pos++) {\n    if (state.src.charCodeAt(pos) === 0x0A) { break; }\n  }\n\n  label = str.slice(2, labelEnd);\n  title = str.slice(labelEnd + 2, pos).trim();\n  if (title.length === 0) { return -1; }\n  if (!env.abbreviations) { env.abbreviations = {}; }\n  // prepend ':' to avoid conflict with Object.prototype members\n  if (typeof env.abbreviations[':' + label] === 'undefined') {\n    env.abbreviations[':' + label] = title;\n  }\n\n  return pos;\n}\n\nfunction abbr(state) {\n  var tokens = state.tokens, i, l, content, pos;\n\n  if (state.inlineMode) {\n    return;\n  }\n\n  // Parse inlines\n  for (i = 1, l = tokens.length - 1; i < l; i++) {\n    if (tokens[i - 1].type === 'paragraph_open' &&\n        tokens[i].type === 'inline' &&\n        tokens[i + 1].type === 'paragraph_close') {\n\n      content = tokens[i].content;\n      while (content.length) {\n        pos = parseAbbr(content, state.inline, state.options, state.env);\n        if (pos < 0) { break; }\n        content = content.slice(pos).trim();\n      }\n\n      tokens[i].content = content;\n      if (!content.length) {\n        tokens[i - 1].tight = true;\n        tokens[i + 1].tight = true;\n      }\n    }\n  }\n}\n\nfunction normalizeLink(url) {\n  var normalized = replaceEntities(url);\n  // We shouldn't care about the result of malformed URIs,\n  // and should not throw an exception.\n  try {\n    normalized = decodeURI(normalized);\n  } catch (err) {}\n  return encodeURI(normalized);\n}\n\n/**\n * Parse link destination\n *\n *   - on success it returns a string and updates state.pos;\n *   - on failure it returns null\n *\n * @param  {Object} state\n * @param  {Number} pos\n * @api private\n */\n\nfunction parseLinkDestination(state, pos) {\n  var code, level, link,\n      start = pos,\n      max = state.posMax;\n\n  if (state.src.charCodeAt(pos) === 0x3C /* < */) {\n    pos++;\n    while (pos < max) {\n      code = state.src.charCodeAt(pos);\n      if (code === 0x0A /* \\n */) { return false; }\n      if (code === 0x3E /* > */) {\n        link = normalizeLink(unescapeMd(state.src.slice(start + 1, pos)));\n        if (!state.parser.validateLink(link)) { return false; }\n        state.pos = pos + 1;\n        state.linkContent = link;\n        return true;\n      }\n      if (code === 0x5C /* \\ */ && pos + 1 < max) {\n        pos += 2;\n        continue;\n      }\n\n      pos++;\n    }\n\n    // no closing '>'\n    return false;\n  }\n\n  // this should be ... } else { ... branch\n\n  level = 0;\n  while (pos < max) {\n    code = state.src.charCodeAt(pos);\n\n    if (code === 0x20) { break; }\n\n    // ascii control chars\n    if (code < 0x20 || code === 0x7F) { break; }\n\n    if (code === 0x5C /* \\ */ && pos + 1 < max) {\n      pos += 2;\n      continue;\n    }\n\n    if (code === 0x28 /* ( */) {\n      level++;\n      if (level > 1) { break; }\n    }\n\n    if (code === 0x29 /* ) */) {\n      level--;\n      if (level < 0) { break; }\n    }\n\n    pos++;\n  }\n\n  if (start === pos) { return false; }\n\n  link = unescapeMd(state.src.slice(start, pos));\n  if (!state.parser.validateLink(link)) { return false; }\n\n  state.linkContent = link;\n  state.pos = pos;\n  return true;\n}\n\n/**\n * Parse link title\n *\n *   - on success it returns a string and updates state.pos;\n *   - on failure it returns null\n *\n * @param  {Object} state\n * @param  {Number} pos\n * @api private\n */\n\nfunction parseLinkTitle(state, pos) {\n  var code,\n      start = pos,\n      max = state.posMax,\n      marker = state.src.charCodeAt(pos);\n\n  if (marker !== 0x22 /* \" */ && marker !== 0x27 /* ' */ && marker !== 0x28 /* ( */) { return false; }\n\n  pos++;\n\n  // if opening marker is \"(\", switch it to closing marker \")\"\n  if (marker === 0x28) { marker = 0x29; }\n\n  while (pos < max) {\n    code = state.src.charCodeAt(pos);\n    if (code === marker) {\n      state.pos = pos + 1;\n      state.linkContent = unescapeMd(state.src.slice(start + 1, pos));\n      return true;\n    }\n    if (code === 0x5C /* \\ */ && pos + 1 < max) {\n      pos += 2;\n      continue;\n    }\n\n    pos++;\n  }\n\n  return false;\n}\n\nfunction normalizeReference(str) {\n  // use .toUpperCase() instead of .toLowerCase()\n  // here to avoid a conflict with Object.prototype\n  // members (most notably, `__proto__`)\n  return str.trim().replace(/\\s+/g, ' ').toUpperCase();\n}\n\nfunction parseReference(str, parser, options, env) {\n  var state, labelEnd, pos, max, code, start, href, title, label;\n\n  if (str.charCodeAt(0) !== 0x5B/* [ */) { return -1; }\n\n  if (str.indexOf(']:') === -1) { return -1; }\n\n  state = new StateInline(str, parser, options, env, []);\n  labelEnd = parseLinkLabel(state, 0);\n\n  if (labelEnd < 0 || str.charCodeAt(labelEnd + 1) !== 0x3A/* : */) { return -1; }\n\n  max = state.posMax;\n\n  // [label]:   destination   'title'\n  //         ^^^ skip optional whitespace here\n  for (pos = labelEnd + 2; pos < max; pos++) {\n    code = state.src.charCodeAt(pos);\n    if (code !== 0x20 && code !== 0x0A) { break; }\n  }\n\n  // [label]:   destination   'title'\n  //            ^^^^^^^^^^^ parse this\n  if (!parseLinkDestination(state, pos)) { return -1; }\n  href = state.linkContent;\n  pos = state.pos;\n\n  // [label]:   destination   'title'\n  //                       ^^^ skipping those spaces\n  start = pos;\n  for (pos = pos + 1; pos < max; pos++) {\n    code = state.src.charCodeAt(pos);\n    if (code !== 0x20 && code !== 0x0A) { break; }\n  }\n\n  // [label]:   destination   'title'\n  //                          ^^^^^^^ parse this\n  if (pos < max && start !== pos && parseLinkTitle(state, pos)) {\n    title = state.linkContent;\n    pos = state.pos;\n  } else {\n    title = '';\n    pos = start;\n  }\n\n  // ensure that the end of the line is empty\n  while (pos < max && state.src.charCodeAt(pos) === 0x20/* space */) { pos++; }\n  if (pos < max && state.src.charCodeAt(pos) !== 0x0A) { return -1; }\n\n  label = normalizeReference(str.slice(1, labelEnd));\n  if (typeof env.references[label] === 'undefined') {\n    env.references[label] = { title: title, href: href };\n  }\n\n  return pos;\n}\n\n\nfunction references(state) {\n  var tokens = state.tokens, i, l, content, pos;\n\n  state.env.references = state.env.references || {};\n\n  if (state.inlineMode) {\n    return;\n  }\n\n  // Scan definitions in paragraph inlines\n  for (i = 1, l = tokens.length - 1; i < l; i++) {\n    if (tokens[i].type === 'inline' &&\n        tokens[i - 1].type === 'paragraph_open' &&\n        tokens[i + 1].type === 'paragraph_close') {\n\n      content = tokens[i].content;\n      while (content.length) {\n        pos = parseReference(content, state.inline, state.options, state.env);\n        if (pos < 0) { break; }\n        content = content.slice(pos).trim();\n      }\n\n      tokens[i].content = content;\n      if (!content.length) {\n        tokens[i - 1].tight = true;\n        tokens[i + 1].tight = true;\n      }\n    }\n  }\n}\n\nfunction inline(state) {\n  var tokens = state.tokens, tok, i, l;\n\n  // Parse inlines\n  for (i = 0, l = tokens.length; i < l; i++) {\n    tok = tokens[i];\n    if (tok.type === 'inline') {\n      state.inline.parse(tok.content, state.options, state.env, tok.children);\n    }\n  }\n}\n\nfunction footnote_block(state) {\n  var i, l, j, t, lastParagraph, list, tokens, current, currentLabel,\n      level = 0,\n      insideRef = false,\n      refTokens = {};\n\n  if (!state.env.footnotes) { return; }\n\n  state.tokens = state.tokens.filter(function(tok) {\n    if (tok.type === 'footnote_reference_open') {\n      insideRef = true;\n      current = [];\n      currentLabel = tok.label;\n      return false;\n    }\n    if (tok.type === 'footnote_reference_close') {\n      insideRef = false;\n      // prepend ':' to avoid conflict with Object.prototype members\n      refTokens[':' + currentLabel] = current;\n      return false;\n    }\n    if (insideRef) { current.push(tok); }\n    return !insideRef;\n  });\n\n  if (!state.env.footnotes.list) { return; }\n  list = state.env.footnotes.list;\n\n  state.tokens.push({\n    type: 'footnote_block_open',\n    level: level++\n  });\n  for (i = 0, l = list.length; i < l; i++) {\n    state.tokens.push({\n      type: 'footnote_open',\n      id: i,\n      level: level++\n    });\n\n    if (list[i].tokens) {\n      tokens = [];\n      tokens.push({\n        type: 'paragraph_open',\n        tight: false,\n        level: level++\n      });\n      tokens.push({\n        type: 'inline',\n        content: '',\n        level: level,\n        children: list[i].tokens\n      });\n      tokens.push({\n        type: 'paragraph_close',\n        tight: false,\n        level: --level\n      });\n    } else if (list[i].label) {\n      tokens = refTokens[':' + list[i].label];\n    }\n\n    state.tokens = state.tokens.concat(tokens);\n    if (state.tokens[state.tokens.length - 1].type === 'paragraph_close') {\n      lastParagraph = state.tokens.pop();\n    } else {\n      lastParagraph = null;\n    }\n\n    t = list[i].count > 0 ? list[i].count : 1;\n    for (j = 0; j < t; j++) {\n      state.tokens.push({\n        type: 'footnote_anchor',\n        id: i,\n        subId: j,\n        level: level\n      });\n    }\n\n    if (lastParagraph) {\n      state.tokens.push(lastParagraph);\n    }\n\n    state.tokens.push({\n      type: 'footnote_close',\n      level: --level\n    });\n  }\n  state.tokens.push({\n    type: 'footnote_block_close',\n    level: --level\n  });\n}\n\n// Enclose abbreviations in <abbr> tags\n//\n\nvar PUNCT_CHARS = ' \\n()[]\\'\".,!?-';\n\n\n// from Google closure library\n// http://closure-library.googlecode.com/git-history/docs/local_closure_goog_string_string.js.source.html#line1021\nfunction regEscape(s) {\n  return s.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1');\n}\n\n\nfunction abbr2(state) {\n  var i, j, l, tokens, token, text, nodes, pos, level, reg, m, regText,\n      blockTokens = state.tokens;\n\n  if (!state.env.abbreviations) { return; }\n  if (!state.env.abbrRegExp) {\n    regText = '(^|[' + PUNCT_CHARS.split('').map(regEscape).join('') + '])'\n            + '(' + Object.keys(state.env.abbreviations).map(function (x) {\n                      return x.substr(1);\n                    }).sort(function (a, b) {\n                      return b.length - a.length;\n                    }).map(regEscape).join('|') + ')'\n            + '($|[' + PUNCT_CHARS.split('').map(regEscape).join('') + '])';\n    state.env.abbrRegExp = new RegExp(regText, 'g');\n  }\n  reg = state.env.abbrRegExp;\n\n  for (j = 0, l = blockTokens.length; j < l; j++) {\n    if (blockTokens[j].type !== 'inline') { continue; }\n    tokens = blockTokens[j].children;\n\n    // We scan from the end, to keep position when new tags added.\n    for (i = tokens.length - 1; i >= 0; i--) {\n      token = tokens[i];\n      if (token.type !== 'text') { continue; }\n\n      pos = 0;\n      text = token.content;\n      reg.lastIndex = 0;\n      level = token.level;\n      nodes = [];\n\n      while ((m = reg.exec(text))) {\n        if (reg.lastIndex > pos) {\n          nodes.push({\n            type: 'text',\n            content: text.slice(pos, m.index + m[1].length),\n            level: level\n          });\n        }\n\n        nodes.push({\n          type: 'abbr_open',\n          title: state.env.abbreviations[':' + m[2]],\n          level: level++\n        });\n        nodes.push({\n          type: 'text',\n          content: m[2],\n          level: level\n        });\n        nodes.push({\n          type: 'abbr_close',\n          level: --level\n        });\n        pos = reg.lastIndex - m[3].length;\n      }\n\n      if (!nodes.length) { continue; }\n\n      if (pos < text.length) {\n        nodes.push({\n          type: 'text',\n          content: text.slice(pos),\n          level: level\n        });\n      }\n\n      // replace current node\n      blockTokens[j].children = tokens = [].concat(tokens.slice(0, i), nodes, tokens.slice(i + 1));\n    }\n  }\n}\n\n// Simple typographical replacements\n//\n// TODO:\n// - fractionals 1/2, 1/4, 3/4 -> \u00BD, \u00BC, \u00BE\n// - miltiplication 2 x 4 -> 2 \u00D7 4\n\nvar RARE_RE = /\\+-|\\.\\.|\\?\\?\\?\\?|!!!!|,,|--/;\n\nvar SCOPED_ABBR_RE = /\\((c|tm|r|p)\\)/ig;\nvar SCOPED_ABBR = {\n  'c': '\u00A9',\n  'r': '\u00AE',\n  'p': '\u00A7',\n  'tm': '\u2122'\n};\n\nfunction replaceScopedAbbr(str) {\n  if (str.indexOf('(') < 0) { return str; }\n\n  return str.replace(SCOPED_ABBR_RE, function(match, name) {\n    return SCOPED_ABBR[name.toLowerCase()];\n  });\n}\n\n\nfunction replace(state) {\n  var i, token, text, inlineTokens, blkIdx;\n\n  if (!state.options.typographer) { return; }\n\n  for (blkIdx = state.tokens.length - 1; blkIdx >= 0; blkIdx--) {\n\n    if (state.tokens[blkIdx].type !== 'inline') { continue; }\n\n    inlineTokens = state.tokens[blkIdx].children;\n\n    for (i = inlineTokens.length - 1; i >= 0; i--) {\n      token = inlineTokens[i];\n      if (token.type === 'text') {\n        text = token.content;\n\n        text = replaceScopedAbbr(text);\n\n        if (RARE_RE.test(text)) {\n          text = text\n            .replace(/\\+-/g, '\u00B1')\n            // .., ..., ....... -> \u2026\n            // but ?..... & !..... -> ?.. & !..\n            .replace(/\\.{2,}/g, '\u2026').replace(/([?!])\u2026/g, '$1..')\n            .replace(/([?!]){4,}/g, '$1$1$1').replace(/,{2,}/g, ',')\n            // em-dash\n            .replace(/(^|[^-])---([^-]|$)/mg, '$1\\u2014$2')\n            // en-dash\n            .replace(/(^|\\s)--(\\s|$)/mg, '$1\\u2013$2')\n            .replace(/(^|[^-\\s])--([^-\\s]|$)/mg, '$1\\u2013$2');\n        }\n\n        token.content = text;\n      }\n    }\n  }\n}\n\n// Convert straight quotation marks to typographic ones\n//\n\nvar QUOTE_TEST_RE = /['\"]/;\nvar QUOTE_RE = /['\"]/g;\nvar PUNCT_RE = /[-\\s()\\[\\]]/;\nvar APOSTROPHE = '\u2019';\n\n// This function returns true if the character at `pos`\n// could be inside a word.\nfunction isLetter(str, pos) {\n  if (pos < 0 || pos >= str.length) { return false; }\n  return !PUNCT_RE.test(str[pos]);\n}\n\n\nfunction replaceAt(str, index, ch) {\n  return str.substr(0, index) + ch + str.substr(index + 1);\n}\n\n\nfunction smartquotes(state) {\n  /*eslint max-depth:0*/\n  var i, token, text, t, pos, max, thisLevel, lastSpace, nextSpace, item,\n      canOpen, canClose, j, isSingle, blkIdx, tokens,\n      stack;\n\n  if (!state.options.typographer) { return; }\n\n  stack = [];\n\n  for (blkIdx = state.tokens.length - 1; blkIdx >= 0; blkIdx--) {\n\n    if (state.tokens[blkIdx].type !== 'inline') { continue; }\n\n    tokens = state.tokens[blkIdx].children;\n    stack.length = 0;\n\n    for (i = 0; i < tokens.length; i++) {\n      token = tokens[i];\n\n      if (token.type !== 'text' || QUOTE_TEST_RE.test(token.text)) { continue; }\n\n      thisLevel = tokens[i].level;\n\n      for (j = stack.length - 1; j >= 0; j--) {\n        if (stack[j].level <= thisLevel) { break; }\n      }\n      stack.length = j + 1;\n\n      text = token.content;\n      pos = 0;\n      max = text.length;\n\n      /*eslint no-labels:0,block-scoped-var:0*/\n      OUTER:\n      while (pos < max) {\n        QUOTE_RE.lastIndex = pos;\n        t = QUOTE_RE.exec(text);\n        if (!t) { break; }\n\n        lastSpace = !isLetter(text, t.index - 1);\n        pos = t.index + 1;\n        isSingle = (t[0] === \"'\");\n        nextSpace = !isLetter(text, pos);\n\n        if (!nextSpace && !lastSpace) {\n          // middle of word\n          if (isSingle) {\n            token.content = replaceAt(token.content, t.index, APOSTROPHE);\n          }\n          continue;\n        }\n\n        canOpen = !nextSpace;\n        canClose = !lastSpace;\n\n        if (canClose) {\n          // this could be a closing quote, rewind the stack to get a match\n          for (j = stack.length - 1; j >= 0; j--) {\n            item = stack[j];\n            if (stack[j].level < thisLevel) { break; }\n            if (item.single === isSingle && stack[j].level === thisLevel) {\n              item = stack[j];\n              if (isSingle) {\n                tokens[item.token].content = replaceAt(tokens[item.token].content, item.pos, state.options.quotes[2]);\n                token.content = replaceAt(token.content, t.index, state.options.quotes[3]);\n              } else {\n                tokens[item.token].content = replaceAt(tokens[item.token].content, item.pos, state.options.quotes[0]);\n                token.content = replaceAt(token.content, t.index, state.options.quotes[1]);\n              }\n              stack.length = j;\n              continue OUTER;\n            }\n          }\n        }\n\n        if (canOpen) {\n          stack.push({\n            token: i,\n            pos: t.index,\n            single: isSingle,\n            level: thisLevel\n          });\n        } else if (canClose && isSingle) {\n          token.content = replaceAt(token.content, t.index, APOSTROPHE);\n        }\n      }\n    }\n  }\n}\n\n/**\n * Core parser `rules`\n */\n\nvar _rules = [\n  [ 'block',          block          ],\n  [ 'abbr',           abbr           ],\n  [ 'references',     references     ],\n  [ 'inline',         inline         ],\n  [ 'footnote_tail',  footnote_block  ],\n  [ 'abbr2',          abbr2          ],\n  [ 'replacements',   replace   ],\n  [ 'smartquotes',    smartquotes    ],\n];\n\n/**\n * Class for top level (`core`) parser rules\n *\n * @api private\n */\n\nfunction Core() {\n  this.options = {};\n  this.ruler = new Ruler();\n  for (var i = 0; i < _rules.length; i++) {\n    this.ruler.push(_rules[i][0], _rules[i][1]);\n  }\n}\n\n/**\n * Process rules with the given `state`\n *\n * @param  {Object} `state`\n * @api private\n */\n\nCore.prototype.process = function (state) {\n  var i, l, rules;\n  rules = this.ruler.getRules('');\n  for (i = 0, l = rules.length; i < l; i++) {\n    rules[i](state);\n  }\n};\n\n// Parser state class\n\nfunction StateBlock(src, parser, options, env, tokens) {\n  var ch, s, start, pos, len, indent, indent_found;\n\n  this.src = src;\n\n  // Shortcuts to simplify nested calls\n  this.parser = parser;\n\n  this.options = options;\n\n  this.env = env;\n\n  //\n  // Internal state vartiables\n  //\n\n  this.tokens = tokens;\n\n  this.bMarks = [];  // line begin offsets for fast jumps\n  this.eMarks = [];  // line end offsets for fast jumps\n  this.tShift = [];  // indent for each line\n\n  // block parser variables\n  this.blkIndent  = 0; // required block content indent\n                       // (for example, if we are in list)\n  this.line       = 0; // line index in src\n  this.lineMax    = 0; // lines count\n  this.tight      = false;  // loose/tight mode for lists\n  this.parentType = 'root'; // if `list`, block parser stops on two newlines\n  this.ddIndent   = -1; // indent of the current dd block (-1 if there isn't any)\n\n  this.level = 0;\n\n  // renderer\n  this.result = '';\n\n  // Create caches\n  // Generate markers.\n  s = this.src;\n  indent = 0;\n  indent_found = false;\n\n  for (start = pos = indent = 0, len = s.length; pos < len; pos++) {\n    ch = s.charCodeAt(pos);\n\n    if (!indent_found) {\n      if (ch === 0x20/* space */) {\n        indent++;\n        continue;\n      } else {\n        indent_found = true;\n      }\n    }\n\n    if (ch === 0x0A || pos === len - 1) {\n      if (ch !== 0x0A) { pos++; }\n      this.bMarks.push(start);\n      this.eMarks.push(pos);\n      this.tShift.push(indent);\n\n      indent_found = false;\n      indent = 0;\n      start = pos + 1;\n    }\n  }\n\n  // Push fake entry to simplify cache bounds checks\n  this.bMarks.push(s.length);\n  this.eMarks.push(s.length);\n  this.tShift.push(0);\n\n  this.lineMax = this.bMarks.length - 1; // don't count last fake line\n}\n\nStateBlock.prototype.isEmpty = function isEmpty(line) {\n  return this.bMarks[line] + this.tShift[line] >= this.eMarks[line];\n};\n\nStateBlock.prototype.skipEmptyLines = function skipEmptyLines(from) {\n  for (var max = this.lineMax; from < max; from++) {\n    if (this.bMarks[from] + this.tShift[from] < this.eMarks[from]) {\n      break;\n    }\n  }\n  return from;\n};\n\n// Skip spaces from given position.\nStateBlock.prototype.skipSpaces = function skipSpaces(pos) {\n  for (var max = this.src.length; pos < max; pos++) {\n    if (this.src.charCodeAt(pos) !== 0x20/* space */) { break; }\n  }\n  return pos;\n};\n\n// Skip char codes from given position\nStateBlock.prototype.skipChars = function skipChars(pos, code) {\n  for (var max = this.src.length; pos < max; pos++) {\n    if (this.src.charCodeAt(pos) !== code) { break; }\n  }\n  return pos;\n};\n\n// Skip char codes reverse from given position - 1\nStateBlock.prototype.skipCharsBack = function skipCharsBack(pos, code, min) {\n  if (pos <= min) { return pos; }\n\n  while (pos > min) {\n    if (code !== this.src.charCodeAt(--pos)) { return pos + 1; }\n  }\n  return pos;\n};\n\n// cut lines range from source.\nStateBlock.prototype.getLines = function getLines(begin, end, indent, keepLastLF) {\n  var i, first, last, queue, shift,\n      line = begin;\n\n  if (begin >= end) {\n    return '';\n  }\n\n  // Opt: don't use push queue for single line;\n  if (line + 1 === end) {\n    first = this.bMarks[line] + Math.min(this.tShift[line], indent);\n    last = keepLastLF ? this.eMarks[line] + 1 : this.eMarks[line];\n    return this.src.slice(first, last);\n  }\n\n  queue = new Array(end - begin);\n\n  for (i = 0; line < end; line++, i++) {\n    shift = this.tShift[line];\n    if (shift > indent) { shift = indent; }\n    if (shift < 0) { shift = 0; }\n\n    first = this.bMarks[line] + shift;\n\n    if (line + 1 < end || keepLastLF) {\n      // No need for bounds check because we have fake entry on tail.\n      last = this.eMarks[line] + 1;\n    } else {\n      last = this.eMarks[line];\n    }\n\n    queue[i] = this.src.slice(first, last);\n  }\n\n  return queue.join('');\n};\n\n// Code block (4 spaces padded)\n\nfunction code(state, startLine, endLine/*, silent*/) {\n  var nextLine, last;\n\n  if (state.tShift[startLine] - state.blkIndent < 4) { return false; }\n\n  last = nextLine = startLine + 1;\n\n  while (nextLine < endLine) {\n    if (state.isEmpty(nextLine)) {\n      nextLine++;\n      continue;\n    }\n    if (state.tShift[nextLine] - state.blkIndent >= 4) {\n      nextLine++;\n      last = nextLine;\n      continue;\n    }\n    break;\n  }\n\n  state.line = nextLine;\n  state.tokens.push({\n    type: 'code',\n    content: state.getLines(startLine, last, 4 + state.blkIndent, true),\n    block: true,\n    lines: [ startLine, state.line ],\n    level: state.level\n  });\n\n  return true;\n}\n\n// fences (``` lang, ~~~ lang)\n\nfunction fences(state, startLine, endLine, silent) {\n  var marker, len, params, nextLine, mem,\n      haveEndMarker = false,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  if (pos + 3 > max) { return false; }\n\n  marker = state.src.charCodeAt(pos);\n\n  if (marker !== 0x7E/* ~ */ && marker !== 0x60 /* ` */) {\n    return false;\n  }\n\n  // scan marker length\n  mem = pos;\n  pos = state.skipChars(pos, marker);\n\n  len = pos - mem;\n\n  if (len < 3) { return false; }\n\n  params = state.src.slice(pos, max).trim();\n\n  if (params.indexOf('`') >= 0) { return false; }\n\n  // Since start is found, we can report success here in validation mode\n  if (silent) { return true; }\n\n  // search end of block\n  nextLine = startLine;\n\n  for (;;) {\n    nextLine++;\n    if (nextLine >= endLine) {\n      // unclosed block should be autoclosed by end of document.\n      // also block seems to be autoclosed by end of parent\n      break;\n    }\n\n    pos = mem = state.bMarks[nextLine] + state.tShift[nextLine];\n    max = state.eMarks[nextLine];\n\n    if (pos < max && state.tShift[nextLine] < state.blkIndent) {\n      // non-empty line with negative indent should stop the list:\n      // - ```\n      //  test\n      break;\n    }\n\n    if (state.src.charCodeAt(pos) !== marker) { continue; }\n\n    if (state.tShift[nextLine] - state.blkIndent >= 4) {\n      // closing fence should be indented less than 4 spaces\n      continue;\n    }\n\n    pos = state.skipChars(pos, marker);\n\n    // closing code fence must be at least as long as the opening one\n    if (pos - mem < len) { continue; }\n\n    // make sure tail has spaces only\n    pos = state.skipSpaces(pos);\n\n    if (pos < max) { continue; }\n\n    haveEndMarker = true;\n    // found!\n    break;\n  }\n\n  // If a fence has heading spaces, they should be removed from its inner block\n  len = state.tShift[startLine];\n\n  state.line = nextLine + (haveEndMarker ? 1 : 0);\n  state.tokens.push({\n    type: 'fence',\n    params: params,\n    content: state.getLines(startLine + 1, nextLine, len, true),\n    lines: [ startLine, state.line ],\n    level: state.level\n  });\n\n  return true;\n}\n\n// Block quotes\n\nfunction blockquote(state, startLine, endLine, silent) {\n  var nextLine, lastLineEmpty, oldTShift, oldBMarks, oldIndent, oldParentType, lines,\n      terminatorRules,\n      i, l, terminate,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  if (pos > max) { return false; }\n\n  // check the block quote marker\n  if (state.src.charCodeAt(pos++) !== 0x3E/* > */) { return false; }\n\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  // we know that it's going to be a valid blockquote,\n  // so no point trying to find the end of it in silent mode\n  if (silent) { return true; }\n\n  // skip one optional space after '>'\n  if (state.src.charCodeAt(pos) === 0x20) { pos++; }\n\n  oldIndent = state.blkIndent;\n  state.blkIndent = 0;\n\n  oldBMarks = [ state.bMarks[startLine] ];\n  state.bMarks[startLine] = pos;\n\n  // check if we have an empty blockquote\n  pos = pos < max ? state.skipSpaces(pos) : pos;\n  lastLineEmpty = pos >= max;\n\n  oldTShift = [ state.tShift[startLine] ];\n  state.tShift[startLine] = pos - state.bMarks[startLine];\n\n  terminatorRules = state.parser.ruler.getRules('blockquote');\n\n  // Search the end of the block\n  //\n  // Block ends with either:\n  //  1. an empty line outside:\n  //     ```\n  //     > test\n  //\n  //     ```\n  //  2. an empty line inside:\n  //     ```\n  //     >\n  //     test\n  //     ```\n  //  3. another tag\n  //     ```\n  //     > test\n  //      - - -\n  //     ```\n  for (nextLine = startLine + 1; nextLine < endLine; nextLine++) {\n    pos = state.bMarks[nextLine] + state.tShift[nextLine];\n    max = state.eMarks[nextLine];\n\n    if (pos >= max) {\n      // Case 1: line is not inside the blockquote, and this line is empty.\n      break;\n    }\n\n    if (state.src.charCodeAt(pos++) === 0x3E/* > */) {\n      // This line is inside the blockquote.\n\n      // skip one optional space after '>'\n      if (state.src.charCodeAt(pos) === 0x20) { pos++; }\n\n      oldBMarks.push(state.bMarks[nextLine]);\n      state.bMarks[nextLine] = pos;\n\n      pos = pos < max ? state.skipSpaces(pos) : pos;\n      lastLineEmpty = pos >= max;\n\n      oldTShift.push(state.tShift[nextLine]);\n      state.tShift[nextLine] = pos - state.bMarks[nextLine];\n      continue;\n    }\n\n    // Case 2: line is not inside the blockquote, and the last line was empty.\n    if (lastLineEmpty) { break; }\n\n    // Case 3: another tag found.\n    terminate = false;\n    for (i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n    if (terminate) { break; }\n\n    oldBMarks.push(state.bMarks[nextLine]);\n    oldTShift.push(state.tShift[nextLine]);\n\n    // A negative number means that this is a paragraph continuation;\n    //\n    // Any negative number will do the job here, but it's better for it\n    // to be large enough to make any bugs obvious.\n    state.tShift[nextLine] = -1337;\n  }\n\n  oldParentType = state.parentType;\n  state.parentType = 'blockquote';\n  state.tokens.push({\n    type: 'blockquote_open',\n    lines: lines = [ startLine, 0 ],\n    level: state.level++\n  });\n  state.parser.tokenize(state, startLine, nextLine);\n  state.tokens.push({\n    type: 'blockquote_close',\n    level: --state.level\n  });\n  state.parentType = oldParentType;\n  lines[1] = state.line;\n\n  // Restore original tShift; this might not be necessary since the parser\n  // has already been here, but just to make sure we can do that.\n  for (i = 0; i < oldTShift.length; i++) {\n    state.bMarks[i + startLine] = oldBMarks[i];\n    state.tShift[i + startLine] = oldTShift[i];\n  }\n  state.blkIndent = oldIndent;\n\n  return true;\n}\n\n// Horizontal rule\n\nfunction hr(state, startLine, endLine, silent) {\n  var marker, cnt, ch,\n      pos = state.bMarks[startLine],\n      max = state.eMarks[startLine];\n\n  pos += state.tShift[startLine];\n\n  if (pos > max) { return false; }\n\n  marker = state.src.charCodeAt(pos++);\n\n  // Check hr marker\n  if (marker !== 0x2A/* * */ &&\n      marker !== 0x2D/* - */ &&\n      marker !== 0x5F/* _ */) {\n    return false;\n  }\n\n  // markers can be mixed with spaces, but there should be at least 3 one\n\n  cnt = 1;\n  while (pos < max) {\n    ch = state.src.charCodeAt(pos++);\n    if (ch !== marker && ch !== 0x20/* space */) { return false; }\n    if (ch === marker) { cnt++; }\n  }\n\n  if (cnt < 3) { return false; }\n\n  if (silent) { return true; }\n\n  state.line = startLine + 1;\n  state.tokens.push({\n    type: 'hr',\n    lines: [ startLine, state.line ],\n    level: state.level\n  });\n\n  return true;\n}\n\n// Lists\n\n// Search `[-+*][\\n ]`, returns next pos arter marker on success\n// or -1 on fail.\nfunction skipBulletListMarker(state, startLine) {\n  var marker, pos, max;\n\n  pos = state.bMarks[startLine] + state.tShift[startLine];\n  max = state.eMarks[startLine];\n\n  if (pos >= max) { return -1; }\n\n  marker = state.src.charCodeAt(pos++);\n  // Check bullet\n  if (marker !== 0x2A/* * */ &&\n      marker !== 0x2D/* - */ &&\n      marker !== 0x2B/* + */) {\n    return -1;\n  }\n\n  if (pos < max && state.src.charCodeAt(pos) !== 0x20) {\n    // \" 1.test \" - is not a list item\n    return -1;\n  }\n\n  return pos;\n}\n\n// Search `\\d+[.)][\\n ]`, returns next pos arter marker on success\n// or -1 on fail.\nfunction skipOrderedListMarker(state, startLine) {\n  var ch,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  if (pos + 1 >= max) { return -1; }\n\n  ch = state.src.charCodeAt(pos++);\n\n  if (ch < 0x30/* 0 */ || ch > 0x39/* 9 */) { return -1; }\n\n  for (;;) {\n    // EOL -> fail\n    if (pos >= max) { return -1; }\n\n    ch = state.src.charCodeAt(pos++);\n\n    if (ch >= 0x30/* 0 */ && ch <= 0x39/* 9 */) {\n      continue;\n    }\n\n    // found valid marker\n    if (ch === 0x29/* ) */ || ch === 0x2e/* . */) {\n      break;\n    }\n\n    return -1;\n  }\n\n\n  if (pos < max && state.src.charCodeAt(pos) !== 0x20/* space */) {\n    // \" 1.test \" - is not a list item\n    return -1;\n  }\n  return pos;\n}\n\nfunction markTightParagraphs(state, idx) {\n  var i, l,\n      level = state.level + 2;\n\n  for (i = idx + 2, l = state.tokens.length - 2; i < l; i++) {\n    if (state.tokens[i].level === level && state.tokens[i].type === 'paragraph_open') {\n      state.tokens[i + 2].tight = true;\n      state.tokens[i].tight = true;\n      i += 2;\n    }\n  }\n}\n\n\nfunction list(state, startLine, endLine, silent) {\n  var nextLine,\n      indent,\n      oldTShift,\n      oldIndent,\n      oldTight,\n      oldParentType,\n      start,\n      posAfterMarker,\n      max,\n      indentAfterMarker,\n      markerValue,\n      markerCharCode,\n      isOrdered,\n      contentStart,\n      listTokIdx,\n      prevEmptyEnd,\n      listLines,\n      itemLines,\n      tight = true,\n      terminatorRules,\n      i, l, terminate;\n\n  // Detect list type and position after marker\n  if ((posAfterMarker = skipOrderedListMarker(state, startLine)) >= 0) {\n    isOrdered = true;\n  } else if ((posAfterMarker = skipBulletListMarker(state, startLine)) >= 0) {\n    isOrdered = false;\n  } else {\n    return false;\n  }\n\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  // We should terminate list on style change. Remember first one to compare.\n  markerCharCode = state.src.charCodeAt(posAfterMarker - 1);\n\n  // For validation mode we can terminate immediately\n  if (silent) { return true; }\n\n  // Start list\n  listTokIdx = state.tokens.length;\n\n  if (isOrdered) {\n    start = state.bMarks[startLine] + state.tShift[startLine];\n    markerValue = Number(state.src.substr(start, posAfterMarker - start - 1));\n\n    state.tokens.push({\n      type: 'ordered_list_open',\n      order: markerValue,\n      lines: listLines = [ startLine, 0 ],\n      level: state.level++\n    });\n\n  } else {\n    state.tokens.push({\n      type: 'bullet_list_open',\n      lines: listLines = [ startLine, 0 ],\n      level: state.level++\n    });\n  }\n\n  //\n  // Iterate list items\n  //\n\n  nextLine = startLine;\n  prevEmptyEnd = false;\n  terminatorRules = state.parser.ruler.getRules('list');\n\n  while (nextLine < endLine) {\n    contentStart = state.skipSpaces(posAfterMarker);\n    max = state.eMarks[nextLine];\n\n    if (contentStart >= max) {\n      // trimming space in \"-    \\n  3\" case, indent is 1 here\n      indentAfterMarker = 1;\n    } else {\n      indentAfterMarker = contentStart - posAfterMarker;\n    }\n\n    // If we have more than 4 spaces, the indent is 1\n    // (the rest is just indented code block)\n    if (indentAfterMarker > 4) { indentAfterMarker = 1; }\n\n    // If indent is less than 1, assume that it's one, example:\n    //  \"-\\n  test\"\n    if (indentAfterMarker < 1) { indentAfterMarker = 1; }\n\n    // \"  -  test\"\n    //  ^^^^^ - calculating total length of this thing\n    indent = (posAfterMarker - state.bMarks[nextLine]) + indentAfterMarker;\n\n    // Run subparser & write tokens\n    state.tokens.push({\n      type: 'list_item_open',\n      lines: itemLines = [ startLine, 0 ],\n      level: state.level++\n    });\n\n    oldIndent = state.blkIndent;\n    oldTight = state.tight;\n    oldTShift = state.tShift[startLine];\n    oldParentType = state.parentType;\n    state.tShift[startLine] = contentStart - state.bMarks[startLine];\n    state.blkIndent = indent;\n    state.tight = true;\n    state.parentType = 'list';\n\n    state.parser.tokenize(state, startLine, endLine, true);\n\n    // If any of list item is tight, mark list as tight\n    if (!state.tight || prevEmptyEnd) {\n      tight = false;\n    }\n    // Item become loose if finish with empty line,\n    // but we should filter last element, because it means list finish\n    prevEmptyEnd = (state.line - startLine) > 1 && state.isEmpty(state.line - 1);\n\n    state.blkIndent = oldIndent;\n    state.tShift[startLine] = oldTShift;\n    state.tight = oldTight;\n    state.parentType = oldParentType;\n\n    state.tokens.push({\n      type: 'list_item_close',\n      level: --state.level\n    });\n\n    nextLine = startLine = state.line;\n    itemLines[1] = nextLine;\n    contentStart = state.bMarks[startLine];\n\n    if (nextLine >= endLine) { break; }\n\n    if (state.isEmpty(nextLine)) {\n      break;\n    }\n\n    //\n    // Try to check if list is terminated or continued.\n    //\n    if (state.tShift[nextLine] < state.blkIndent) { break; }\n\n    // fail if terminating block found\n    terminate = false;\n    for (i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n    if (terminate) { break; }\n\n    // fail if list has another type\n    if (isOrdered) {\n      posAfterMarker = skipOrderedListMarker(state, nextLine);\n      if (posAfterMarker < 0) { break; }\n    } else {\n      posAfterMarker = skipBulletListMarker(state, nextLine);\n      if (posAfterMarker < 0) { break; }\n    }\n\n    if (markerCharCode !== state.src.charCodeAt(posAfterMarker - 1)) { break; }\n  }\n\n  // Finilize list\n  state.tokens.push({\n    type: isOrdered ? 'ordered_list_close' : 'bullet_list_close',\n    level: --state.level\n  });\n  listLines[1] = nextLine;\n\n  state.line = nextLine;\n\n  // mark paragraphs tight if needed\n  if (tight) {\n    markTightParagraphs(state, listTokIdx);\n  }\n\n  return true;\n}\n\n// Process footnote reference list\n\nfunction footnote(state, startLine, endLine, silent) {\n  var oldBMark, oldTShift, oldParentType, pos, label,\n      start = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  // line should be at least 5 chars - \"[^x]:\"\n  if (start + 4 > max) { return false; }\n\n  if (state.src.charCodeAt(start) !== 0x5B/* [ */) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x5E/* ^ */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  for (pos = start + 2; pos < max; pos++) {\n    if (state.src.charCodeAt(pos) === 0x20) { return false; }\n    if (state.src.charCodeAt(pos) === 0x5D /* ] */) {\n      break;\n    }\n  }\n\n  if (pos === start + 2) { return false; } // no empty footnote labels\n  if (pos + 1 >= max || state.src.charCodeAt(++pos) !== 0x3A /* : */) { return false; }\n  if (silent) { return true; }\n  pos++;\n\n  if (!state.env.footnotes) { state.env.footnotes = {}; }\n  if (!state.env.footnotes.refs) { state.env.footnotes.refs = {}; }\n  label = state.src.slice(start + 2, pos - 2);\n  state.env.footnotes.refs[':' + label] = -1;\n\n  state.tokens.push({\n    type: 'footnote_reference_open',\n    label: label,\n    level: state.level++\n  });\n\n  oldBMark = state.bMarks[startLine];\n  oldTShift = state.tShift[startLine];\n  oldParentType = state.parentType;\n  state.tShift[startLine] = state.skipSpaces(pos) - pos;\n  state.bMarks[startLine] = pos;\n  state.blkIndent += 4;\n  state.parentType = 'footnote';\n\n  if (state.tShift[startLine] < state.blkIndent) {\n    state.tShift[startLine] += state.blkIndent;\n    state.bMarks[startLine] -= state.blkIndent;\n  }\n\n  state.parser.tokenize(state, startLine, endLine, true);\n\n  state.parentType = oldParentType;\n  state.blkIndent -= 4;\n  state.tShift[startLine] = oldTShift;\n  state.bMarks[startLine] = oldBMark;\n\n  state.tokens.push({\n    type: 'footnote_reference_close',\n    level: --state.level\n  });\n\n  return true;\n}\n\n// heading (#, ##, ...)\n\nfunction heading(state, startLine, endLine, silent) {\n  var ch, level, tmp,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  if (pos >= max) { return false; }\n\n  ch  = state.src.charCodeAt(pos);\n\n  if (ch !== 0x23/* # */ || pos >= max) { return false; }\n\n  // count heading level\n  level = 1;\n  ch = state.src.charCodeAt(++pos);\n  while (ch === 0x23/* # */ && pos < max && level <= 6) {\n    level++;\n    ch = state.src.charCodeAt(++pos);\n  }\n\n  if (level > 6 || (pos < max && ch !== 0x20/* space */)) { return false; }\n\n  if (silent) { return true; }\n\n  // Let's cut tails like '    ###  ' from the end of string\n\n  max = state.skipCharsBack(max, 0x20, pos); // space\n  tmp = state.skipCharsBack(max, 0x23, pos); // #\n  if (tmp > pos && state.src.charCodeAt(tmp - 1) === 0x20/* space */) {\n    max = tmp;\n  }\n\n  state.line = startLine + 1;\n\n  state.tokens.push({ type: 'heading_open',\n    hLevel: level,\n    lines: [ startLine, state.line ],\n    level: state.level\n  });\n\n  // only if header is not empty\n  if (pos < max) {\n    state.tokens.push({\n      type: 'inline',\n      content: state.src.slice(pos, max).trim(),\n      level: state.level + 1,\n      lines: [ startLine, state.line ],\n      children: []\n    });\n  }\n  state.tokens.push({ type: 'heading_close', hLevel: level, level: state.level });\n\n  return true;\n}\n\n// lheading (---, ===)\n\nfunction lheading(state, startLine, endLine/*, silent*/) {\n  var marker, pos, max,\n      next = startLine + 1;\n\n  if (next >= endLine) { return false; }\n  if (state.tShift[next] < state.blkIndent) { return false; }\n\n  // Scan next line\n\n  if (state.tShift[next] - state.blkIndent > 3) { return false; }\n\n  pos = state.bMarks[next] + state.tShift[next];\n  max = state.eMarks[next];\n\n  if (pos >= max) { return false; }\n\n  marker = state.src.charCodeAt(pos);\n\n  if (marker !== 0x2D/* - */ && marker !== 0x3D/* = */) { return false; }\n\n  pos = state.skipChars(pos, marker);\n\n  pos = state.skipSpaces(pos);\n\n  if (pos < max) { return false; }\n\n  pos = state.bMarks[startLine] + state.tShift[startLine];\n\n  state.line = next + 1;\n  state.tokens.push({\n    type: 'heading_open',\n    hLevel: marker === 0x3D/* = */ ? 1 : 2,\n    lines: [ startLine, state.line ],\n    level: state.level\n  });\n  state.tokens.push({\n    type: 'inline',\n    content: state.src.slice(pos, state.eMarks[startLine]).trim(),\n    level: state.level + 1,\n    lines: [ startLine, state.line - 1 ],\n    children: []\n  });\n  state.tokens.push({\n    type: 'heading_close',\n    hLevel: marker === 0x3D/* = */ ? 1 : 2,\n    level: state.level\n  });\n\n  return true;\n}\n\n// List of valid html blocks names, accorting to commonmark spec\n// http://jgm.github.io/CommonMark/spec.html#html-blocks\n\nvar html_blocks = {};\n\n[\n  'article',\n  'aside',\n  'button',\n  'blockquote',\n  'body',\n  'canvas',\n  'caption',\n  'col',\n  'colgroup',\n  'dd',\n  'div',\n  'dl',\n  'dt',\n  'embed',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'footer',\n  'form',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'header',\n  'hgroup',\n  'hr',\n  'iframe',\n  'li',\n  'map',\n  'object',\n  'ol',\n  'output',\n  'p',\n  'pre',\n  'progress',\n  'script',\n  'section',\n  'style',\n  'table',\n  'tbody',\n  'td',\n  'textarea',\n  'tfoot',\n  'th',\n  'tr',\n  'thead',\n  'ul',\n  'video'\n].forEach(function (name) { html_blocks[name] = true; });\n\n// HTML block\n\n\nvar HTML_TAG_OPEN_RE = /^<([a-zA-Z]{1,15})[\\s\\/>]/;\nvar HTML_TAG_CLOSE_RE = /^<\\/([a-zA-Z]{1,15})[\\s>]/;\n\nfunction isLetter$1(ch) {\n  /*eslint no-bitwise:0*/\n  var lc = ch | 0x20; // to lower case\n  return (lc >= 0x61/* a */) && (lc <= 0x7a/* z */);\n}\n\nfunction htmlblock(state, startLine, endLine, silent) {\n  var ch, match, nextLine,\n      pos = state.bMarks[startLine],\n      max = state.eMarks[startLine],\n      shift = state.tShift[startLine];\n\n  pos += shift;\n\n  if (!state.options.html) { return false; }\n\n  if (shift > 3 || pos + 2 >= max) { return false; }\n\n  if (state.src.charCodeAt(pos) !== 0x3C/* < */) { return false; }\n\n  ch = state.src.charCodeAt(pos + 1);\n\n  if (ch === 0x21/* ! */ || ch === 0x3F/* ? */) {\n    // Directive start / comment start / processing instruction start\n    if (silent) { return true; }\n\n  } else if (ch === 0x2F/* / */ || isLetter$1(ch)) {\n\n    // Probably start or end of tag\n    if (ch === 0x2F/* \\ */) {\n      // closing tag\n      match = state.src.slice(pos, max).match(HTML_TAG_CLOSE_RE);\n      if (!match) { return false; }\n    } else {\n      // opening tag\n      match = state.src.slice(pos, max).match(HTML_TAG_OPEN_RE);\n      if (!match) { return false; }\n    }\n    // Make sure tag name is valid\n    if (html_blocks[match[1].toLowerCase()] !== true) { return false; }\n    if (silent) { return true; }\n\n  } else {\n    return false;\n  }\n\n  // If we are here - we detected HTML block.\n  // Let's roll down till empty line (block end).\n  nextLine = startLine + 1;\n  while (nextLine < state.lineMax && !state.isEmpty(nextLine)) {\n    nextLine++;\n  }\n\n  state.line = nextLine;\n  state.tokens.push({\n    type: 'htmlblock',\n    level: state.level,\n    lines: [ startLine, state.line ],\n    content: state.getLines(startLine, nextLine, 0, true)\n  });\n\n  return true;\n}\n\n// GFM table, non-standard\n\nfunction getLine(state, line) {\n  var pos = state.bMarks[line] + state.blkIndent,\n      max = state.eMarks[line];\n\n  return state.src.substr(pos, max - pos);\n}\n\nfunction table(state, startLine, endLine, silent) {\n  var ch, lineText, pos, i, nextLine, rows, cell,\n      aligns, t, tableLines, tbodyLines;\n\n  // should have at least three lines\n  if (startLine + 2 > endLine) { return false; }\n\n  nextLine = startLine + 1;\n\n  if (state.tShift[nextLine] < state.blkIndent) { return false; }\n\n  // first character of the second line should be '|' or '-'\n\n  pos = state.bMarks[nextLine] + state.tShift[nextLine];\n  if (pos >= state.eMarks[nextLine]) { return false; }\n\n  ch = state.src.charCodeAt(pos);\n  if (ch !== 0x7C/* | */ && ch !== 0x2D/* - */ && ch !== 0x3A/* : */) { return false; }\n\n  lineText = getLine(state, startLine + 1);\n  if (!/^[-:| ]+$/.test(lineText)) { return false; }\n\n  rows = lineText.split('|');\n  if (rows <= 2) { return false; }\n  aligns = [];\n  for (i = 0; i < rows.length; i++) {\n    t = rows[i].trim();\n    if (!t) {\n      // allow empty columns before and after table, but not in between columns;\n      // e.g. allow ` |---| `, disallow ` ---||--- `\n      if (i === 0 || i === rows.length - 1) {\n        continue;\n      } else {\n        return false;\n      }\n    }\n\n    if (!/^:?-+:?$/.test(t)) { return false; }\n    if (t.charCodeAt(t.length - 1) === 0x3A/* : */) {\n      aligns.push(t.charCodeAt(0) === 0x3A/* : */ ? 'center' : 'right');\n    } else if (t.charCodeAt(0) === 0x3A/* : */) {\n      aligns.push('left');\n    } else {\n      aligns.push('');\n    }\n  }\n\n  lineText = getLine(state, startLine).trim();\n  if (lineText.indexOf('|') === -1) { return false; }\n  rows = lineText.replace(/^\\||\\|$/g, '').split('|');\n  if (aligns.length !== rows.length) { return false; }\n  if (silent) { return true; }\n\n  state.tokens.push({\n    type: 'table_open',\n    lines: tableLines = [ startLine, 0 ],\n    level: state.level++\n  });\n  state.tokens.push({\n    type: 'thead_open',\n    lines: [ startLine, startLine + 1 ],\n    level: state.level++\n  });\n\n  state.tokens.push({\n    type: 'tr_open',\n    lines: [ startLine, startLine + 1 ],\n    level: state.level++\n  });\n  for (i = 0; i < rows.length; i++) {\n    state.tokens.push({\n      type: 'th_open',\n      align: aligns[i],\n      lines: [ startLine, startLine + 1 ],\n      level: state.level++\n    });\n    state.tokens.push({\n      type: 'inline',\n      content: rows[i].trim(),\n      lines: [ startLine, startLine + 1 ],\n      level: state.level,\n      children: []\n    });\n    state.tokens.push({ type: 'th_close', level: --state.level });\n  }\n  state.tokens.push({ type: 'tr_close', level: --state.level });\n  state.tokens.push({ type: 'thead_close', level: --state.level });\n\n  state.tokens.push({\n    type: 'tbody_open',\n    lines: tbodyLines = [ startLine + 2, 0 ],\n    level: state.level++\n  });\n\n  for (nextLine = startLine + 2; nextLine < endLine; nextLine++) {\n    if (state.tShift[nextLine] < state.blkIndent) { break; }\n\n    lineText = getLine(state, nextLine).trim();\n    if (lineText.indexOf('|') === -1) { break; }\n    rows = lineText.replace(/^\\||\\|$/g, '').split('|');\n\n    state.tokens.push({ type: 'tr_open', level: state.level++ });\n    for (i = 0; i < rows.length; i++) {\n      state.tokens.push({ type: 'td_open', align: aligns[i], level: state.level++ });\n      // 0x7c === '|'\n      cell = rows[i].substring(\n          rows[i].charCodeAt(0) === 0x7c ? 1 : 0,\n          rows[i].charCodeAt(rows[i].length - 1) === 0x7c ? rows[i].length - 1 : rows[i].length\n      ).trim();\n      state.tokens.push({\n        type: 'inline',\n        content: cell,\n        level: state.level,\n        children: []\n      });\n      state.tokens.push({ type: 'td_close', level: --state.level });\n    }\n    state.tokens.push({ type: 'tr_close', level: --state.level });\n  }\n  state.tokens.push({ type: 'tbody_close', level: --state.level });\n  state.tokens.push({ type: 'table_close', level: --state.level });\n\n  tableLines[1] = tbodyLines[1] = nextLine;\n  state.line = nextLine;\n  return true;\n}\n\n// Definition lists\n\n// Search `[:~][\\n ]`, returns next pos after marker on success\n// or -1 on fail.\nfunction skipMarker(state, line) {\n  var pos, marker,\n      start = state.bMarks[line] + state.tShift[line],\n      max = state.eMarks[line];\n\n  if (start >= max) { return -1; }\n\n  // Check bullet\n  marker = state.src.charCodeAt(start++);\n  if (marker !== 0x7E/* ~ */ && marker !== 0x3A/* : */) { return -1; }\n\n  pos = state.skipSpaces(start);\n\n  // require space after \":\"\n  if (start === pos) { return -1; }\n\n  // no empty definitions, e.g. \"  : \"\n  if (pos >= max) { return -1; }\n\n  return pos;\n}\n\nfunction markTightParagraphs$1(state, idx) {\n  var i, l,\n      level = state.level + 2;\n\n  for (i = idx + 2, l = state.tokens.length - 2; i < l; i++) {\n    if (state.tokens[i].level === level && state.tokens[i].type === 'paragraph_open') {\n      state.tokens[i + 2].tight = true;\n      state.tokens[i].tight = true;\n      i += 2;\n    }\n  }\n}\n\nfunction deflist(state, startLine, endLine, silent) {\n  var contentStart,\n      ddLine,\n      dtLine,\n      itemLines,\n      listLines,\n      listTokIdx,\n      nextLine,\n      oldIndent,\n      oldDDIndent,\n      oldParentType,\n      oldTShift,\n      oldTight,\n      prevEmptyEnd,\n      tight;\n\n  if (silent) {\n    // quirk: validation mode validates a dd block only, not a whole deflist\n    if (state.ddIndent < 0) { return false; }\n    return skipMarker(state, startLine) >= 0;\n  }\n\n  nextLine = startLine + 1;\n  if (state.isEmpty(nextLine)) {\n    if (++nextLine > endLine) { return false; }\n  }\n\n  if (state.tShift[nextLine] < state.blkIndent) { return false; }\n  contentStart = skipMarker(state, nextLine);\n  if (contentStart < 0) { return false; }\n\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  // Start list\n  listTokIdx = state.tokens.length;\n\n  state.tokens.push({\n    type: 'dl_open',\n    lines: listLines = [ startLine, 0 ],\n    level: state.level++\n  });\n\n  //\n  // Iterate list items\n  //\n\n  dtLine = startLine;\n  ddLine = nextLine;\n\n  // One definition list can contain multiple DTs,\n  // and one DT can be followed by multiple DDs.\n  //\n  // Thus, there is two loops here, and label is\n  // needed to break out of the second one\n  //\n  /*eslint no-labels:0,block-scoped-var:0*/\n  OUTER:\n  for (;;) {\n    tight = true;\n    prevEmptyEnd = false;\n\n    state.tokens.push({\n      type: 'dt_open',\n      lines: [ dtLine, dtLine ],\n      level: state.level++\n    });\n    state.tokens.push({\n      type: 'inline',\n      content: state.getLines(dtLine, dtLine + 1, state.blkIndent, false).trim(),\n      level: state.level + 1,\n      lines: [ dtLine, dtLine ],\n      children: []\n    });\n    state.tokens.push({\n      type: 'dt_close',\n      level: --state.level\n    });\n\n    for (;;) {\n      state.tokens.push({\n        type: 'dd_open',\n        lines: itemLines = [ nextLine, 0 ],\n        level: state.level++\n      });\n\n      oldTight = state.tight;\n      oldDDIndent = state.ddIndent;\n      oldIndent = state.blkIndent;\n      oldTShift = state.tShift[ddLine];\n      oldParentType = state.parentType;\n      state.blkIndent = state.ddIndent = state.tShift[ddLine] + 2;\n      state.tShift[ddLine] = contentStart - state.bMarks[ddLine];\n      state.tight = true;\n      state.parentType = 'deflist';\n\n      state.parser.tokenize(state, ddLine, endLine, true);\n\n      // If any of list item is tight, mark list as tight\n      if (!state.tight || prevEmptyEnd) {\n        tight = false;\n      }\n      // Item become loose if finish with empty line,\n      // but we should filter last element, because it means list finish\n      prevEmptyEnd = (state.line - ddLine) > 1 && state.isEmpty(state.line - 1);\n\n      state.tShift[ddLine] = oldTShift;\n      state.tight = oldTight;\n      state.parentType = oldParentType;\n      state.blkIndent = oldIndent;\n      state.ddIndent = oldDDIndent;\n\n      state.tokens.push({\n        type: 'dd_close',\n        level: --state.level\n      });\n\n      itemLines[1] = nextLine = state.line;\n\n      if (nextLine >= endLine) { break OUTER; }\n\n      if (state.tShift[nextLine] < state.blkIndent) { break OUTER; }\n      contentStart = skipMarker(state, nextLine);\n      if (contentStart < 0) { break; }\n\n      ddLine = nextLine;\n\n      // go to the next loop iteration:\n      // insert DD tag and repeat checking\n    }\n\n    if (nextLine >= endLine) { break; }\n    dtLine = nextLine;\n\n    if (state.isEmpty(dtLine)) { break; }\n    if (state.tShift[dtLine] < state.blkIndent) { break; }\n\n    ddLine = dtLine + 1;\n    if (ddLine >= endLine) { break; }\n    if (state.isEmpty(ddLine)) { ddLine++; }\n    if (ddLine >= endLine) { break; }\n\n    if (state.tShift[ddLine] < state.blkIndent) { break; }\n    contentStart = skipMarker(state, ddLine);\n    if (contentStart < 0) { break; }\n\n    // go to the next loop iteration:\n    // insert DT and DD tags and repeat checking\n  }\n\n  // Finilize list\n  state.tokens.push({\n    type: 'dl_close',\n    level: --state.level\n  });\n  listLines[1] = nextLine;\n\n  state.line = nextLine;\n\n  // mark paragraphs tight if needed\n  if (tight) {\n    markTightParagraphs$1(state, listTokIdx);\n  }\n\n  return true;\n}\n\n// Paragraph\n\nfunction paragraph(state, startLine/*, endLine*/) {\n  var endLine, content, terminate, i, l,\n      nextLine = startLine + 1,\n      terminatorRules;\n\n  endLine = state.lineMax;\n\n  // jump line-by-line until empty one or EOF\n  if (nextLine < endLine && !state.isEmpty(nextLine)) {\n    terminatorRules = state.parser.ruler.getRules('paragraph');\n\n    for (; nextLine < endLine && !state.isEmpty(nextLine); nextLine++) {\n      // this would be a code block normally, but after paragraph\n      // it's considered a lazy continuation regardless of what's there\n      if (state.tShift[nextLine] - state.blkIndent > 3) { continue; }\n\n      // Some tags can terminate paragraph without empty line.\n      terminate = false;\n      for (i = 0, l = terminatorRules.length; i < l; i++) {\n        if (terminatorRules[i](state, nextLine, endLine, true)) {\n          terminate = true;\n          break;\n        }\n      }\n      if (terminate) { break; }\n    }\n  }\n\n  content = state.getLines(startLine, nextLine, state.blkIndent, false).trim();\n\n  state.line = nextLine;\n  if (content.length) {\n    state.tokens.push({\n      type: 'paragraph_open',\n      tight: false,\n      lines: [ startLine, state.line ],\n      level: state.level\n    });\n    state.tokens.push({\n      type: 'inline',\n      content: content,\n      level: state.level + 1,\n      lines: [ startLine, state.line ],\n      children: []\n    });\n    state.tokens.push({\n      type: 'paragraph_close',\n      tight: false,\n      level: state.level\n    });\n  }\n\n  return true;\n}\n\n/**\n * Parser rules\n */\n\nvar _rules$1 = [\n  [ 'code',       code ],\n  [ 'fences',     fences,     [ 'paragraph', 'blockquote', 'list' ] ],\n  [ 'blockquote', blockquote, [ 'paragraph', 'blockquote', 'list' ] ],\n  [ 'hr',         hr,         [ 'paragraph', 'blockquote', 'list' ] ],\n  [ 'list',       list,       [ 'paragraph', 'blockquote' ] ],\n  [ 'footnote',   footnote,   [ 'paragraph' ] ],\n  [ 'heading',    heading,    [ 'paragraph', 'blockquote' ] ],\n  [ 'lheading',   lheading ],\n  [ 'htmlblock',  htmlblock,  [ 'paragraph', 'blockquote' ] ],\n  [ 'table',      table,      [ 'paragraph' ] ],\n  [ 'deflist',    deflist,    [ 'paragraph' ] ],\n  [ 'paragraph',  paragraph ]\n];\n\n/**\n * Block Parser class\n *\n * @api private\n */\n\nfunction ParserBlock() {\n  this.ruler = new Ruler();\n  for (var i = 0; i < _rules$1.length; i++) {\n    this.ruler.push(_rules$1[i][0], _rules$1[i][1], {\n      alt: (_rules$1[i][2] || []).slice()\n    });\n  }\n}\n\n/**\n * Generate tokens for the given input range.\n *\n * @param  {Object} `state` Has properties like `src`, `parser`, `options` etc\n * @param  {Number} `startLine`\n * @param  {Number} `endLine`\n * @api private\n */\n\nParserBlock.prototype.tokenize = function (state, startLine, endLine) {\n  var rules = this.ruler.getRules('');\n  var len = rules.length;\n  var line = startLine;\n  var hasEmptyLines = false;\n  var ok, i;\n\n  while (line < endLine) {\n    state.line = line = state.skipEmptyLines(line);\n    if (line >= endLine) {\n      break;\n    }\n\n    // Termination condition for nested calls.\n    // Nested calls currently used for blockquotes & lists\n    if (state.tShift[line] < state.blkIndent) {\n      break;\n    }\n\n    // Try all possible rules.\n    // On success, rule should:\n    //\n    // - update `state.line`\n    // - update `state.tokens`\n    // - return true\n\n    for (i = 0; i < len; i++) {\n      ok = rules[i](state, line, endLine, false);\n      if (ok) {\n        break;\n      }\n    }\n\n    // set state.tight iff we had an empty line before current tag\n    // i.e. latest empty line should not count\n    state.tight = !hasEmptyLines;\n\n    // paragraph might \"eat\" one newline after it in nested lists\n    if (state.isEmpty(state.line - 1)) {\n      hasEmptyLines = true;\n    }\n\n    line = state.line;\n\n    if (line < endLine && state.isEmpty(line)) {\n      hasEmptyLines = true;\n      line++;\n\n      // two empty lines should stop the parser in list mode\n      if (line < endLine && state.parentType === 'list' && state.isEmpty(line)) { break; }\n      state.line = line;\n    }\n  }\n};\n\nvar TABS_SCAN_RE = /[\\n\\t]/g;\nvar NEWLINES_RE  = /\\r[\\n\\u0085]|[\\u2424\\u2028\\u0085]/g;\nvar SPACES_RE    = /\\u00a0/g;\n\n/**\n * Tokenize the given `str`.\n *\n * @param  {String} `str` Source string\n * @param  {Object} `options`\n * @param  {Object} `env`\n * @param  {Array} `outTokens`\n * @api private\n */\n\nParserBlock.prototype.parse = function (str, options, env, outTokens) {\n  var state, lineStart = 0, lastTabPos = 0;\n  if (!str) { return []; }\n\n  // Normalize spaces\n  str = str.replace(SPACES_RE, ' ');\n\n  // Normalize newlines\n  str = str.replace(NEWLINES_RE, '\\n');\n\n  // Replace tabs with proper number of spaces (1..4)\n  if (str.indexOf('\\t') >= 0) {\n    str = str.replace(TABS_SCAN_RE, function (match, offset) {\n      var result;\n      if (str.charCodeAt(offset) === 0x0A) {\n        lineStart = offset + 1;\n        lastTabPos = 0;\n        return match;\n      }\n      result = '    '.slice((offset - lineStart - lastTabPos) % 4);\n      lastTabPos = offset - lineStart + 1;\n      return result;\n    });\n  }\n\n  state = new StateBlock(str, this, options, env, outTokens);\n  this.tokenize(state, state.line, state.lineMax);\n};\n\n// Skip text characters for text token, place those to pending buffer\n// and increment current pos\n\n// Rule to skip pure text\n// '{}$%@~+=:' reserved for extentions\n\nfunction isTerminatorChar(ch) {\n  switch (ch) {\n    case 0x0A/* \\n */:\n    case 0x5C/* \\ */:\n    case 0x60/* ` */:\n    case 0x2A/* * */:\n    case 0x5F/* _ */:\n    case 0x5E/* ^ */:\n    case 0x5B/* [ */:\n    case 0x5D/* ] */:\n    case 0x21/* ! */:\n    case 0x26/* & */:\n    case 0x3C/* < */:\n    case 0x3E/* > */:\n    case 0x7B/* { */:\n    case 0x7D/* } */:\n    case 0x24/* $ */:\n    case 0x25/* % */:\n    case 0x40/* @ */:\n    case 0x7E/* ~ */:\n    case 0x2B/* + */:\n    case 0x3D/* = */:\n    case 0x3A/* : */:\n      return true;\n    default:\n      return false;\n  }\n}\n\nfunction text(state, silent) {\n  var pos = state.pos;\n\n  while (pos < state.posMax && !isTerminatorChar(state.src.charCodeAt(pos))) {\n    pos++;\n  }\n\n  if (pos === state.pos) { return false; }\n\n  if (!silent) { state.pending += state.src.slice(state.pos, pos); }\n\n  state.pos = pos;\n\n  return true;\n}\n\n// Proceess '\\n'\n\nfunction newline(state, silent) {\n  var pmax, max, pos = state.pos;\n\n  if (state.src.charCodeAt(pos) !== 0x0A/* \\n */) { return false; }\n\n  pmax = state.pending.length - 1;\n  max = state.posMax;\n\n  // '  \\n' -> hardbreak\n  // Lookup in pending chars is bad practice! Don't copy to other rules!\n  // Pending string is stored in concat mode, indexed lookups will cause\n  // convertion to flat mode.\n  if (!silent) {\n    if (pmax >= 0 && state.pending.charCodeAt(pmax) === 0x20) {\n      if (pmax >= 1 && state.pending.charCodeAt(pmax - 1) === 0x20) {\n        // Strip out all trailing spaces on this line.\n        for (var i = pmax - 2; i >= 0; i--) {\n          if (state.pending.charCodeAt(i) !== 0x20) {\n            state.pending = state.pending.substring(0, i + 1);\n            break;\n          }\n        }\n        state.push({\n          type: 'hardbreak',\n          level: state.level\n        });\n      } else {\n        state.pending = state.pending.slice(0, -1);\n        state.push({\n          type: 'softbreak',\n          level: state.level\n        });\n      }\n\n    } else {\n      state.push({\n        type: 'softbreak',\n        level: state.level\n      });\n    }\n  }\n\n  pos++;\n\n  // skip heading spaces for next line\n  while (pos < max && state.src.charCodeAt(pos) === 0x20) { pos++; }\n\n  state.pos = pos;\n  return true;\n}\n\n// Proceess escaped chars and hardbreaks\n\nvar ESCAPED = [];\n\nfor (var i = 0; i < 256; i++) { ESCAPED.push(0); }\n\n'\\\\!\"#$%&\\'()*+,./:;<=>?@[]^_`{|}~-'\n  .split('').forEach(function(ch) { ESCAPED[ch.charCodeAt(0)] = 1; });\n\n\nfunction escape(state, silent) {\n  var ch, pos = state.pos, max = state.posMax;\n\n  if (state.src.charCodeAt(pos) !== 0x5C/* \\ */) { return false; }\n\n  pos++;\n\n  if (pos < max) {\n    ch = state.src.charCodeAt(pos);\n\n    if (ch < 256 && ESCAPED[ch] !== 0) {\n      if (!silent) { state.pending += state.src[pos]; }\n      state.pos += 2;\n      return true;\n    }\n\n    if (ch === 0x0A) {\n      if (!silent) {\n        state.push({\n          type: 'hardbreak',\n          level: state.level\n        });\n      }\n\n      pos++;\n      // skip leading whitespaces from next line\n      while (pos < max && state.src.charCodeAt(pos) === 0x20) { pos++; }\n\n      state.pos = pos;\n      return true;\n    }\n  }\n\n  if (!silent) { state.pending += '\\\\'; }\n  state.pos++;\n  return true;\n}\n\n// Parse backticks\n\nfunction backticks(state, silent) {\n  var start, max, marker, matchStart, matchEnd,\n      pos = state.pos,\n      ch = state.src.charCodeAt(pos);\n\n  if (ch !== 0x60/* ` */) { return false; }\n\n  start = pos;\n  pos++;\n  max = state.posMax;\n\n  while (pos < max && state.src.charCodeAt(pos) === 0x60/* ` */) { pos++; }\n\n  marker = state.src.slice(start, pos);\n\n  matchStart = matchEnd = pos;\n\n  while ((matchStart = state.src.indexOf('`', matchEnd)) !== -1) {\n    matchEnd = matchStart + 1;\n\n    while (matchEnd < max && state.src.charCodeAt(matchEnd) === 0x60/* ` */) { matchEnd++; }\n\n    if (matchEnd - matchStart === marker.length) {\n      if (!silent) {\n        state.push({\n          type: 'code',\n          content: state.src.slice(pos, matchStart)\n                              .replace(/[ \\n]+/g, ' ')\n                              .trim(),\n          block: false,\n          level: state.level\n        });\n      }\n      state.pos = matchEnd;\n      return true;\n    }\n  }\n\n  if (!silent) { state.pending += marker; }\n  state.pos += marker.length;\n  return true;\n}\n\n// Process ~~deleted text~~\n\nfunction del(state, silent) {\n  var found,\n      pos,\n      stack,\n      max = state.posMax,\n      start = state.pos,\n      lastChar,\n      nextChar;\n\n  if (state.src.charCodeAt(start) !== 0x7E/* ~ */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n  if (start + 4 >= max) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x7E/* ~ */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  lastChar = start > 0 ? state.src.charCodeAt(start - 1) : -1;\n  nextChar = state.src.charCodeAt(start + 2);\n\n  if (lastChar === 0x7E/* ~ */) { return false; }\n  if (nextChar === 0x7E/* ~ */) { return false; }\n  if (nextChar === 0x20 || nextChar === 0x0A) { return false; }\n\n  pos = start + 2;\n  while (pos < max && state.src.charCodeAt(pos) === 0x7E/* ~ */) { pos++; }\n  if (pos > start + 3) {\n    // sequence of 4+ markers taking as literal, same as in a emphasis\n    state.pos += pos - start;\n    if (!silent) { state.pending += state.src.slice(start, pos); }\n    return true;\n  }\n\n  state.pos = start + 2;\n  stack = 1;\n\n  while (state.pos + 1 < max) {\n    if (state.src.charCodeAt(state.pos) === 0x7E/* ~ */) {\n      if (state.src.charCodeAt(state.pos + 1) === 0x7E/* ~ */) {\n        lastChar = state.src.charCodeAt(state.pos - 1);\n        nextChar = state.pos + 2 < max ? state.src.charCodeAt(state.pos + 2) : -1;\n        if (nextChar !== 0x7E/* ~ */ && lastChar !== 0x7E/* ~ */) {\n          if (lastChar !== 0x20 && lastChar !== 0x0A) {\n            // closing '~~'\n            stack--;\n          } else if (nextChar !== 0x20 && nextChar !== 0x0A) {\n            // opening '~~'\n            stack++;\n          } // else {\n            //  // standalone ' ~~ ' indented with spaces\n            // }\n          if (stack <= 0) {\n            found = true;\n            break;\n          }\n        }\n      }\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (!found) {\n    // parser failed to find ending tag, so it's not valid emphasis\n    state.pos = start;\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + 2;\n\n  if (!silent) {\n    state.push({ type: 'del_open', level: state.level++ });\n    state.parser.tokenize(state);\n    state.push({ type: 'del_close', level: --state.level });\n  }\n\n  state.pos = state.posMax + 2;\n  state.posMax = max;\n  return true;\n}\n\n// Process ++inserted text++\n\nfunction ins(state, silent) {\n  var found,\n      pos,\n      stack,\n      max = state.posMax,\n      start = state.pos,\n      lastChar,\n      nextChar;\n\n  if (state.src.charCodeAt(start) !== 0x2B/* + */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n  if (start + 4 >= max) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x2B/* + */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  lastChar = start > 0 ? state.src.charCodeAt(start - 1) : -1;\n  nextChar = state.src.charCodeAt(start + 2);\n\n  if (lastChar === 0x2B/* + */) { return false; }\n  if (nextChar === 0x2B/* + */) { return false; }\n  if (nextChar === 0x20 || nextChar === 0x0A) { return false; }\n\n  pos = start + 2;\n  while (pos < max && state.src.charCodeAt(pos) === 0x2B/* + */) { pos++; }\n  if (pos !== start + 2) {\n    // sequence of 3+ markers taking as literal, same as in a emphasis\n    state.pos += pos - start;\n    if (!silent) { state.pending += state.src.slice(start, pos); }\n    return true;\n  }\n\n  state.pos = start + 2;\n  stack = 1;\n\n  while (state.pos + 1 < max) {\n    if (state.src.charCodeAt(state.pos) === 0x2B/* + */) {\n      if (state.src.charCodeAt(state.pos + 1) === 0x2B/* + */) {\n        lastChar = state.src.charCodeAt(state.pos - 1);\n        nextChar = state.pos + 2 < max ? state.src.charCodeAt(state.pos + 2) : -1;\n        if (nextChar !== 0x2B/* + */ && lastChar !== 0x2B/* + */) {\n          if (lastChar !== 0x20 && lastChar !== 0x0A) {\n            // closing '++'\n            stack--;\n          } else if (nextChar !== 0x20 && nextChar !== 0x0A) {\n            // opening '++'\n            stack++;\n          } // else {\n            //  // standalone ' ++ ' indented with spaces\n            // }\n          if (stack <= 0) {\n            found = true;\n            break;\n          }\n        }\n      }\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (!found) {\n    // parser failed to find ending tag, so it's not valid emphasis\n    state.pos = start;\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + 2;\n\n  if (!silent) {\n    state.push({ type: 'ins_open', level: state.level++ });\n    state.parser.tokenize(state);\n    state.push({ type: 'ins_close', level: --state.level });\n  }\n\n  state.pos = state.posMax + 2;\n  state.posMax = max;\n  return true;\n}\n\n// Process ==highlighted text==\n\nfunction mark(state, silent) {\n  var found,\n      pos,\n      stack,\n      max = state.posMax,\n      start = state.pos,\n      lastChar,\n      nextChar;\n\n  if (state.src.charCodeAt(start) !== 0x3D/* = */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n  if (start + 4 >= max) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x3D/* = */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  lastChar = start > 0 ? state.src.charCodeAt(start - 1) : -1;\n  nextChar = state.src.charCodeAt(start + 2);\n\n  if (lastChar === 0x3D/* = */) { return false; }\n  if (nextChar === 0x3D/* = */) { return false; }\n  if (nextChar === 0x20 || nextChar === 0x0A) { return false; }\n\n  pos = start + 2;\n  while (pos < max && state.src.charCodeAt(pos) === 0x3D/* = */) { pos++; }\n  if (pos !== start + 2) {\n    // sequence of 3+ markers taking as literal, same as in a emphasis\n    state.pos += pos - start;\n    if (!silent) { state.pending += state.src.slice(start, pos); }\n    return true;\n  }\n\n  state.pos = start + 2;\n  stack = 1;\n\n  while (state.pos + 1 < max) {\n    if (state.src.charCodeAt(state.pos) === 0x3D/* = */) {\n      if (state.src.charCodeAt(state.pos + 1) === 0x3D/* = */) {\n        lastChar = state.src.charCodeAt(state.pos - 1);\n        nextChar = state.pos + 2 < max ? state.src.charCodeAt(state.pos + 2) : -1;\n        if (nextChar !== 0x3D/* = */ && lastChar !== 0x3D/* = */) {\n          if (lastChar !== 0x20 && lastChar !== 0x0A) {\n            // closing '=='\n            stack--;\n          } else if (nextChar !== 0x20 && nextChar !== 0x0A) {\n            // opening '=='\n            stack++;\n          } // else {\n            //  // standalone ' == ' indented with spaces\n            // }\n          if (stack <= 0) {\n            found = true;\n            break;\n          }\n        }\n      }\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (!found) {\n    // parser failed to find ending tag, so it's not valid emphasis\n    state.pos = start;\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + 2;\n\n  if (!silent) {\n    state.push({ type: 'mark_open', level: state.level++ });\n    state.parser.tokenize(state);\n    state.push({ type: 'mark_close', level: --state.level });\n  }\n\n  state.pos = state.posMax + 2;\n  state.posMax = max;\n  return true;\n}\n\n// Process *this* and _that_\n\nfunction isAlphaNum(code) {\n  return (code >= 0x30 /* 0 */ && code <= 0x39 /* 9 */) ||\n         (code >= 0x41 /* A */ && code <= 0x5A /* Z */) ||\n         (code >= 0x61 /* a */ && code <= 0x7A /* z */);\n}\n\n// parse sequence of emphasis markers,\n// \"start\" should point at a valid marker\nfunction scanDelims(state, start) {\n  var pos = start, lastChar, nextChar, count,\n      can_open = true,\n      can_close = true,\n      max = state.posMax,\n      marker = state.src.charCodeAt(start);\n\n  lastChar = start > 0 ? state.src.charCodeAt(start - 1) : -1;\n\n  while (pos < max && state.src.charCodeAt(pos) === marker) { pos++; }\n  if (pos >= max) { can_open = false; }\n  count = pos - start;\n\n  if (count >= 4) {\n    // sequence of four or more unescaped markers can't start/end an emphasis\n    can_open = can_close = false;\n  } else {\n    nextChar = pos < max ? state.src.charCodeAt(pos) : -1;\n\n    // check whitespace conditions\n    if (nextChar === 0x20 || nextChar === 0x0A) { can_open = false; }\n    if (lastChar === 0x20 || lastChar === 0x0A) { can_close = false; }\n\n    if (marker === 0x5F /* _ */) {\n      // check if we aren't inside the word\n      if (isAlphaNum(lastChar)) { can_open = false; }\n      if (isAlphaNum(nextChar)) { can_close = false; }\n    }\n  }\n\n  return {\n    can_open: can_open,\n    can_close: can_close,\n    delims: count\n  };\n}\n\nfunction emphasis(state, silent) {\n  var startCount,\n      count,\n      found,\n      oldCount,\n      newCount,\n      stack,\n      res,\n      max = state.posMax,\n      start = state.pos,\n      marker = state.src.charCodeAt(start);\n\n  if (marker !== 0x5F/* _ */ && marker !== 0x2A /* * */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n\n  res = scanDelims(state, start);\n  startCount = res.delims;\n  if (!res.can_open) {\n    state.pos += startCount;\n    if (!silent) { state.pending += state.src.slice(start, state.pos); }\n    return true;\n  }\n\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  state.pos = start + startCount;\n  stack = [ startCount ];\n\n  while (state.pos < max) {\n    if (state.src.charCodeAt(state.pos) === marker) {\n      res = scanDelims(state, state.pos);\n      count = res.delims;\n      if (res.can_close) {\n        oldCount = stack.pop();\n        newCount = count;\n\n        while (oldCount !== newCount) {\n          if (newCount < oldCount) {\n            stack.push(oldCount - newCount);\n            break;\n          }\n\n          // assert(newCount > oldCount)\n          newCount -= oldCount;\n\n          if (stack.length === 0) { break; }\n          state.pos += oldCount;\n          oldCount = stack.pop();\n        }\n\n        if (stack.length === 0) {\n          startCount = oldCount;\n          found = true;\n          break;\n        }\n        state.pos += count;\n        continue;\n      }\n\n      if (res.can_open) { stack.push(count); }\n      state.pos += count;\n      continue;\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (!found) {\n    // parser failed to find ending tag, so it's not valid emphasis\n    state.pos = start;\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + startCount;\n\n  if (!silent) {\n    if (startCount === 2 || startCount === 3) {\n      state.push({ type: 'strong_open', level: state.level++ });\n    }\n    if (startCount === 1 || startCount === 3) {\n      state.push({ type: 'em_open', level: state.level++ });\n    }\n\n    state.parser.tokenize(state);\n\n    if (startCount === 1 || startCount === 3) {\n      state.push({ type: 'em_close', level: --state.level });\n    }\n    if (startCount === 2 || startCount === 3) {\n      state.push({ type: 'strong_close', level: --state.level });\n    }\n  }\n\n  state.pos = state.posMax + startCount;\n  state.posMax = max;\n  return true;\n}\n\n// Process ~subscript~\n\n// same as UNESCAPE_MD_RE plus a space\nvar UNESCAPE_RE = /\\\\([ \\\\!\"#$%&'()*+,.\\/:;<=>?@[\\]^_`{|}~-])/g;\n\nfunction sub(state, silent) {\n  var found,\n      content,\n      max = state.posMax,\n      start = state.pos;\n\n  if (state.src.charCodeAt(start) !== 0x7E/* ~ */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n  if (start + 2 >= max) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  state.pos = start + 1;\n\n  while (state.pos < max) {\n    if (state.src.charCodeAt(state.pos) === 0x7E/* ~ */) {\n      found = true;\n      break;\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (!found || start + 1 === state.pos) {\n    state.pos = start;\n    return false;\n  }\n\n  content = state.src.slice(start + 1, state.pos);\n\n  // don't allow unescaped spaces/newlines inside\n  if (content.match(/(^|[^\\\\])(\\\\\\\\)*\\s/)) {\n    state.pos = start;\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + 1;\n\n  if (!silent) {\n    state.push({\n      type: 'sub',\n      level: state.level,\n      content: content.replace(UNESCAPE_RE, '$1')\n    });\n  }\n\n  state.pos = state.posMax + 1;\n  state.posMax = max;\n  return true;\n}\n\n// Process ^superscript^\n\n// same as UNESCAPE_MD_RE plus a space\nvar UNESCAPE_RE$1 = /\\\\([ \\\\!\"#$%&'()*+,.\\/:;<=>?@[\\]^_`{|}~-])/g;\n\nfunction sup(state, silent) {\n  var found,\n      content,\n      max = state.posMax,\n      start = state.pos;\n\n  if (state.src.charCodeAt(start) !== 0x5E/* ^ */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n  if (start + 2 >= max) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  state.pos = start + 1;\n\n  while (state.pos < max) {\n    if (state.src.charCodeAt(state.pos) === 0x5E/* ^ */) {\n      found = true;\n      break;\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (!found || start + 1 === state.pos) {\n    state.pos = start;\n    return false;\n  }\n\n  content = state.src.slice(start + 1, state.pos);\n\n  // don't allow unescaped spaces/newlines inside\n  if (content.match(/(^|[^\\\\])(\\\\\\\\)*\\s/)) {\n    state.pos = start;\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + 1;\n\n  if (!silent) {\n    state.push({\n      type: 'sup',\n      level: state.level,\n      content: content.replace(UNESCAPE_RE$1, '$1')\n    });\n  }\n\n  state.pos = state.posMax + 1;\n  state.posMax = max;\n  return true;\n}\n\n// Process [links](<to> \"stuff\")\n\n\nfunction links(state, silent) {\n  var labelStart,\n      labelEnd,\n      label,\n      href,\n      title,\n      pos,\n      ref,\n      code,\n      isImage = false,\n      oldPos = state.pos,\n      max = state.posMax,\n      start = state.pos,\n      marker = state.src.charCodeAt(start);\n\n  if (marker === 0x21/* ! */) {\n    isImage = true;\n    marker = state.src.charCodeAt(++start);\n  }\n\n  if (marker !== 0x5B/* [ */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  labelStart = start + 1;\n  labelEnd = parseLinkLabel(state, start);\n\n  // parser failed to find ']', so it's not a valid link\n  if (labelEnd < 0) { return false; }\n\n  pos = labelEnd + 1;\n  if (pos < max && state.src.charCodeAt(pos) === 0x28/* ( */) {\n    //\n    // Inline link\n    //\n\n    // [link](  <href>  \"title\"  )\n    //        ^^ skipping these spaces\n    pos++;\n    for (; pos < max; pos++) {\n      code = state.src.charCodeAt(pos);\n      if (code !== 0x20 && code !== 0x0A) { break; }\n    }\n    if (pos >= max) { return false; }\n\n    // [link](  <href>  \"title\"  )\n    //          ^^^^^^ parsing link destination\n    start = pos;\n    if (parseLinkDestination(state, pos)) {\n      href = state.linkContent;\n      pos = state.pos;\n    } else {\n      href = '';\n    }\n\n    // [link](  <href>  \"title\"  )\n    //                ^^ skipping these spaces\n    start = pos;\n    for (; pos < max; pos++) {\n      code = state.src.charCodeAt(pos);\n      if (code !== 0x20 && code !== 0x0A) { break; }\n    }\n\n    // [link](  <href>  \"title\"  )\n    //                  ^^^^^^^ parsing link title\n    if (pos < max && start !== pos && parseLinkTitle(state, pos)) {\n      title = state.linkContent;\n      pos = state.pos;\n\n      // [link](  <href>  \"title\"  )\n      //                         ^^ skipping these spaces\n      for (; pos < max; pos++) {\n        code = state.src.charCodeAt(pos);\n        if (code !== 0x20 && code !== 0x0A) { break; }\n      }\n    } else {\n      title = '';\n    }\n\n    if (pos >= max || state.src.charCodeAt(pos) !== 0x29/* ) */) {\n      state.pos = oldPos;\n      return false;\n    }\n    pos++;\n  } else {\n    //\n    // Link reference\n    //\n\n    // do not allow nested reference links\n    if (state.linkLevel > 0) { return false; }\n\n    // [foo]  [bar]\n    //      ^^ optional whitespace (can include newlines)\n    for (; pos < max; pos++) {\n      code = state.src.charCodeAt(pos);\n      if (code !== 0x20 && code !== 0x0A) { break; }\n    }\n\n    if (pos < max && state.src.charCodeAt(pos) === 0x5B/* [ */) {\n      start = pos + 1;\n      pos = parseLinkLabel(state, pos);\n      if (pos >= 0) {\n        label = state.src.slice(start, pos++);\n      } else {\n        pos = start - 1;\n      }\n    }\n\n    // covers label === '' and label === undefined\n    // (collapsed reference link and shortcut reference link respectively)\n    if (!label) {\n      if (typeof label === 'undefined') {\n        pos = labelEnd + 1;\n      }\n      label = state.src.slice(labelStart, labelEnd);\n    }\n\n    ref = state.env.references[normalizeReference(label)];\n    if (!ref) {\n      state.pos = oldPos;\n      return false;\n    }\n    href = ref.href;\n    title = ref.title;\n  }\n\n  //\n  // We found the end of the link, and know for a fact it's a valid link;\n  // so all that's left to do is to call tokenizer.\n  //\n  if (!silent) {\n    state.pos = labelStart;\n    state.posMax = labelEnd;\n\n    if (isImage) {\n      state.push({\n        type: 'image',\n        src: href,\n        title: title,\n        alt: state.src.substr(labelStart, labelEnd - labelStart),\n        level: state.level\n      });\n    } else {\n      state.push({\n        type: 'link_open',\n        href: href,\n        title: title,\n        level: state.level++\n      });\n      state.linkLevel++;\n      state.parser.tokenize(state);\n      state.linkLevel--;\n      state.push({ type: 'link_close', level: --state.level });\n    }\n  }\n\n  state.pos = pos;\n  state.posMax = max;\n  return true;\n}\n\n// Process inline footnotes (^[...])\n\n\nfunction footnote_inline(state, silent) {\n  var labelStart,\n      labelEnd,\n      footnoteId,\n      oldLength,\n      max = state.posMax,\n      start = state.pos;\n\n  if (start + 2 >= max) { return false; }\n  if (state.src.charCodeAt(start) !== 0x5E/* ^ */) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x5B/* [ */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  labelStart = start + 2;\n  labelEnd = parseLinkLabel(state, start + 1);\n\n  // parser failed to find ']', so it's not a valid note\n  if (labelEnd < 0) { return false; }\n\n  // We found the end of the link, and know for a fact it's a valid link;\n  // so all that's left to do is to call tokenizer.\n  //\n  if (!silent) {\n    if (!state.env.footnotes) { state.env.footnotes = {}; }\n    if (!state.env.footnotes.list) { state.env.footnotes.list = []; }\n    footnoteId = state.env.footnotes.list.length;\n\n    state.pos = labelStart;\n    state.posMax = labelEnd;\n\n    state.push({\n      type: 'footnote_ref',\n      id: footnoteId,\n      level: state.level\n    });\n    state.linkLevel++;\n    oldLength = state.tokens.length;\n    state.parser.tokenize(state);\n    state.env.footnotes.list[footnoteId] = { tokens: state.tokens.splice(oldLength) };\n    state.linkLevel--;\n  }\n\n  state.pos = labelEnd + 1;\n  state.posMax = max;\n  return true;\n}\n\n// Process footnote references ([^...])\n\nfunction footnote_ref(state, silent) {\n  var label,\n      pos,\n      footnoteId,\n      footnoteSubId,\n      max = state.posMax,\n      start = state.pos;\n\n  // should be at least 4 chars - \"[^x]\"\n  if (start + 3 > max) { return false; }\n\n  if (!state.env.footnotes || !state.env.footnotes.refs) { return false; }\n  if (state.src.charCodeAt(start) !== 0x5B/* [ */) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x5E/* ^ */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  for (pos = start + 2; pos < max; pos++) {\n    if (state.src.charCodeAt(pos) === 0x20) { return false; }\n    if (state.src.charCodeAt(pos) === 0x0A) { return false; }\n    if (state.src.charCodeAt(pos) === 0x5D /* ] */) {\n      break;\n    }\n  }\n\n  if (pos === start + 2) { return false; } // no empty footnote labels\n  if (pos >= max) { return false; }\n  pos++;\n\n  label = state.src.slice(start + 2, pos - 1);\n  if (typeof state.env.footnotes.refs[':' + label] === 'undefined') { return false; }\n\n  if (!silent) {\n    if (!state.env.footnotes.list) { state.env.footnotes.list = []; }\n\n    if (state.env.footnotes.refs[':' + label] < 0) {\n      footnoteId = state.env.footnotes.list.length;\n      state.env.footnotes.list[footnoteId] = { label: label, count: 0 };\n      state.env.footnotes.refs[':' + label] = footnoteId;\n    } else {\n      footnoteId = state.env.footnotes.refs[':' + label];\n    }\n\n    footnoteSubId = state.env.footnotes.list[footnoteId].count;\n    state.env.footnotes.list[footnoteId].count++;\n\n    state.push({\n      type: 'footnote_ref',\n      id: footnoteId,\n      subId: footnoteSubId,\n      level: state.level\n    });\n  }\n\n  state.pos = pos;\n  state.posMax = max;\n  return true;\n}\n\n// List of valid url schemas, accorting to commonmark spec\n// http://jgm.github.io/CommonMark/spec.html#autolinks\n\nvar url_schemas = [\n  'coap',\n  'doi',\n  'javascript',\n  'aaa',\n  'aaas',\n  'about',\n  'acap',\n  'cap',\n  'cid',\n  'crid',\n  'data',\n  'dav',\n  'dict',\n  'dns',\n  'file',\n  'ftp',\n  'geo',\n  'go',\n  'gopher',\n  'h323',\n  'http',\n  'https',\n  'iax',\n  'icap',\n  'im',\n  'imap',\n  'info',\n  'ipp',\n  'iris',\n  'iris.beep',\n  'iris.xpc',\n  'iris.xpcs',\n  'iris.lwz',\n  'ldap',\n  'mailto',\n  'mid',\n  'msrp',\n  'msrps',\n  'mtqp',\n  'mupdate',\n  'news',\n  'nfs',\n  'ni',\n  'nih',\n  'nntp',\n  'opaquelocktoken',\n  'pop',\n  'pres',\n  'rtsp',\n  'service',\n  'session',\n  'shttp',\n  'sieve',\n  'sip',\n  'sips',\n  'sms',\n  'snmp',\n  'soap.beep',\n  'soap.beeps',\n  'tag',\n  'tel',\n  'telnet',\n  'tftp',\n  'thismessage',\n  'tn3270',\n  'tip',\n  'tv',\n  'urn',\n  'vemmi',\n  'ws',\n  'wss',\n  'xcon',\n  'xcon-userid',\n  'xmlrpc.beep',\n  'xmlrpc.beeps',\n  'xmpp',\n  'z39.50r',\n  'z39.50s',\n  'adiumxtra',\n  'afp',\n  'afs',\n  'aim',\n  'apt',\n  'attachment',\n  'aw',\n  'beshare',\n  'bitcoin',\n  'bolo',\n  'callto',\n  'chrome',\n  'chrome-extension',\n  'com-eventbrite-attendee',\n  'content',\n  'cvs',\n  'dlna-playsingle',\n  'dlna-playcontainer',\n  'dtn',\n  'dvb',\n  'ed2k',\n  'facetime',\n  'feed',\n  'finger',\n  'fish',\n  'gg',\n  'git',\n  'gizmoproject',\n  'gtalk',\n  'hcp',\n  'icon',\n  'ipn',\n  'irc',\n  'irc6',\n  'ircs',\n  'itms',\n  'jar',\n  'jms',\n  'keyparc',\n  'lastfm',\n  'ldaps',\n  'magnet',\n  'maps',\n  'market',\n  'message',\n  'mms',\n  'ms-help',\n  'msnim',\n  'mumble',\n  'mvn',\n  'notes',\n  'oid',\n  'palm',\n  'paparazzi',\n  'platform',\n  'proxy',\n  'psyc',\n  'query',\n  'res',\n  'resource',\n  'rmi',\n  'rsync',\n  'rtmp',\n  'secondlife',\n  'sftp',\n  'sgn',\n  'skype',\n  'smb',\n  'soldat',\n  'spotify',\n  'ssh',\n  'steam',\n  'svn',\n  'teamspeak',\n  'things',\n  'udp',\n  'unreal',\n  'ut2004',\n  'ventrilo',\n  'view-source',\n  'webcal',\n  'wtai',\n  'wyciwyg',\n  'xfire',\n  'xri',\n  'ymsgr'\n];\n\n// Process autolinks '<protocol:...>'\n\n\n/*eslint max-len:0*/\nvar EMAIL_RE    = /^<([a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/;\nvar AUTOLINK_RE = /^<([a-zA-Z.\\-]{1,25}):([^<>\\x00-\\x20]*)>/;\n\n\nfunction autolink(state, silent) {\n  var tail, linkMatch, emailMatch, url, fullUrl, pos = state.pos;\n\n  if (state.src.charCodeAt(pos) !== 0x3C/* < */) { return false; }\n\n  tail = state.src.slice(pos);\n\n  if (tail.indexOf('>') < 0) { return false; }\n\n  linkMatch = tail.match(AUTOLINK_RE);\n\n  if (linkMatch) {\n    if (url_schemas.indexOf(linkMatch[1].toLowerCase()) < 0) { return false; }\n\n    url = linkMatch[0].slice(1, -1);\n    fullUrl = normalizeLink(url);\n    if (!state.parser.validateLink(url)) { return false; }\n\n    if (!silent) {\n      state.push({\n        type: 'link_open',\n        href: fullUrl,\n        level: state.level\n      });\n      state.push({\n        type: 'text',\n        content: url,\n        level: state.level + 1\n      });\n      state.push({ type: 'link_close', level: state.level });\n    }\n\n    state.pos += linkMatch[0].length;\n    return true;\n  }\n\n  emailMatch = tail.match(EMAIL_RE);\n\n  if (emailMatch) {\n\n    url = emailMatch[0].slice(1, -1);\n\n    fullUrl = normalizeLink('mailto:' + url);\n    if (!state.parser.validateLink(fullUrl)) { return false; }\n\n    if (!silent) {\n      state.push({\n        type: 'link_open',\n        href: fullUrl,\n        level: state.level\n      });\n      state.push({\n        type: 'text',\n        content: url,\n        level: state.level + 1\n      });\n      state.push({ type: 'link_close', level: state.level });\n    }\n\n    state.pos += emailMatch[0].length;\n    return true;\n  }\n\n  return false;\n}\n\n// Regexps to match html elements\n\nfunction replace$1(regex, options) {\n  regex = regex.source;\n  options = options || '';\n\n  return function self(name, val) {\n    if (!name) {\n      return new RegExp(regex, options);\n    }\n    val = val.source || val;\n    regex = regex.replace(name, val);\n    return self;\n  };\n}\n\n\nvar attr_name     = /[a-zA-Z_:][a-zA-Z0-9:._-]*/;\n\nvar unquoted      = /[^\"'=<>`\\x00-\\x20]+/;\nvar single_quoted = /'[^']*'/;\nvar double_quoted = /\"[^\"]*\"/;\n\n/*eslint no-spaced-func:0*/\nvar attr_value  = replace$1(/(?:unquoted|single_quoted|double_quoted)/)\n                    ('unquoted', unquoted)\n                    ('single_quoted', single_quoted)\n                    ('double_quoted', double_quoted)\n                    ();\n\nvar attribute   = replace$1(/(?:\\s+attr_name(?:\\s*=\\s*attr_value)?)/)\n                    ('attr_name', attr_name)\n                    ('attr_value', attr_value)\n                    ();\n\nvar open_tag    = replace$1(/<[A-Za-z][A-Za-z0-9]*attribute*\\s*\\/?>/)\n                    ('attribute', attribute)\n                    ();\n\nvar close_tag   = /<\\/[A-Za-z][A-Za-z0-9]*\\s*>/;\nvar comment     = /<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->/;\nvar processing  = /<[?].*?[?]>/;\nvar declaration = /<![A-Z]+\\s+[^>]*>/;\nvar cdata       = /<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/;\n\nvar HTML_TAG_RE = replace$1(/^(?:open_tag|close_tag|comment|processing|declaration|cdata)/)\n  ('open_tag', open_tag)\n  ('close_tag', close_tag)\n  ('comment', comment)\n  ('processing', processing)\n  ('declaration', declaration)\n  ('cdata', cdata)\n  ();\n\n// Process html tags\n\n\nfunction isLetter$2(ch) {\n  /*eslint no-bitwise:0*/\n  var lc = ch | 0x20; // to lower case\n  return (lc >= 0x61/* a */) && (lc <= 0x7a/* z */);\n}\n\n\nfunction htmltag(state, silent) {\n  var ch, match, max, pos = state.pos;\n\n  if (!state.options.html) { return false; }\n\n  // Check start\n  max = state.posMax;\n  if (state.src.charCodeAt(pos) !== 0x3C/* < */ ||\n      pos + 2 >= max) {\n    return false;\n  }\n\n  // Quick fail on second char\n  ch = state.src.charCodeAt(pos + 1);\n  if (ch !== 0x21/* ! */ &&\n      ch !== 0x3F/* ? */ &&\n      ch !== 0x2F/* / */ &&\n      !isLetter$2(ch)) {\n    return false;\n  }\n\n  match = state.src.slice(pos).match(HTML_TAG_RE);\n  if (!match) { return false; }\n\n  if (!silent) {\n    state.push({\n      type: 'htmltag',\n      content: state.src.slice(pos, pos + match[0].length),\n      level: state.level\n    });\n  }\n  state.pos += match[0].length;\n  return true;\n}\n\n// Process html entity - &#123;, &#xAF;, &quot;, ...\n\n\nvar DIGITAL_RE = /^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i;\nvar NAMED_RE   = /^&([a-z][a-z0-9]{1,31});/i;\n\n\nfunction entity(state, silent) {\n  var ch, code, match, pos = state.pos, max = state.posMax;\n\n  if (state.src.charCodeAt(pos) !== 0x26/* & */) { return false; }\n\n  if (pos + 1 < max) {\n    ch = state.src.charCodeAt(pos + 1);\n\n    if (ch === 0x23 /* # */) {\n      match = state.src.slice(pos).match(DIGITAL_RE);\n      if (match) {\n        if (!silent) {\n          code = match[1][0].toLowerCase() === 'x' ? parseInt(match[1].slice(1), 16) : parseInt(match[1], 10);\n          state.pending += isValidEntityCode(code) ? fromCodePoint(code) : fromCodePoint(0xFFFD);\n        }\n        state.pos += match[0].length;\n        return true;\n      }\n    } else {\n      match = state.src.slice(pos).match(NAMED_RE);\n      if (match) {\n        var decoded = decodeEntity(match[1]);\n        if (match[1] !== decoded) {\n          if (!silent) { state.pending += decoded; }\n          state.pos += match[0].length;\n          return true;\n        }\n      }\n    }\n  }\n\n  if (!silent) { state.pending += '&'; }\n  state.pos++;\n  return true;\n}\n\n/**\n * Inline Parser `rules`\n */\n\nvar _rules$2 = [\n  [ 'text',            text ],\n  [ 'newline',         newline ],\n  [ 'escape',          escape ],\n  [ 'backticks',       backticks ],\n  [ 'del',             del ],\n  [ 'ins',             ins ],\n  [ 'mark',            mark ],\n  [ 'emphasis',        emphasis ],\n  [ 'sub',             sub ],\n  [ 'sup',             sup ],\n  [ 'links',           links ],\n  [ 'footnote_inline', footnote_inline ],\n  [ 'footnote_ref',    footnote_ref ],\n  [ 'autolink',        autolink ],\n  [ 'htmltag',         htmltag ],\n  [ 'entity',          entity ]\n];\n\n/**\n * Inline Parser class. Note that link validation is stricter\n * in Remarkable than what is specified by CommonMark. If you\n * want to change this you can use a custom validator.\n *\n * @api private\n */\n\nfunction ParserInline() {\n  this.ruler = new Ruler();\n  for (var i = 0; i < _rules$2.length; i++) {\n    this.ruler.push(_rules$2[i][0], _rules$2[i][1]);\n  }\n\n  // Can be overridden with a custom validator\n  this.validateLink = validateLink;\n}\n\n/**\n * Skip a single token by running all rules in validation mode.\n * Returns `true` if any rule reports success.\n *\n * @param  {Object} `state`\n * @api privage\n */\n\nParserInline.prototype.skipToken = function (state) {\n  var rules = this.ruler.getRules('');\n  var len = rules.length;\n  var pos = state.pos;\n  var i, cached_pos;\n\n  if ((cached_pos = state.cacheGet(pos)) > 0) {\n    state.pos = cached_pos;\n    return;\n  }\n\n  for (i = 0; i < len; i++) {\n    if (rules[i](state, true)) {\n      state.cacheSet(pos, state.pos);\n      return;\n    }\n  }\n\n  state.pos++;\n  state.cacheSet(pos, state.pos);\n};\n\n/**\n * Generate tokens for the given input range.\n *\n * @param  {Object} `state`\n * @api private\n */\n\nParserInline.prototype.tokenize = function (state) {\n  var rules = this.ruler.getRules('');\n  var len = rules.length;\n  var end = state.posMax;\n  var ok, i;\n\n  while (state.pos < end) {\n\n    // Try all possible rules.\n    // On success, the rule should:\n    //\n    // - update `state.pos`\n    // - update `state.tokens`\n    // - return true\n    for (i = 0; i < len; i++) {\n      ok = rules[i](state, false);\n\n      if (ok) {\n        break;\n      }\n    }\n\n    if (ok) {\n      if (state.pos >= end) { break; }\n      continue;\n    }\n\n    state.pending += state.src[state.pos++];\n  }\n\n  if (state.pending) {\n    state.pushPending();\n  }\n};\n\n/**\n * Parse the given input string.\n *\n * @param  {String} `str`\n * @param  {Object} `options`\n * @param  {Object} `env`\n * @param  {Array} `outTokens`\n * @api private\n */\n\nParserInline.prototype.parse = function (str, options, env, outTokens) {\n  var state = new StateInline(str, this, options, env, outTokens);\n  this.tokenize(state);\n};\n\n/**\n * Validate the given `url` by checking for bad protocols.\n *\n * @param  {String} `url`\n * @return {Boolean}\n */\n\nfunction validateLink(url) {\n  var BAD_PROTOCOLS = [ 'vbscript', 'javascript', 'file', 'data' ];\n  var str = url.trim().toLowerCase();\n  // Care about digital entities \"javascript&#x3A;alert(1)\"\n  str = replaceEntities(str);\n  if (str.indexOf(':') !== -1 && BAD_PROTOCOLS.indexOf(str.split(':')[0]) !== -1) {\n    return false;\n  }\n  return true;\n}\n\n// Remarkable default options\n\nvar defaultConfig = {\n  options: {\n    html:         false,        // Enable HTML tags in source\n    xhtmlOut:     false,        // Use '/' to close single tags (<br />)\n    breaks:       false,        // Convert '\\n' in paragraphs into <br>\n    langPrefix:   'language-',  // CSS language prefix for fenced blocks\n    linkTarget:   '',           // set target to open link in\n\n    // Enable some language-neutral replacements + quotes beautification\n    typographer:  false,\n\n    // Double + single quotes replacement pairs, when typographer enabled,\n    // and smartquotes on. Set doubles to '\u00AB\u00BB' for Russian, '\u201E\u201C' for German.\n    quotes: '\u201C\u201D\u2018\u2019',\n\n    // Highlighter function. Should return escaped HTML,\n    // or '' if input not changed\n    //\n    // function (/*str, lang*/) { return ''; }\n    //\n    highlight: null,\n\n    maxNesting:   20            // Internal protection, recursion limit\n  },\n\n  components: {\n\n    core: {\n      rules: [\n        'block',\n        'inline',\n        'references',\n        'replacements',\n        'smartquotes',\n        'references',\n        'abbr2',\n        'footnote_tail'\n      ]\n    },\n\n    block: {\n      rules: [\n        'blockquote',\n        'code',\n        'fences',\n        'footnote',\n        'heading',\n        'hr',\n        'htmlblock',\n        'lheading',\n        'list',\n        'paragraph',\n        'table'\n      ]\n    },\n\n    inline: {\n      rules: [\n        'autolink',\n        'backticks',\n        'del',\n        'emphasis',\n        'entity',\n        'escape',\n        'footnote_ref',\n        'htmltag',\n        'links',\n        'newline',\n        'text'\n      ]\n    }\n  }\n};\n\n// Remarkable default options\n\nvar fullConfig = {\n  options: {\n    html:         false,        // Enable HTML tags in source\n    xhtmlOut:     false,        // Use '/' to close single tags (<br />)\n    breaks:       false,        // Convert '\\n' in paragraphs into <br>\n    langPrefix:   'language-',  // CSS language prefix for fenced blocks\n    linkTarget:   '',           // set target to open link in\n\n    // Enable some language-neutral replacements + quotes beautification\n    typographer:  false,\n\n    // Double + single quotes replacement pairs, when typographer enabled,\n    // and smartquotes on. Set doubles to '\u00AB\u00BB' for Russian, '\u201E\u201C' for German.\n    quotes:       '\u201C\u201D\u2018\u2019',\n\n    // Highlighter function. Should return escaped HTML,\n    // or '' if input not changed\n    //\n    // function (/*str, lang*/) { return ''; }\n    //\n    highlight:     null,\n\n    maxNesting:    20            // Internal protection, recursion limit\n  },\n\n  components: {\n    // Don't restrict core/block/inline rules\n    core: {},\n    block: {},\n    inline: {}\n  }\n};\n\n// Commonmark default options\n\nvar commonmarkConfig = {\n  options: {\n    html:         true,         // Enable HTML tags in source\n    xhtmlOut:     true,         // Use '/' to close single tags (<br />)\n    breaks:       false,        // Convert '\\n' in paragraphs into <br>\n    langPrefix:   'language-',  // CSS language prefix for fenced blocks\n    linkTarget:   '',           // set target to open link in\n\n    // Enable some language-neutral replacements + quotes beautification\n    typographer:  false,\n\n    // Double + single quotes replacement pairs, when typographer enabled,\n    // and smartquotes on. Set doubles to '\u00AB\u00BB' for Russian, '\u201E\u201C' for German.\n    quotes: '\u201C\u201D\u2018\u2019',\n\n    // Highlighter function. Should return escaped HTML,\n    // or '' if input not changed\n    //\n    // function (/*str, lang*/) { return ''; }\n    //\n    highlight: null,\n\n    maxNesting:   20            // Internal protection, recursion limit\n  },\n\n  components: {\n\n    core: {\n      rules: [\n        'block',\n        'inline',\n        'references',\n        'abbr2'\n      ]\n    },\n\n    block: {\n      rules: [\n        'blockquote',\n        'code',\n        'fences',\n        'heading',\n        'hr',\n        'htmlblock',\n        'lheading',\n        'list',\n        'paragraph'\n      ]\n    },\n\n    inline: {\n      rules: [\n        'autolink',\n        'backticks',\n        'emphasis',\n        'entity',\n        'escape',\n        'htmltag',\n        'links',\n        'newline',\n        'text'\n      ]\n    }\n  }\n};\n\n/**\n * Preset configs\n */\n\nvar config = {\n  'default': defaultConfig,\n  'full': fullConfig,\n  'commonmark': commonmarkConfig\n};\n\n/**\n * The `StateCore` class manages state.\n *\n * @param {Object} `instance` Remarkable instance\n * @param {String} `str` Markdown string\n * @param {Object} `env`\n */\n\nfunction StateCore(instance, str, env) {\n  this.src = str;\n  this.env = env;\n  this.options = instance.options;\n  this.tokens = [];\n  this.inlineMode = false;\n\n  this.inline = instance.inline;\n  this.block = instance.block;\n  this.renderer = instance.renderer;\n  this.typographer = instance.typographer;\n}\n\n/**\n * The main `Remarkable` class. Create an instance of\n * `Remarkable` with a `preset` and/or `options`.\n *\n * @param {String} `preset` If no preset is given, `default` is used.\n * @param {Object} `options`\n */\n\nfunction Remarkable(preset, options) {\n  if (typeof preset !== 'string') {\n    options = preset;\n    preset = 'default';\n  }\n\n  if (options && options.linkify != null) {\n    console.warn(\n      'linkify option is removed. Use linkify plugin instead:\\n\\n' +\n      'import Remarkable from \\'remarkable\\';\\n' +\n      'import linkify from \\'remarkable/linkify\\';\\n' +\n      'new Remarkable().use(linkify)\\n'\n    );\n  }\n\n  this.inline   = new ParserInline();\n  this.block    = new ParserBlock();\n  this.core     = new Core();\n  this.renderer = new Renderer();\n  this.ruler    = new Ruler();\n\n  this.options  = {};\n  this.configure(config[preset]);\n  this.set(options || {});\n}\n\n/**\n * Set options as an alternative to passing them\n * to the constructor.\n *\n * ```js\n * md.set({typographer: true});\n * ```\n * @param {Object} `options`\n * @api public\n */\n\nRemarkable.prototype.set = function (options) {\n  assign(this.options, options);\n};\n\n/**\n * Batch loader for components rules states, and options\n *\n * @param  {Object} `presets`\n */\n\nRemarkable.prototype.configure = function (presets) {\n  var self = this;\n\n  if (!presets) { throw new Error('Wrong `remarkable` preset, check name/content'); }\n  if (presets.options) { self.set(presets.options); }\n  if (presets.components) {\n    Object.keys(presets.components).forEach(function (name) {\n      if (presets.components[name].rules) {\n        self[name].ruler.enable(presets.components[name].rules, true);\n      }\n    });\n  }\n};\n\n/**\n * Use a plugin.\n *\n * ```js\n * var md = new Remarkable();\n *\n * md.use(plugin1)\n *   .use(plugin2, opts)\n *   .use(plugin3);\n * ```\n *\n * @param  {Function} `plugin`\n * @param  {Object} `options`\n * @return {Object} `Remarkable` for chaining\n */\n\nRemarkable.prototype.use = function (plugin, options) {\n  plugin(this, options);\n  return this;\n};\n\n\n/**\n * Parse the input `string` and return a tokens array.\n * Modifies `env` with definitions data.\n *\n * @param  {String} `string`\n * @param  {Object} `env`\n * @return {Array} Array of tokens\n */\n\nRemarkable.prototype.parse = function (str, env) {\n  var state = new StateCore(this, str, env);\n  this.core.process(state);\n  return state.tokens;\n};\n\n/**\n * The main `.render()` method that does all the magic :)\n *\n * @param  {String} `string`\n * @param  {Object} `env`\n * @return {String} Rendered HTML.\n */\n\nRemarkable.prototype.render = function (str, env) {\n  env = env || {};\n  return this.renderer.render(this.parse(str, env), this.options, env);\n};\n\n/**\n * Parse the given content `string` as a single string.\n *\n * @param  {String} `string`\n * @param  {Object} `env`\n * @return {Array} Array of tokens\n */\n\nRemarkable.prototype.parseInline = function (str, env) {\n  var state = new StateCore(this, str, env);\n  state.inlineMode = true;\n  this.core.process(state);\n  return state.tokens;\n};\n\n/**\n * Render a single content `string`, without wrapping it\n * to paragraphs\n *\n * @param  {String} `str`\n * @param  {Object} `env`\n * @return {String}\n */\n\nRemarkable.prototype.renderInline = function (str, env) {\n  env = env || {};\n  return this.renderer.render(this.parseInline(str, env), this.options, env);\n};\n\nexport { Remarkable, utils };\n", "// ---------\n// parser.js is an async markdown-to-html parser.\n//   this is used before anything is ready (before the DOM) so search and pages can appear faster\n\nimport { Remarkable } from \"remarkable\"; // This is where the bulk of the filesize comes from\nimport { EmCloseToken, EmOpenToken, HeadingCloseToken } from \"remarkable/lib\";\n\nexport class Parser {\n  private md: Remarkable;\n  private openEmRenderer: Remarkable.Rule<EmOpenToken, string> | undefined;\n  private closeEmRenderer: Remarkable.Rule<EmCloseToken, string> | undefined;\n  private closeHeadingRenderer:\n    | Remarkable.Rule<HeadingCloseToken, string>\n    | undefined;\n  private injectedHeading: boolean;\n  private injectedEm: boolean;\n  private tagMap: Record<string, string>;\n\n  constructor() {\n    // https://www.npmjs.com/package/remarkable-youtube\n    //     When video sources are from Youtube? or remarkable-embed\n    this.md = new Remarkable(\"full\", {\n      html: true,\n      typographer: false,\n    });\n\n    // Rules that we want to modify for custom directives\n    this.openEmRenderer = this.md.renderer.rules.em_open;\n    this.closeEmRenderer = this.md.renderer.rules.em_close;\n    this.closeHeadingRenderer = this.md.renderer.rules.heading_close;\n    this.injectedHeading = false;\n    this.injectedEm = false;\n\n    this.tagMap = {\n      r: \"red\",\n      b: \"blue\",\n      g: \"green\",\n      y: \"yellow\",\n      p: \"pink\",\n      t: \"teal\",\n      \"!\": \"spoiler\",\n    };\n\n    this.updateRules();\n  }\n\n  private isTextToken(\n    token: Remarkable.TagToken,\n  ): token is Remarkable.BlockContentToken {\n    return \"content\" in token;\n  }\n\n  // For custom directives --> capture when the markdown has a special call either :{ in a heading or *:{ in text\n  updateRules(): void {\n    // Define new handlers for text\n    this.md.renderer.rules.heading_open = (\n      tokens: Remarkable.TagToken[],\n      idx: number,\n    ): string => {\n      const nextToken: Remarkable.TagToken = tokens[idx + 1];\n\n      // Ensure the next token exists, is a TextToken, and has a defined content property\n      if (\n        nextToken &&\n        this.isTextToken(nextToken) &&\n        nextToken.content &&\n        nextToken.content[0] === \":\"\n      ) {\n        this.injectedHeading = true;\n\n        // Inject a span depending on the category\n        if (nextToken.content[1] === \"{\") {\n          // parseJsonTag modifies tokens, so baseReturn should be recalculated.\n          const spanReturn: string = this.parseJsonTag(tokens, idx);\n          const baseReturn: string = `<h${(tokens[idx] as Remarkable.HeadingOpenToken).hLevel} id=\"${nextToken.content.replace(/\\s+/g, \"-\").toLowerCase()}\">`;\n          return spanReturn + baseReturn;\n        }\n      }\n\n      // Instead of the default handler, use this so we can use the id later for search\n      if (nextToken && this.isTextToken(nextToken) && nextToken.content) {\n        const baseReturn: string = `<h${(tokens[idx] as Remarkable.HeadingOpenToken).hLevel} id=\"${nextToken.content.replace(/\\s+/g, \"-\").toLowerCase()}\">`;\n        return baseReturn;\n      }\n\n      // Fallback in case nextToken is undefined or not a TextToken\n      return `<h${(tokens[idx] as Remarkable.HeadingOpenToken).hLevel}>`;\n    };\n\n    this.md.renderer.rules.em_open = (\n      tokens: Remarkable.TagToken[],\n      idx: number,\n      options: Remarkable.Options | undefined,\n      env: Remarkable.Env | undefined,\n    ): string => this.parseTags(tokens, idx, options, env, this.openEmRenderer);\n\n    this.md.renderer.rules.heading_close = (\n      tokens: Remarkable.HeadingCloseToken[],\n      idx: number,\n      options: Remarkable.Options | undefined,\n      env: Remarkable.Env | undefined,\n    ): string => {\n      if (this.injectedHeading) {\n        this.injectedHeading = false;\n        const headingEnd: string = this.closeHeadingRenderer!(\n          tokens,\n          idx,\n          options,\n          env,\n        );\n        // Change new line position or styling will mess up\n        return `${headingEnd.concat(\"</span>\").replace(/\\n/g, \" \")}\\n`;\n      } else {\n        return this.closeHeadingRenderer!(tokens, idx, options, env);\n      }\n    };\n\n    this.md.renderer.rules.em_close = (\n      tokens: Remarkable.EmCloseToken[],\n      idx: number,\n      options: Remarkable.Options | undefined,\n      env: Remarkable.Env | undefined,\n    ): string => {\n      if (this.injectedEm) {\n        this.injectedEm = false;\n        return \"</span>\";\n      } else {\n        return this.closeEmRenderer!(tokens, idx, options, env);\n      }\n    };\n\n    this.parseKatex();\n  }\n\n  // Load a text file on a relative path\n  async loadFile(filePath: string): Promise<string> {\n    return new Promise<string>((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n      xhr.open(\"GET\", filePath, true);\n\n      xhr.onload = () => {\n        if (xhr.status >= 200 && xhr.status < 300) {\n          resolve(xhr.response);\n        } else {\n          reject({\n            status: xhr.status,\n            statusText: xhr.statusText,\n          });\n        }\n      };\n\n      xhr.onerror = () => {\n        reject({\n          status: xhr.status,\n          statusText: xhr.statusText,\n        });\n      };\n\n      xhr.send();\n    });\n  }\n\n  async asyncRead(file: string): Promise<string> {\n    const fileData: string = await this.loadFile(file);\n\n    // Check if file data is empty or null\n    if (!fileData || fileData.length <= 1) {\n      return \"\";\n    }\n\n    return fileData;\n  }\n\n  // Parse a MD file with our custom rules\n  async parseGFM(file: string): Promise<string> {\n    // Read GFM file\n    const fileData: string = await this.loadFile(`${file}.md`);\n\n    // Check if file data is empty or null\n    if (!fileData || fileData.length <= 1) {\n      return \"\";\n    }\n\n    // Render the Markdown content to HTML\n    const content: string = this.md.render(fileData);\n    return content;\n  }\n\n  // Custom directive handler for text. For this we can use the default one if we're not in a custom directive\n  parseTags(\n    tokens: Remarkable.TagToken[],\n    idx: number,\n    options: Remarkable.Options | undefined,\n    env: Remarkable.Env | undefined,\n    fallback: Remarkable.Rule<Remarkable.EmOpenToken, string> | undefined,\n  ): string {\n    // Check if the next token exists and is a text token\n    const nextToken: Remarkable.TagToken = tokens[idx + 1];\n    if (nextToken && this.isTextToken(nextToken)) {\n      // Check if the first character of the content is \":\"\n      if (nextToken.content && nextToken.content[0] === \":\") {\n        this.injectedEm = true;\n\n        // Inject a span depending on the category\n        if (nextToken.content[1] === \"{\") {\n          return this.parseJsonTag(tokens, idx);\n        }\n        const tagToken: string = nextToken.content[1];\n        nextToken.content = nextToken.content.slice(2);\n        return `<span class=\"${this.tagMap[tagToken]}\">`;\n      } else {\n        // Use the fallback renderer if the content does not start with \":\"\n        return fallback\n          ? fallback(tokens as Remarkable.EmOpenToken[], idx, options, env)\n          : \"\";\n      }\n    }\n\n    // Use the fallback renderer if the next token is not a text token\n    return fallback\n      ? fallback(tokens as Remarkable.EmOpenToken[], idx, options, env)\n      : \"\";\n  }\n\n  // Custom directives use JSON-style data for options\n  parseJsonTag(tokens: Remarkable.TagToken[], idx: number): string {\n    // Ensure the next token exists and is a TextToken\n    const nextToken: Remarkable.TagToken | undefined = tokens[idx + 1];\n    if (!nextToken) {\n      return \"\"; // Return an empty string if the token structure is invalid\n    }\n\n    if (!this.isTextToken(nextToken) || !nextToken.content) {\n      return \"\"; // Return an empty string if the token structure is invalid\n    }\n\n    // Find the index of the closing bracket\n    const endingIndex: number = nextToken.content.indexOf(\"}\");\n    if (endingIndex === -1) {\n      return \"\"; // Return an empty string if no closing bracket is found\n    }\n\n    const jsonTag: string = nextToken.content.substring(1, endingIndex + 1);\n    nextToken.content = nextToken.content.slice(endingIndex + 2);\n\n    // Inline segments don't change if you only change their content\n    if (\n      nextToken.type === \"inline\" &&\n      nextToken.children &&\n      nextToken.children[0]\n    ) {\n      const childToken: Remarkable.BlockContentToken = nextToken.children[0];\n      childToken.content = nextToken.content;\n    }\n\n    const classOp: string =\n      tokens[idx].type === \"em_open\" ? \"tagging-text\" : \"tagging\";\n\n    return `<span class=\"${classOp}\" data-tags=\"${jsonTag}\">`;\n  }\n\n  // Based on the \"remarkable-katex\" package: https://github.com/bradhowes/remarkable-katex\n  //   This modification doesn't load the katex module, since it is only needed when a new page is being shown\n  //   Instead, Katex is treated as any other tags. This saves about 300kb on page load.\n  parseKatex(): void {\n    const backslash: string = \"\\\\\";\n    const delimiter: string = \"$\";\n\n    /**\n     * Parse '$$' as a block. Based off of a similar method in remarkable.\n     */\n    const parseBlockKatex = (\n      state: Remarkable.StateBlock,\n      startLine: number,\n      endLine: number,\n    ): boolean => {\n      let haveEndMarker: boolean = false;\n      let pos: number = state.bMarks[startLine] + state.tShift[startLine];\n      let max: number = state.eMarks[startLine];\n\n      if (pos + 1 > max) {\n        return false;\n      }\n\n      const marker: string = state.src.charAt(pos);\n      if (marker !== delimiter) {\n        return false;\n      }\n\n      // Scan marker length\n      const mem: number = pos;\n      // converts marker to Number\n      pos = state.skipChars(pos, +marker);\n      const len: number = pos - mem;\n\n      if (len !== 2) {\n        return false;\n      }\n\n      // Search end of block\n      let nextLine: number = startLine;\n\n      while (true) {\n        ++nextLine;\n        if (nextLine >= endLine) {\n          break;\n        }\n\n        pos = state.bMarks[nextLine] + state.tShift[nextLine];\n        max = state.eMarks[nextLine];\n\n        if (pos < max && state.tShift[nextLine] < state.blkIndent) {\n          break;\n        }\n        if (state.src.charAt(pos) !== delimiter) {\n          continue;\n        }\n        if (state.tShift[nextLine] - state.blkIndent >= 4) {\n          continue;\n        }\n\n        pos = state.skipChars(pos, +marker);\n        if (pos - mem < len) {\n          continue;\n        }\n\n        pos = state.skipSpaces(pos);\n        if (pos < max) {\n          continue;\n        }\n\n        haveEndMarker = true;\n        break;\n      }\n\n      // If a fence has heading spaces, they should be removed from its inner block\n      const content: string = state\n        .getLines(startLine + 1, nextLine, state.tShift[startLine], true)\n        .replace(/[ \\n]+/g, \" \")\n        .trim();\n\n      state.tokens.push({\n        type: \"katex\",\n        content,\n        lines: [startLine, nextLine + (haveEndMarker ? 1 : 0)],\n        level: state.level,\n      });\n      state.line = nextLine + (haveEndMarker ? 1 : 0);\n      return true;\n    };\n\n    /**\n     * Look for '$' or '$$' spans in Markdown text. Based off of the 'fenced' parser in remarkable.\n     */\n    const parseInlineKatex = (\n      state: Remarkable.StateInline,\n      silent: boolean,\n    ): boolean => {\n      const start: number = state.pos;\n      const max: number = state.posMax;\n      let pos: number = start;\n\n      // Unexpected starting character\n      if (state.src.charAt(pos) !== delimiter) {\n        return false;\n      }\n\n      ++pos;\n      while (pos < max && state.src.charAt(pos) === delimiter) {\n        ++pos;\n      }\n\n      // Capture the length of the starting delimiter -- closing one must match in size\n      const marker: string = state.src.slice(start, pos);\n      if (marker.length > 2) {\n        return false;\n      }\n\n      const spanStart: number = pos;\n      let escapedDepth: number = 0;\n      while (pos < max) {\n        const char: string = state.src.charAt(pos);\n        if (\n          char === \"{\" &&\n          (pos === 0 || state.src.charAt(pos - 1) !== backslash)\n        ) {\n          escapedDepth++;\n        } else if (\n          char === \"}\" &&\n          (pos === 0 || state.src.charAt(pos - 1) !== backslash)\n        ) {\n          escapedDepth--;\n          if (escapedDepth < 0) {\n            return false;\n          }\n        } else if (char === delimiter && escapedDepth === 0) {\n          const matchStart: number = pos;\n          let matchEnd: number = pos + 1;\n          while (matchEnd < max && state.src.charAt(matchEnd) === delimiter) {\n            ++matchEnd;\n          }\n\n          if (matchEnd - matchStart === marker.length) {\n            if (!silent) {\n              const content: string = state.src\n                .slice(spanStart, matchStart)\n                .replace(/[ \\n]+/g, \" \")\n                .trim();\n              state.push({\n                type: \"katex\",\n                content,\n                block: marker.length > 1,\n                level: state.level,\n              });\n            }\n            state.pos = matchEnd;\n            return true;\n          }\n        }\n        pos++;\n      }\n\n      if (!silent) {\n        state.pending += marker;\n      }\n      state.pos += marker.length;\n\n      return true;\n    };\n\n    this.md.inline.ruler.push(\"katex\", parseInlineKatex.bind(this), {});\n    this.md.block.ruler.push(\"katex\", parseBlockKatex.bind(this), {});\n    this.md.renderer.rules.katex = (\n      tokens: Remarkable.BlockContentToken[],\n      idx: number,\n    ): string => {\n      return `<span class=\"tagging-katex\">${tokens[idx].content}</span>`;\n    };\n  }\n}\n", "// ---------\n// search.js controls the search actions and redirects\n\nexport class Search {\n  private navLock: boolean;\n  private currentActiveSearch: string | null;\n  private techPages: Map<\n    { document: string; section: string; dim: string; ref: string },\n    string\n  >;\n  private addPageChangeEvent: (element: HTMLElement) => void;\n\n  constructor(\n    techPages: Map<\n      { document: string; section: string; dim: string; ref: string },\n      string\n    >,\n    addPageChangeEvent: (element: HTMLElement) => void,\n  ) {\n    this.navLock = false;\n    this.currentActiveSearch = null;\n    this.techPages = techPages;\n    this.addPageChangeEvent = addPageChangeEvent;\n    this.searchBoxListener = this.searchBoxListener.bind(this);\n  }\n\n  // Init nav-bar\n  initSearchIcons(): void {\n    const search: HTMLElement | null = document.querySelector(\n      \"#nav-bar__searchbox\",\n    );\n    if (!search) {\n      return; // Exit if the search element is not found\n    }\n\n    search.addEventListener(\"click\", this.searchBoxListener);\n\n    const input: HTMLInputElement | null = document.querySelector(\n      \"#nav-bar__search--input\",\n    );\n    if (input) {\n      input.addEventListener(\"keyup\", this.filterFunction.bind(this));\n      input.addEventListener(\"focusin\", this.filterFunction.bind(this));\n    }\n\n    // Dynamically add the `targetParam` property to the `search` element\n    (search as HTMLElement & { targetParam: string }).targetParam = \"search\";\n\n    const games: HTMLElement | null = document.querySelector(\n      \"#nav-bar__games--icon\",\n    );\n    if (games) {\n      games.addEventListener(\"click\", this.gamesFunction.bind(this));\n    }\n\n    // Search has an input field which has a filter function when you type\n    // If you focus out of the pop-ups for both icons, they will disappear\n    //   things are cleared and CSS controls the animation\n    search.addEventListener(\"focusout\", (event: FocusEvent) => {\n      const searchField: HTMLElement | null =\n        document.querySelector(\"#nav-bar__search\");\n      if (!searchField) {\n        return;\n      }\n      event.stopPropagation();\n      if (!searchField.contains(event.relatedTarget as Node)) {\n        this.clearFunction();\n      }\n    });\n\n    // First create the HTML elements for each, then fill with the links\n    this.fillSearch();\n  }\n\n  initOnboardingIcon(): void {\n    const onboardingIcon: HTMLElement | null = document.querySelector(\n      \"#content__home__onboarding--icon\",\n    );\n    if (!onboardingIcon) {\n      return; // Exit if the onboarding icon element is not found\n    }\n\n    onboardingIcon.addEventListener(\"click\", this.gamesFunction.bind(this));\n  }\n\n  // Click event for the icons\n  searchBoxListener(event: Event): void {\n    if (this.navLock) {\n      return;\n    }\n\n    const target = event.currentTarget as HTMLElement & {\n      targetParam?: string;\n    };\n    const type: string | undefined = target.targetParam;\n\n    if (!type) {\n      return; // Exit if targetParam is not defined\n    }\n\n    this.currentActiveSearch = type;\n    this.injectSearchBox(\"#nav-bar__search\");\n\n    const searchCount: HTMLElement | null = document.querySelector(\n      \".nav-bar__search--results\",\n    );\n    if (searchCount === null) {\n      this.fillSearch();\n    }\n  }\n\n  // Makes the box for games or search appear\n  injectSearchBox(id: string): void {\n    if (this.navLock) {\n      return;\n    }\n\n    const searchIcon: HTMLElement | null = document.querySelector(id);\n    if (!searchIcon) {\n      return; // Exit if the search icon element is not found\n    }\n    searchIcon.removeEventListener(\"click\", this.searchBoxListener);\n\n    const baseName: string = `${id}box`;\n    const inputName: string = `${id}--input`;\n\n    const base: HTMLElement | null = document.querySelector(baseName);\n    const inputField: HTMLInputElement | null =\n      document.querySelector(inputName);\n\n    if (!base) {\n      return; // Exit if the base element is not found\n    }\n\n    // Based on min mobile widths\n    let searchboxWidth: number = 280;\n    if (this.currentActiveSearch === \"search\") {\n      if (document.body.clientWidth >= 480) {\n        searchboxWidth = 400;\n      }\n    } else {\n      searchboxWidth = 280;\n    }\n    base.style.width = `${searchboxWidth}px`;\n\n    // Focus on the elements to use focusout to exit them\n    if (this.currentActiveSearch === \"search\") {\n      if (inputField) {\n        inputField.focus();\n      }\n    } else {\n      base.focus();\n    }\n  }\n\n  // Clear everthing and then show the icon again\n  clearFunction(): void {\n    // Function to hide all computed links\n    const searchBox: HTMLElement | null = document.querySelector(\n      \"#nav-bar__searchbox\",\n    );\n    if (!searchBox) {\n      return; // Exit if the search box element is not found\n    }\n\n    this.navLock = true;\n\n    const referenceBox: HTMLElement = searchBox;\n    const referenceId: string = \"#nav-bar__search\";\n\n    const links: HTMLCollectionOf<Element> =\n      referenceBox.getElementsByClassName(\"button__redirect\");\n    for (const link of links) {\n      (link as HTMLElement).style.display = \"none\";\n    }\n\n    const hrElement: HTMLElement | null = document.querySelector(\n      `${referenceId}--hr`,\n    );\n    if (hrElement) {\n      hrElement.style.display = \"none\";\n    }\n\n    this.navLock = false;\n  }\n\n  // Filter up to 6 options when you type something in search\n  filterFunction(): void {\n    const idReference: string = \"#nav-bar__search\";\n\n    if (this.currentActiveSearch === \"games\") {\n      return;\n    }\n\n    // Gets the value from the user input, set each word into an array\n    const input: HTMLInputElement | null = document.querySelector(\n      `${idReference}--input`,\n    );\n    if (!input) {\n      return; // Exit if the input element is not found\n    }\n\n    const filter: string = input.value.toUpperCase().trim();\n    const filterArray: string[] = filter.split(\" \");\n\n    // Gets the element of the container and all current computed links\n    const searchBox: HTMLElement | null = document.querySelector(\n      `${idReference}box`,\n    );\n    if (!searchBox) {\n      return; // Exit if the search box element is not found\n    }\n\n    const links: HTMLCollectionOf<Element> =\n      searchBox.getElementsByClassName(\"button__redirect\");\n    let searchCounter: number = 0;\n\n    for (const linkElement of links) {\n      const link = linkElement as HTMLElement;\n\n      // For each link, test if the user input makes part of its text value (ignoring empty inputs)\n      // Hide any link that does not have any relation to the current input\n      let txtValue: string = link.textContent || link.innerText || \"\";\n      txtValue += ` ${link.dataset.section || \"\"} ${link.dataset.document || \"\"}`;\n      const compareTxtValue: string = txtValue.toUpperCase();\n\n      let containFlag: boolean = true;\n      for (const stringFilter of filterArray) {\n        if (!compareTxtValue.includes(stringFilter) || filter.length === 0) {\n          containFlag = false;\n          break;\n        }\n      }\n\n      if (containFlag) {\n        if (\"TALES OF\".includes(filter) || filter === \"T\" || filter === \"TO\") {\n          if (link.dataset.tag === \"game\") {\n            link.style.display = \"block\";\n          }\n          continue;\n        }\n\n        // Hard limit of 12 options on screen\n        link.style.display =\n          searchCounter < 12 || link.dataset.tag === \"game\" ? \"block\" : \"none\";\n        searchCounter++;\n      } else {\n        link.style.display = \"none\";\n      }\n    }\n\n    const hrElement: HTMLElement | null = document.querySelector(\n      `${idReference}--hr`,\n    );\n    if (hrElement) {\n      hrElement.style.display =\n        (searchCounter > 0 ||\n          \"TALES OF\".includes(filter) ||\n          filter === \"T\" ||\n          filter === \"TO\") &&\n        filter.length > 0\n          ? \"block\"\n          : \"none\";\n    }\n  }\n\n  // Perform a pre-define search for games\n  gamesFunction(): void {\n    // Game search now uses the normal search menu and just fills it with \"Tales of\"\n    const searchBox: HTMLElement | null = document.querySelector(\n      \"#nav-bar__searchbox\",\n    );\n    if (!searchBox) {\n      return; // Exit if the search box element is not found\n    }\n\n    const links: HTMLCollectionOf<Element> =\n      searchBox.getElementsByClassName(\"button__redirect\");\n    for (const link of links) {\n      (link as HTMLElement).style.display = \"none\";\n    }\n\n    const hrElement: HTMLElement | null = document.querySelector(\n      \"#nav-bar__search--hr\",\n    );\n    if (hrElement) {\n      hrElement.style.display = \"none\";\n    }\n\n    this.navLock = false;\n\n    const inputField: HTMLInputElement | null = document.querySelector(\n      \"#nav-bar__search--input\",\n    );\n    if (!inputField) {\n      return; // Exit if the input field is not found\n    }\n\n    const filter: string = \"Tales of\";\n    inputField.value = filter;\n\n    // Call the current keyup event of the inputField\n    inputField.focus();\n  }\n\n  // Fill search results based on loaded games\n  fillSearch(): void {\n    // Get all items on the tab bar\n    const searchContents1L: string[] = [];\n    const searchContents2L: string[] = [];\n    const searchResults: HTMLElement | null = document.querySelector(\n      \"#nav-bar__searchbox\",\n    );\n\n    if (!searchResults) {\n      return; // Exit if the search results container is not found\n    }\n\n    // Insert a hidden hr on the first slot of the search\n    const hrElem: string = `\n      <hr id=\"nav-bar__search--hr\" tabindex=\"0\" style=\"display: none;\">\n    `;\n    searchResults.insertAdjacentHTML(\"beforeend\", hrElem);\n\n    // Tech pages are created by the parser. main saves that and uses it to create the search object\n    for (const [key, techDocument] of this.techPages.entries()) {\n      if (\n        key.dim === \"N/A\" ||\n        key.document.includes(\"-C\") ||\n        key.document.includes(\"-B\")\n      ) {\n        continue; // Skip items with dim as \"N/A\" (like readme)\n      }\n\n      // Create the game instance to add to the nav-bar\n      const parser: DOMParser = new DOMParser();\n\n      // Now read the content to use for the search functionality on the nav-bar\n      const doc: Document = parser.parseFromString(techDocument, \"text/html\");\n\n      // Get all h1 elements in the order they appear in the document\n      const headings1: NodeListOf<HTMLHeadingElement> =\n        doc.querySelectorAll(\"h1\");\n\n      // H1s have different styling. Additionally, they should appear first in the list\n      headings1.forEach(() => {\n        const searchContent1: string = `\n          <a href=\"/${key.document}\" \n             title=\"${key.section}\" \n             data-document=\"${key.document}\" \n             class=\"nav-bar__search--results button__redirect\" \n             tabindex=\"0\" \n             data-section=\"${key.section}\" \n             data-tag=\"game\">\n            <span class=\"nav-bar__search--results--games material-symbols-rounded\">sports_esports</span>\n            <b>${key.section}</b>\n          </a>\n        `;\n        searchContents1L.push(searchContent1);\n      });\n\n      const headings2: NodeListOf<HTMLHeadingElement> =\n        doc.querySelectorAll(\"h1, h2, h3, h4\");\n\n      // Process each heading in the order they appear\n      let currentH2: string | null = null;\n      headings2.forEach((currentHeading) => {\n        if (currentHeading.tagName === \"H1\") {\n          // No need to treat h1s again\n          currentH2 = null;\n        } else {\n          if (currentHeading.tagName === \"H2\") {\n            currentH2 = currentHeading.id;\n          }\n          if (\n            (currentH2 === \"glitches\" || currentH2 === \"techniques\") &&\n            currentHeading.id !== \"general-techniques\" &&\n            currentHeading.tagName !== \"H2\"\n          ) {\n            // label is key.section removing \"Tales of\" and leading and trailing spaces\n            const label: string = key.section.replace(\"Tales of\", \"\").trim();\n            const searchContent2: string = `\n              <a href=\"/${key.document}\" \n                 title=\"${key.section}\" \n                 data-document=\"${key.document}\" \n                 class=\"nav-bar__search--results button__redirect\" \n                 tabindex=\"0\" \n                 data-section=\"${key.section}\" \n                 data-tag=\"tech\" \n                 data-redirect=\"#${currentHeading.id}\">\n                <span class=\"nav-bar__search--results--games material-symbols-rounded\">book_2</span>\n                <b>${label}</b>\n                <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;${currentHeading.textContent || \"\"}\n              </a>\n            `;\n            searchContents2L.push(searchContent2);\n          }\n        }\n      });\n    }\n\n    // Sort the search results\n    searchContents1L.sort();\n    searchContents2L.sort();\n    const searchContents1: string = searchContents1L.join(\"\");\n    const searchContents2: string = searchContents2L.join(\"\");\n\n    // Join searchContents1 and searchContents2\n    const searchContents: string = `${searchContents1}${searchContents2}`;\n\n    // Insert the HTML on the search bar\n    searchResults.insertAdjacentHTML(\"beforeend\", searchContents);\n\n    // Add event listeners to all search result links\n    document.querySelectorAll(\"a.nav-bar__search--results\").forEach((item) => {\n      this.addPageChangeEvent(item as HTMLElement);\n    });\n  }\n\n  // --- Show all headings for a specific ID\n  revealID(id: string): void {\n    // Gets the object of the provided ID\n    let targetHeading: HTMLElement | null = document.getElementById(id);\n    if (!targetHeading) {\n      // Target hidden within an h2 section -- first we need to open it\n      // Get h2 section from session storage\n      const h2Collection: Array<[string, string, string]> | null = JSON.parse(\n        sessionStorage.getItem(\"h2Collection\") || \"null\",\n      );\n      if (!h2Collection) {\n        return; // Exit if h2Collection is not found\n      }\n      console.log(h2Collection);\n\n      let h2Section: number = 0;\n      for (let x = 0; x < h2Collection.length; x++) {\n        if (h2Collection[x][2].includes(`id=\"${id}\"`)) {\n          h2Section = x;\n          break;\n        }\n      }\n\n      const selectorItems: NodeListOf<HTMLElement> = document.querySelectorAll(\n        \".content__selectorbox--item\",\n      );\n      if (selectorItems[h2Section]) {\n        selectorItems[h2Section].click();\n      }\n    }\n\n    targetHeading = document.getElementById(id);\n    if (!targetHeading) {\n      return; // Exit if targetHeading is still not found\n    }\n\n    let hiddenItems: string[] | null = null;\n    let success: boolean = false;\n\n    // Gets the div that holds all the content for a given heading\n    if (targetHeading.tagName === \"H4\") {\n      if (targetHeading.dataset.open) {\n        hiddenItems = targetHeading.dataset.open.split(\" \");\n        success = true;\n      }\n    } else if (\n      targetHeading.parentNode instanceof HTMLElement &&\n      targetHeading.parentNode.className.includes(\"content__\")\n    ) {\n      const firstChild = targetHeading.parentNode\n        .firstElementChild as HTMLElement | null;\n      if (firstChild?.dataset.open) {\n        hiddenItems = firstChild.dataset.open.split(\" \");\n        success = true;\n      }\n    } else if (targetHeading.parentNode?.parentNode instanceof HTMLElement) {\n      const firstChild = targetHeading.parentNode.parentNode\n        .firstElementChild as HTMLElement | null;\n      if (firstChild?.dataset.open) {\n        hiddenItems = firstChild.dataset.open.split(\" \");\n        success = true;\n      }\n    }\n\n    if (success && hiddenItems) {\n      // Iterates over all related classes needed to reveal a specific heading\n      hiddenItems.forEach((item: string) => {\n        const targetList: HTMLCollectionOf<Element> =\n          document.getElementsByClassName(item);\n        // Get all objects that are possibly hidden\n        for (const target of targetList) {\n          const targetElement = target as HTMLElement;\n          if (targetElement.hidden) {\n            targetElement.hidden = false;\n            // Change the button depending on the current state\n            if (\n              targetElement.parentNode instanceof HTMLElement &&\n              targetElement.parentNode.className.includes(\"content__\")\n            ) {\n              const firstChild = targetElement.parentNode.firstElementChild\n                ?.firstChild as HTMLElement | null;\n              if (firstChild && firstChild.innerHTML === \"expand_circle_down\") {\n                firstChild.innerHTML = \"expand_circle_up\";\n              }\n            } else if (\n              targetElement.parentNode?.parentNode instanceof HTMLElement\n            ) {\n              const firstChild = targetElement.parentNode.parentNode\n                .firstElementChild?.firstChild as HTMLElement | null;\n              if (firstChild && firstChild.innerHTML === \"expand_circle_down\") {\n                firstChild.innerHTML = \"expand_circle_up\";\n              }\n            }\n          }\n        }\n      });\n    }\n  }\n}\n", "// ---------\n// toc.js is the table of content functionality for tech pages\n//   there are two parts, the one that appears on the side, and another which is in the section-container (helps with mobile)\n\nimport { Helper } from \"./helper.ts\";\n\ninterface Heading {\n  name: string;\n  clientY: number;\n  isH3: boolean;\n  obj: HTMLElement;\n  id: string;\n}\n\nexport class TOC {\n  private headings: Heading[];\n  private ticking: boolean;\n  private helperObj: Helper;\n\n  constructor(helperObj: Helper) {\n    this.headings = [];\n    this.ticking = false;\n    this.helperObj = helperObj;\n\n    // Enable smart section highlighting based on scroll position\n    //   bind the scroll event listener\n    document.addEventListener(\"scroll\", () => {\n      if (!this.ticking && this.helperObj.inTechPage) {\n        window.requestAnimationFrame(() => {\n          this.highlightTOC();\n          this.ticking = false;\n        });\n        this.ticking = true;\n      }\n    });\n  }\n\n  // --- Clear headings variable\n  clearHeadings(): void {\n    this.headings = [];\n  }\n\n  // --- Creates the TOC based on the provided document. Only for tech pages (looks off when used with something like readme)\n  //      this, however, requires a strict styling format for the markdown file\n  createTOC(currentDocument: string): void {\n    // Check if tocborder already exists\n    let tocBorder: HTMLElement | null =\n      document.getElementById(\"content__tocborder\");\n    let selector: HTMLElement | null = null;\n    let content: HTMLElement | null = null;\n    let toc: HTMLElement | null = null;\n    let tocMobile: HTMLElement | null = null;\n\n    if (tocBorder == null) {\n      // Check if it is a tech page by searching for an active h2 (class == content__selectorbox--item selected)\n      const techPage: HTMLElement | null = document.querySelector(\n        \".content__selectorbox--item.selected\",\n      );\n      if (techPage == null) {\n        return;\n      }\n\n      // Gets div of id content and creates a new div as children\n      content = document.getElementById(\"content\");\n      if (!content) return; // Ensure content exists\n\n      tocBorder = document.createElement(\"div\");\n      tocBorder.id = \"content__tocborder\";\n      content.appendChild(tocBorder);\n\n      toc = document.createElement(\"div\");\n      toc.id = \"content__toc\";\n\n      tocMobile = document.createElement(\"div\");\n      tocMobile.id = \"content__tocmobile\";\n\n      tocBorder.appendChild(toc);\n\n      // Set TOC y location just after #content__selector\n      selector = document.getElementById(\"content__selector\");\n      if (!selector) return; // Ensure selector exists\n\n      tocBorder.style.top = `${selector.offsetTop + content.offsetTop + 10}px`;\n\n      // Also add an icon on the #section-container__div for mobile\n      const tocIcon: HTMLElement = document.createElement(\"span\");\n      tocIcon.className = \"material-symbols-rounded\";\n      tocIcon.id = \"content__tocicon\";\n      tocIcon.innerHTML = \"menu_book\";\n      tocIcon.style.display = \"none\";\n\n      const sectionContainer: HTMLElement | null = document.getElementById(\n        \"section-container__div\",\n      );\n      if (!sectionContainer) return; // Ensure sectionContainer exists\n\n      sectionContainer.appendChild(tocIcon);\n\n      // And a box so the ToC can be added to it\n      const tocIconBox: HTMLElement = document.createElement(\"div\");\n      tocIconBox.id = \"content__tocicon--box\";\n      tocIconBox.style.width = \"0px\";\n      tocIconBox.tabIndex = 0; // Set tabindex so it can get focused\n      sectionContainer.appendChild(tocIconBox);\n\n      // Add the toc to the box\n      tocIconBox.appendChild(tocMobile);\n      this.helperObj.dragScrollElement(`#${tocIconBox.id}`, 1);\n      this.helperObj.dragScrollElement(`#${toc.id}`, 1);\n\n      // Add an event listener to the icon\n      tocIcon.addEventListener(\"click\", () => {\n        const box: HTMLElement | null = document.getElementById(\n          \"content__tocicon--box\",\n        );\n        if (!box) return; // Ensure box exists\n\n        const boxWidth: number = document.body.clientWidth >= 480 ? 360 : 300;\n        box.style.width = `${boxWidth}px`;\n        box.className = \"fadein\";\n        tocIconBox.style.display = \"block\";\n        box.focus();\n      });\n\n      tocIconBox.addEventListener(\"focusout\", (event: FocusEvent) => {\n        const box: HTMLElement | null = document.getElementById(\n          \"content__tocicon--box\",\n        );\n        if (!box) return; // Ensure box exists\n\n        event.stopPropagation();\n        box.className = \"fadeout\";\n      });\n    } else {\n      selector = document.getElementById(\"content__selector\");\n      content = document.getElementById(\"content\");\n      toc = document.getElementById(\"content__toc\");\n      tocMobile = document.getElementById(\"content__tocmobile\");\n    }\n\n    if (!tocBorder || !selector) return; // Ensure tocBorder and selector exist\n\n    // Set TOCborder size to content size - offset\n    tocBorder.style.height = `calc(100% - ${selector.offsetTop + 150}px)`;\n\n    // Add content to TOC\n    const tocContent: string = \"<p>ON THIS SECTION</p><hr>\";\n    if (toc) toc.innerHTML = tocContent;\n    if (tocMobile) tocMobile.innerHTML = tocContent;\n\n    // Scan headings (h3s and h4s) on #content__currenth2\n    this.headings = [];\n    const h3s: NodeListOf<HTMLHeadingElement> = document.querySelectorAll(\n      \"#content__currenth2 h3\",\n    );\n    const h4s: NodeListOf<HTMLHeadingElement> = document.querySelectorAll(\n      \"#content__currenth2 h4\",\n    );\n\n    for (const h3 of h3s) {\n      this.headings.push({\n        name: h3.textContent || \"\",\n        clientY: h3.getBoundingClientRect().top,\n        isH3: true,\n        obj: h3,\n        id: h3.id,\n      });\n    }\n\n    for (const h4 of h4s) {\n      this.headings.push({\n        name: h4.textContent || \"\",\n        clientY: h4.getBoundingClientRect().top,\n        isH3: false,\n        obj: h4,\n        id: h4.id,\n      });\n    }\n\n    // Sort the objects by clientY\n    this.headings.sort((a, b) => a.clientY - b.clientY);\n\n    // Create a list of links to the headings\n    let tocLinks: string = \"\";\n    for (const heading of this.headings) {\n      let link: string = \"\";\n      link = heading.isH3\n        ? `<div data-document=\"${currentDocument}\" data-section=\"${this.helperObj.currentSection}\" data-redirect=\"#${heading.id}\" class=\"content__toc--search button__redirect\" style=\"display: block;\">`\n        : `<div data-document=\"${currentDocument}\" data-section=\"${this.helperObj.currentSection}\" data-redirect=\"#${heading.id}\" class=\"content__toc--search content__toc--search-h4 button__redirect\" style=\"display: block;\">`;\n      link = link.concat(`${heading.name}</div>`);\n      tocLinks = tocLinks.concat(link);\n    }\n\n    // Add the list to the TOC\n    if (toc) toc.innerHTML = tocContent.concat(tocLinks);\n    if (tocMobile) tocMobile.innerHTML = tocContent.concat(tocLinks);\n  }\n\n  // --- Check which H3 is the current one based on scrollPos & headings and hide all other h4s that are not theirs\n  highlightTOC(): void {\n    // Variables to track the current and next H3 headings\n    let currentH3: Heading | null = null;\n    let currentH3Index: number = 0;\n    let nextH3Index: number = 0;\n\n    // Determine the current H3 based on scroll position\n    for (let i: number = 0; i < this.headings.length; i++) {\n      const heading: Heading = this.headings[i];\n      if (heading.isH3) {\n        // Highlight the new section if it makes part of 75% of the page (25% of the top) or if it within 150px\n        const headingTop: number = heading.obj.getBoundingClientRect().top;\n        const threshold: number = Math.max(window.innerHeight * 0.25, 150);\n\n        if (headingTop <= threshold || currentH3 === null) {\n          currentH3 = heading;\n          currentH3Index = i;\n        } else {\n          nextH3Index = i;\n          break;\n        }\n      }\n    }\n\n    // Highlight the current H3 and remove active class from others\n    if (currentH3 !== null) {\n      const currentActive: NodeListOf<HTMLElement> = document.querySelectorAll(\n        \".content__toc--search.active\",\n      );\n      currentActive.forEach((active: HTMLElement) =>\n        active.classList.remove(\"active\"),\n      );\n\n      const currentH3Links: NodeListOf<HTMLElement> = document.querySelectorAll(\n        `.content__toc--search[data-redirect=\"#${currentH3.id}\"]`,\n      );\n      currentH3Links.forEach((link: HTMLElement) =>\n        link.classList.add(\"active\"),\n      );\n    }\n\n    // Hide SEARCH h4s (display: none) before and after the indexes and show (display:block) the ones between\n    for (let i: number = 0; i < this.headings.length; i++) {\n      const heading: Heading = this.headings[i];\n      if (!heading.isH3) {\n        const isWithinRange: boolean =\n          (i >= currentH3Index && i <= nextH3Index) ||\n          (nextH3Index === 0 && currentH3Index > 0 && i >= currentH3Index) ||\n          (nextH3Index === 0 && currentH3Index === 0);\n\n        const searchH4: NodeListOf<HTMLElement> = document.querySelectorAll(\n          `.content__toc--search[data-redirect=\"#${heading.id}\"]`,\n        );\n\n        searchH4.forEach((search: HTMLElement) => {\n          if (isWithinRange) {\n            search.style.display = \"block\";\n            search.classList.add(\"active\");\n          } else {\n            search.style.display = \"none\";\n            search.classList.remove(\"active\");\n          }\n        });\n      }\n    }\n  }\n\n  // --- Completely remove the TOC\n  clearSectionTOC(): void {\n    const tocIcon: HTMLElement | null =\n      document.getElementById(\"content__tocicon\");\n    if (tocIcon !== null) {\n      tocIcon.remove();\n    }\n\n    const tocBox: HTMLElement | null = document.getElementById(\n      \"content__tocicon--box\",\n    );\n    if (tocBox !== null) {\n      tocBox.remove();\n    }\n  }\n}\n", "// ---\n// headings.js contains styling functions for headings. ex: ## ### ####\n//   used a lot in tech documents. This also saves something in storage that can be used to make section specific styling\nimport { Helper } from \"./helper.js\";\n\nexport class Headings {\n  private colorCollection: [string, string][];\n  private h2Collection: Array<[string, string, string | [string, string]]>;\n  private helperObj: Helper;\n\n  constructor(helperObj: Helper) {\n    // Blue is currently unused.\n    this.colorCollection = [\n      [\"yellow\", \"#f8d959\"],\n      [\"pink\", \"#fe796f\"],\n      [\"teal\", \"#45c9c9\"],\n      [\"green\", \"#58f15b\"],\n      [\"red\", \"#e74a41\"],\n      [\"lavender\", \"#c8a2b0\"],\n      [\"blue\", \"#205aaa\"],\n    ];\n    // h2Collection will have every data for each section, that way we can load each one individually\n    this.h2Collection = [];\n    this.helperObj = helperObj;\n  }\n\n  returnH2Collection(): Array<[string, string, string | [string, string]]> {\n    return this.h2Collection;\n  }\n\n  // Adds collapse functionality to headings\n  //   for ##, it also split them into unique sections\n  collapseHeadings(page: HTMLElement): void {\n    this.h2Collection = [];\n    let currentH4: string | null = null;\n    let currentH3: string | null = null;\n    let currentH2: string | null = null;\n    let currentH2Text: string = \"\";\n    let newInner: string = \"\";\n    let newHeading: string = \"\";\n    let firstH2: boolean = true;\n    const currentHTML: string[] = page.innerHTML.split(\"\\n\");\n    const contentElem: HTMLElement | null = document.getElementById(\"content\");\n\n    if (!contentElem) {\n      return;\n    }\n\n    for (let i = 0; i < currentHTML.length; i++) {\n      // Iterates over all the lines from the created HTML and uses it to create a new document with collapsing headings\n      if (currentHTML[i].includes('h4 id=\"')) {\n        // Close the div if an h4 is in progress\n        if (currentH4) {\n          newInner += `</div></div>\\n`;\n        }\n\n        // Finding reference ID (the id from the original heading)\n        currentH4 = currentHTML[i].substring(\n          currentHTML[i].indexOf('h4 id=\"') + 7,\n        );\n        currentH4 = currentH4.substring(0, currentH4.indexOf('\"'));\n\n        // Starts a div for the current heading, divided into title and content\n        newInner += `\n          <div class=\"content__h4\">\n        `;\n        // Injects the search tags into the h4 --> just after the end of id\n        const injectionIndex =\n          currentHTML[i].indexOf('h4 id=\"') + 7 + currentH4.length + 1;\n        const injectedSearch = ` data-open=\"${currentH4} ${currentH3} ${currentH2}\"`;\n        const newH4 =\n          currentHTML[i].substring(0, injectionIndex) +\n          injectedSearch +\n          currentHTML[i].substring(injectionIndex);\n        newInner += `\n          ${newH4}\n          <div class=\"${currentH4}\">\n        `;\n      } else if (currentHTML[i].includes('h3 id=\"')) {\n        // Close the div if an h4 or h3 is in progress\n        if (currentH4) {\n          newInner += `</div></div>\\n`;\n          currentH4 = null;\n        }\n        if (currentH3) {\n          newInner += `\n            <hr class=\"content__h3--divider\" draggable=\"false\" />\n            </div></div>\n          `;\n        }\n\n        // Finding reference ID (the id from the original heading)\n        currentH3 = currentHTML[i].substring(\n          currentHTML[i].indexOf('h3 id=\"') + 7,\n        );\n        currentH3 = currentH3.substring(0, currentH3.indexOf('\"'));\n\n        // Starts a div for the current heading, divided into title and content\n        newInner += `\n          <div class=\"content__h3\">\n            <button class=\"content__collapse\" data-open=\"${currentH3} ${currentH2}\">\n              <span class=\"material-symbols-rounded\">expand_circle_up</span>\n            </button>\n            ${currentHTML[i]}\n            <div class=\"${currentH3}\">\n        `;\n      } else if (currentHTML[i].includes('h2 id=\"')) {\n        // Close the div if an h4, h3, or h2 is in progress\n        firstH2 = false;\n        if (currentH4) {\n          newInner += `</div></div>\\n`;\n          currentH4 = null;\n        }\n        if (currentH3) {\n          newInner += `</div></div>\\n`;\n          currentH3 = null;\n        }\n        if (currentH2) {\n          newInner += `</div></div>\\n`;\n          // Save all content so far to the h2\n          this.h2Collection.push([currentH2, currentH2Text, newInner]);\n          newInner = \"\";\n        }\n\n        // Finding reference ID (the id from the original heading)\n        currentH2 = currentHTML[i].substring(\n          currentHTML[i].indexOf('h2 id=\"') + 7,\n        );\n        currentH2 = currentH2.substring(0, currentH2.indexOf('\"'));\n\n        // Find text so we can replicate the heading but without the id (moved to div)\n        currentH2Text = currentHTML[i].substring(\n          currentHTML[i].indexOf('\">') + 2,\n        );\n        currentH2Text = currentH2Text.substring(\n          0,\n          currentH2Text.indexOf(\"</h2>\"),\n        );\n\n        // Starts a div for the current heading, divided into title and content\n        newInner += `\n          <div class=\"content__h2\" id=\"${currentH2}\">\n            <div class=\"${currentH2}\">\n        `;\n      } else {\n        if (firstH2) {\n          // Within the first lines of the content. Save in another variable since a tab will be added after it\n          newHeading += `${currentHTML[i]}\\n`;\n        } else {\n          // Normal text/tags within headings\n          newInner += `${currentHTML[i]}\\n`;\n        }\n      }\n    }\n\n    // Closes divs if any is still open\n    if (currentH4) {\n      newInner += `</div></div>\\n`;\n    }\n    if (currentH3) {\n      newInner += `</div></div>\\n`;\n    }\n    if (currentH2) {\n      newInner += `</div></div>\\n`;\n      this.h2Collection.push([currentH2, currentH2Text, newInner]);\n      newInner = \"\";\n    }\n\n    let selectionTab = `\n      <div id=\"content__selector\">\n        <div id=\"content__selectorbox\">\n    `;\n\n    // Based on h2Collection, create the individual tabs. Styling based on hardcoded values (colorCollection)\n    for (let i = 0; i < this.h2Collection.length; i++) {\n      const h2Tag = this.h2Collection[i][0];\n      const h2Text = this.h2Collection[i][1];\n      const h2Color = this.colorCollection[i % this.colorCollection.length];\n\n      // --- Create the tab\n      selectionTab += `\n        <div class=\"content__selectorbox--item\" data-open=\"${h2Tag}\" data-highlight=\"${h2Color[1]}\">\n          ${h2Text}\n        </div>\n      `;\n\n      // --- Add h2Color as extra parameters to h2Collection\n      this.h2Collection[i].push(h2Color);\n    }\n\n    // Save to session storage, used in search\n    sessionStorage.setItem(\"h2Collection\", JSON.stringify(this.h2Collection));\n\n    selectionTab += `\n        </div>\n        <hr id=\"content__selectorhr\"></hr>\n    `;\n\n    // Closes the div after selectionTab\n    const mobileChevrons = `\n      <div id=\"content__mobilechevrons\">\n        <span class=\"content__mobilechevrons--left material-symbols-rounded\">chevron_backward</span>\n        <span class=\"content__mobilechevrons--right material-symbols-rounded\">chevron_forward</span>\n      </div></div>\n      <div id=\"content__currenth2\"></div>\n    `;\n\n    page.innerHTML =\n      this.h2Collection.length > 0\n        ? `${newHeading}${selectionTab}${mobileChevrons}`\n        : newHeading;\n\n    this.helperObj.dragScrollElement(\"#content__selectorbox\", 0);\n\n    this.setupChevrons();\n\n    contentElem.style.visibility = \"visible\";\n  }\n\n  setupChevrons(): void {\n    // Get all required elements\n    const chevronBox = document.getElementById(\n      \"content__mobilechevrons\",\n    ) as HTMLElement | null;\n    const chevronLeft = document.querySelector(\n      \".content__mobilechevrons--left\",\n    ) as HTMLElement | null;\n    const chevronRight = document.querySelector(\n      \".content__mobilechevrons--right\",\n    ) as HTMLElement | null;\n    const selectorBox = document.getElementById(\n      \"content__selectorbox\",\n    ) as HTMLElement | null;\n\n    if (!chevronBox || !chevronLeft || !chevronRight || !selectorBox) {\n      return;\n    }\n\n    const updateChevronVisibility = (): void => {\n      const selectorBoxWidth = selectorBox.clientWidth;\n      const selectorBoxScrollWidth = selectorBox.scrollWidth;\n\n      if (selectorBoxWidth < selectorBoxScrollWidth) {\n        chevronBox.style.display = \"block\";\n        chevronBox.style.left = `${selectorBox.getBoundingClientRect().right}px`;\n      } else {\n        chevronBox.style.display = \"none\";\n      }\n\n      const scrollLeft = selectorBox.scrollLeft;\n      if (scrollLeft > 0) {\n        chevronLeft.classList.add(\"active\");\n      } else {\n        chevronLeft.classList.remove(\"active\");\n      }\n\n      if (scrollLeft < selectorBoxScrollWidth - selectorBoxWidth) {\n        chevronRight.classList.add(\"active\");\n      } else {\n        chevronRight.classList.remove(\"active\");\n      }\n    };\n\n    // Initial visibility check\n    updateChevronVisibility();\n\n    // Add resize event listener to update chevron visibility\n    window.addEventListener(\"resize\", updateChevronVisibility, true);\n\n    // Add click event listener for the left chevron\n    chevronLeft.addEventListener(\"click\", () => {\n      const selectorBoxWidth = selectorBox.offsetWidth;\n      const newScrollLeft = Math.max(\n        0,\n        selectorBox.scrollLeft - selectorBoxWidth,\n      );\n\n      selectorBox.scrollTo({\n        left: newScrollLeft,\n        behavior: \"smooth\",\n      });\n\n      setTimeout(() => updateChevronVisibility(), 700);\n    });\n\n    // Add click event listener for the right chevron\n    chevronRight.addEventListener(\"click\", () => {\n      const selectorBoxWidth = selectorBox.offsetWidth;\n      const newScrollLeft = Math.min(\n        selectorBox.scrollWidth - selectorBoxWidth,\n        selectorBox.scrollLeft + selectorBoxWidth,\n      );\n\n      selectorBox.scrollTo({\n        left: newScrollLeft,\n        behavior: \"smooth\",\n      });\n\n      setTimeout(() => updateChevronVisibility(), 700);\n    });\n\n    // Add scroll event listener to update chevron states dynamically\n    selectorBox.addEventListener(\"scroll\", () => {\n      updateChevronVisibility();\n    });\n  }\n\n  // This is the collapse event for when you click the icon for an h3\n  collapseHeadingStyle(event: Event): void {\n    const currentTarget = event.currentTarget as HTMLElement;\n\n    if (!currentTarget.dataset.open) {\n      return;\n    }\n\n    // Check the tags related to the current button\n    const openTags: string[] = currentTarget.dataset.open.split(\" \");\n\n    for (let i = 0; i < openTags.length; i++) {\n      const targetList: HTMLCollectionOf<Element> =\n        document.getElementsByClassName(openTags[i]);\n\n      // Get all objects that are possibly hidden\n      for (const target of targetList) {\n        const targetElement = target as HTMLElement;\n\n        if (targetElement.hidden) {\n          targetElement.hidden = false;\n\n          // Change the button depending on the current state\n          const firstChild = currentTarget.firstChild as HTMLElement | null;\n          if (firstChild && firstChild.innerHTML === \"expand_circle_down\") {\n            firstChild.innerHTML = \"expand_circle_up\";\n          }\n        } else if (i === 0) {\n          // Only hide if the click target is the current heading level and is currently not hidden\n          targetElement.hidden = true;\n\n          // Change the button depending on the current state\n          const firstChild = currentTarget.firstChild as HTMLElement | null;\n          if (firstChild && firstChild.innerHTML === \"expand_circle_up\") {\n            firstChild.innerHTML = \"expand_circle_down\";\n          }\n        }\n      }\n    }\n  }\n\n  // This iterates over all headings and adds a click event that copies them to your clipboard\n  shareHeadings(): void {\n    // Get the current pathname and remove the leading slash\n    let pathname: string = document.location.pathname.substring(1);\n\n    // Check if the pathname contains a redirect string (a `/`) and get its target\n    const splitPath: string[] = pathname.split(\"/\");\n    if (splitPath.length > 1) {\n      pathname = splitPath[0];\n    }\n\n    const baseUrl: string = window.location.origin;\n\n    // Select all h3 and h4 headings\n    const headings: NodeListOf<HTMLHeadingElement> =\n      document.querySelectorAll(\"h3, h4\");\n\n    // Iterate over each heading and add a click event listener\n    headings.forEach((heading: HTMLHeadingElement) => {\n      heading.style.cursor = \"copy\";\n      heading.addEventListener(\"click\", () => {\n        const headingUrl: string = `${baseUrl}/${pathname}/${heading.id}`;\n        // Set text to clipboard or do nothing\n        navigator.clipboard.writeText(headingUrl).catch(() => {});\n      });\n    });\n  }\n}\n", "// ---\n// directives.js contains styling functions for custom directives.\n//   this is after they are already treated as unique elements and get a tagging parameter\n//   we then change the original element here to show what is needed\nimport { Helper } from \"./helper\";\n\nexport class Directives {\n  private helperObj: Helper;\n  private katexObj: { renderToString: (input: string) => string } | null;\n\n  constructor(helperObj: Helper) {\n    // Bind methods if needed\n    this.compileDirectives = this.compileDirectives.bind(this);\n    this.sortTables = this.sortTables.bind(this);\n    this.treatSpoilers = this.treatSpoilers.bind(this);\n    this.styleImages = this.styleImages.bind(this);\n    this.compileTags = this.compileTags.bind(this);\n\n    this.helperObj = helperObj;\n    this.katexObj = null;\n  }\n\n  // This is used to set the KaTeX object from the main script\n  setKatex(katex: { renderToString: (input: string) => string }): void {\n    this.katexObj = katex;\n  }\n\n  // This transforms elements that were tagged (part of a custom directive) to something we can manipulate on HTML or with CSS\n  compileTags(): void {\n    // Iterate over every element that needs tagging\n    document\n      .querySelectorAll<HTMLElement>(\".tagging, .tagging-text\")\n      .forEach((taggedElement) => {\n        if (taggedElement.classList.contains(\"tagging-computed\")) {\n          return;\n        }\n        taggedElement.classList.add(\"tagging-computed\");\n\n        // Get tags from the dataset (saved as JSON)\n        const tagTextData = taggedElement.dataset.tags || \"{}\";\n        const tagData = JSON.parse(tagTextData.replace(/'/g, '\"'));\n\n        // Helper function to create media elements (images or videos)\n        const createMediaElement = (\n          type: \"img\" | \"video\",\n          src: string,\n          width: number,\n          height: number,\n          caption?: string,\n        ): HTMLElement => {\n          const mediaHolder = document.createElement(\"p\");\n          mediaHolder.style.opacity = \"1\";\n\n          let mediaTag: HTMLImageElement | HTMLVideoElement;\n          if (type === \"img\") {\n            mediaTag = document.createElement(\"img\");\n            mediaTag.alt = \"\";\n          } else {\n            mediaTag = document.createElement(\"video\");\n            mediaTag.preload = \"metadata\";\n            mediaTag.controls = true;\n            mediaTag.muted = true;\n            mediaTag.loop = true;\n\n            const source = document.createElement(\"source\");\n            source.src = src;\n            source.type = \"video/mp4\";\n            mediaTag.appendChild(source);\n          }\n\n          // Common properties for both images and videos\n          mediaTag.draggable = false;\n          mediaTag.width = width;\n          mediaTag.height = height;\n          mediaTag.style.order = \"2\";\n          mediaTag.style.width = \"80%\";\n          mediaTag.style.height = \"auto\";\n          mediaTag.style.maxWidth = \"640px\";\n          mediaTag.style.outline = \"none\";\n          mediaTag.style.borderRadius = \"14px\";\n          mediaTag.src = src;\n\n          mediaHolder.appendChild(mediaTag);\n\n          // Add caption if provided\n          if (caption) {\n            const captionElement = document.createElement(\"figcaption\");\n            captionElement.textContent = `\\xa0${caption}\\xa0`; // Non-breaking spaces for better formatting\n            mediaHolder.appendChild(captionElement);\n          }\n\n          return mediaHolder;\n        };\n\n        // Helper function to add a media icon for toggling media elements\n        const addMediaIcon = (\n          type: \"img\" | \"video\",\n          src: string,\n          caption: string | undefined,\n        ): void => {\n          const mediaTag = document.createElement(\"span\");\n          mediaTag.dataset.media = src;\n          mediaTag.className = \"material-symbols-rounded\";\n          mediaTag.style.marginRight = \"15px\";\n          mediaTag.style.cursor = \"pointer\";\n          mediaTag.textContent = type === \"img\" ? \"imagesmode\" : \"play_circle\";\n\n          taggedElement.appendChild(mediaTag);\n\n          mediaTag.addEventListener(\"click\", () => {\n            const mediaType = type === \"img\" ? \"img\" : \"video\";\n            const existingMedia = document.querySelector(\n              `p[data-media=\"${mediaTag.dataset.media}\"]`,\n            );\n\n            if (existingMedia) {\n              existingMedia.remove();\n              return;\n            }\n            const mediaHolder = createMediaElement(\n              mediaType,\n              src,\n              640,\n              480,\n              caption,\n            );\n            mediaHolder.dataset.media = src;\n            taggedElement.parentNode?.insertBefore(\n              mediaHolder,\n              taggedElement.nextSibling,\n            );\n          });\n        };\n\n        // Treat sections tag\n        if (tagData.sections) {\n          // Sections tag is for article selection in tech pages\n          let systemActive: string = \"checked\";\n          let systemSpan: string = \" <span>(LOADED)</span>\";\n          let bossesActive: string = \"\";\n          let bossesSpan: string = \"\";\n          let charActive: string = \"\";\n          let charSpan: string = \"\";\n\n          if (tagData.article === \"b\") {\n            bossesActive = \"checked\";\n            bossesSpan = \" <span>(LOADED)</span>\";\n            systemActive = \"\";\n            systemSpan = \"\";\n            charActive = \"\";\n            charSpan = \"\";\n          } else if (tagData.article === \"c\") {\n            charActive = \"checked\";\n            charSpan = \" <span>(LOADED)</span>\";\n            bossesActive = \"\";\n            bossesSpan = \"\";\n            systemActive = \"\";\n            systemSpan = \"\";\n          }\n\n          // Token ?? means either the data or, if null/undentified, the value after ??\n          const currentDocument: string = (this.helperObj.currentDocument ?? \"\")\n            .replace(\"-C\", \"\")\n            .replace(\"-B\", \"\");\n          const currentSection: string = this.helperObj.currentSection ?? \"\";\n\n          const sectionsHTML: string = `\n          <div id=\"content__sections\">\n            <div class=\"content__sections--entry\">\n              <div class=\"content__sections--input-label\">\n                <input type=\"radio\" id=\"systems\" name=\"sections\" value=\"systems\" data-redirect=\"NONE\" data-document=\"${currentDocument}\" data-section=\"${currentSection}\" ${systemActive} />\n                <label for=\"systems\">Systems${systemSpan}</label>\n              </div>\n              <p>Detailed information on the game's systems, techniques, and glitches.</p>\n            </div>\n            <div class=\"content__sections--entry\">\n              <div class=\"content__sections--input-label\">\n                <input type=\"radio\" id=\"characters\" name=\"sections\" value=\"characters\" data-redirect=\"NONE\" data-document=\"${currentDocument}-C\" data-section=\"${currentSection}\" ${charActive} />\n                <label for=\"characters\">Characters${charSpan}</label>\n              </div>\n              <p>A breakdown of each character, such as notable arte properties, strategies, and character-specific techniques.</p>\n            </div>\n            <div class=\"content__sections--entry\">\n              <div class=\"content__sections--input-label\">\n                <input type=\"radio\" id=\"bosses\" name=\"sections\" value=\"bosses\" data-redirect=\"NONE\" data-document=\"${currentDocument}-B\" data-section=\"${currentSection}\" ${bossesActive} />\n                <label for=\"bosses\">Bosses${bossesSpan}</label>\n              </div>\n              <p>A summary of each boss. Contains spoilers!</p>\n            </div>\n          </div>`;\n\n          const sectionsDiv: HTMLDivElement = document.createElement(\"div\");\n          sectionsDiv.innerHTML = sectionsHTML;\n          taggedElement.appendChild(sectionsDiv);\n\n          // Add click event listeners to each radio input\n          document\n            .querySelectorAll<HTMLInputElement>('input[name=\"sections\"]')\n            .forEach((input: HTMLInputElement) => {\n              this.helperObj.addPageChangeEvent(input);\n            });\n        }\n\n        // Handle version tags\n        if (tagData.versions) {\n          // If it has a version tag, add an icon with a tooltip containing the value of the tag.\n          let versionText: string = `Version: ${tagData.versions}.`;\n\n          // Add the version to the versionMap if it doesn't already exist\n          if (!this.helperObj.versionMap.has(tagData.versions)) {\n            const colorIndex: number = this.helperObj.versionMap.size;\n            const color: string = this.helperObj.colorList[colorIndex];\n            this.helperObj.versionMap.set(tagData.versions, color);\n          }\n\n          // Create the version tag element\n          const versionTag: HTMLSpanElement = document.createElement(\"span\");\n          versionTag.className = \"material-symbols-rounded\";\n          versionTag.style.marginRight = \"15px\";\n          versionTag.style.cursor = \"help\";\n          versionTag.textContent = \"devices\";\n          versionTag.style.color = `var(--${this.helperObj.versionMap.get(tagData.versions)})`;\n          versionTag.style.filter = \"brightness(1.5)\";\n\n          // Append the version tag to the tagged element\n          taggedElement.appendChild(versionTag);\n\n          // Add event listeners for the tooltip\n          versionTag.addEventListener(\"mouseover\", () => {\n            this.helperObj.loadTooltip(versionTag, versionText);\n          });\n\n          versionTag.addEventListener(\"mouseleave\", () => {\n            this.helperObj.unloadTooltip();\n          });\n        }\n\n        // Handle \"todo\" tags\n        if (tagData.todo) {\n          const todoTag = document.createElement(\"span\");\n          todoTag.className = \"material-symbols-rounded\";\n          todoTag.style.color = \"goldenrod\";\n          todoTag.style.marginRight = \"15px\";\n          todoTag.style.cursor = \"help\";\n          todoTag.textContent = \"error\";\n          taggedElement.appendChild(todoTag);\n\n          todoTag.addEventListener(\"mouseover\", () => {\n            this.helperObj.loadTooltip(\n              todoTag,\n              \"This section needs work, is not confirmed or needs testing.\",\n            );\n          });\n\n          todoTag.addEventListener(\"mouseleave\", () => {\n            this.helperObj.unloadTooltip();\n          });\n        }\n\n        // Handle \"media\" tags\n        if (tagData.media) {\n          const isImage = /\\.(webp|png|jpg|&ii)$/.test(tagData.media);\n          const mediaType = isImage ? \"img\" : \"video\";\n\n          if (tagData.forcedmedia === false) {\n            addMediaIcon(mediaType, tagData.media, tagData.caption);\n          } else {\n            const mediaHolder = createMediaElement(\n              mediaType,\n              tagData.media,\n              640,\n              480,\n              tagData.caption,\n            );\n            taggedElement.parentNode?.insertBefore(\n              mediaHolder,\n              taggedElement.nextSibling,\n            );\n          }\n        }\n\n        // Handle \"redirect\" tags\n        if (tagData.redirect) {\n          const redirectIcon = document.createElement(\"span\");\n          redirectIcon.className = \"material-symbols-rounded\";\n          redirectIcon.style.marginRight = \"5px\";\n          redirectIcon.textContent = \"link\";\n\n          taggedElement.classList.remove(\"tagging\", \"tagging-text\");\n          taggedElement.classList.add(\"content__redirect\");\n          taggedElement.dataset.redirect = tagData.redirect;\n\n          if (tagData.document) {\n            taggedElement.dataset.document = tagData.document;\n            taggedElement.dataset.section =\n              this.helperObj.fileList.find(\n                (obj) => obj.document === tagData.document,\n              )?.section || \"\";\n          } else {\n            taggedElement.dataset.document = this.helperObj.currentDocument;\n            taggedElement.dataset.section = this.helperObj.currentSection;\n          }\n\n          taggedElement.insertBefore(redirectIcon, taggedElement.firstChild);\n          this.helperObj.addPageChangeEvent(taggedElement);\n        }\n\n        // Handle \"reference\" tags\n        if (!tagData.reference) {\n          return;\n        }\n        taggedElement.classList.remove(\"tagging\", \"tagging-text\");\n        taggedElement.classList.add(\"content__redirect\");\n        taggedElement.dataset.redirect = \"#references\";\n        taggedElement.dataset.document = this.helperObj.currentDocument;\n        taggedElement.dataset.section = this.helperObj.currentSection;\n        this.helperObj.addPageChangeEvent(taggedElement);\n      });\n\n    // Handle KaTeX tags\n    document\n      .querySelectorAll<HTMLElement>(\".tagging-katex\")\n      .forEach((taggedElement) => {\n        if (taggedElement.classList.contains(\"tagging-computed\")) {\n          return;\n        }\n        taggedElement.classList.add(\"tagging-computed\");\n\n        const katexText = taggedElement.innerHTML;\n        if (this.katexObj) {\n          taggedElement.innerHTML = this.katexObj.renderToString(katexText);\n        }\n      });\n  }\n\n  // Style every directive for the current #content\n  compileDirectives(): void {\n    this.compileTags();\n    this.sortTables();\n    this.treatSpoilers();\n    this.styleImages();\n  }\n\n  // Tables is not a custom directives but a native one. We style them here anyways\n  sortTables(): void {\n    // Helper function to get the value of a table cell\n    const getCellValue = (tr: HTMLTableRowElement, idx: number): string => {\n      return tr.children[idx]?.textContent?.trim() || \"\";\n    };\n\n    // Helper function to compare two rows based on the column index\n    const comparer = (\n      idx: number,\n      asc: boolean,\n    ): ((a: HTMLTableRowElement, b: HTMLTableRowElement) => number) => {\n      return (a: HTMLTableRowElement, b: HTMLTableRowElement): number => {\n        const v1: string = getCellValue(asc ? a : b, idx);\n        const v2: string = getCellValue(asc ? b : a, idx);\n\n        // Compare numbers or strings\n        if (\n          v1 !== \"\" &&\n          v2 !== \"\" &&\n          !isNaN(Number(v1)) &&\n          !isNaN(Number(v2))\n        ) {\n          return Number(v1) - Number(v2);\n        }\n        return v1.localeCompare(v2);\n      };\n    };\n\n    // Iterate over all table headers\n    const tableHeaders: NodeListOf<HTMLTableCellElement> =\n      document.querySelectorAll<HTMLTableCellElement>(\"th\");\n    tableHeaders.forEach((th: HTMLTableCellElement): void => {\n      // Add a cosmetic sort span\n      th.innerHTML += '<span class=\"material-symbols-rounded\">swap_vert</span>';\n\n      // Add click event listener to sort the table\n      th.addEventListener(\"click\", (): void => {\n        const table: HTMLTableElement | null = th.closest(\n          \"table\",\n        ) as HTMLTableElement | null;\n        const tbody: HTMLTableSectionElement | null =\n          table?.querySelector(\"tbody\") || null;\n\n        if (!tbody) {\n          return;\n        }\n\n        const rows: HTMLTableRowElement[] = Array.from(\n          tbody.querySelectorAll<HTMLTableRowElement>(\"tr\"),\n        );\n        const columnIndex: number = Array.from(\n          th.parentNode?.children || [],\n        ).indexOf(th);\n        const ascending: boolean = th.dataset.asc !== \"true\";\n\n        // Sort rows and append them back to the table body\n        rows\n          .sort(comparer(columnIndex, ascending))\n          .forEach((tr: HTMLTableRowElement) => tbody.appendChild(tr));\n\n        // Update the sort direction\n        th.dataset.asc = ascending.toString();\n      });\n    });\n  }\n\n  // Spoilers have their background removed when clicked (only once)\n  treatSpoilers(): void {\n    const spoilerElements: NodeListOf<HTMLElement> =\n      document.querySelectorAll<HTMLElement>(\".spoiler\");\n\n    spoilerElements.forEach((spoilerElement: HTMLElement) => {\n      spoilerElement.addEventListener(\"click\", (event: Event) => {\n        const target: HTMLElement = event.currentTarget as HTMLElement;\n        target.style.background = \"transparent\";\n      });\n    });\n  }\n\n  // Styled by CSS (content.css)\n  styleImages(): void {\n    const imageList: HTMLCollectionOf<HTMLImageElement> =\n      document.getElementsByTagName(\"img\");\n    const contentElement: HTMLElement | null =\n      document.getElementById(\"content\");\n\n    if (!contentElement) {\n      return;\n    }\n\n    Array.from(imageList).forEach((image: HTMLImageElement) => {\n      if (contentElement.contains(image)) {\n        image.classList.add(\"content__figure\");\n      }\n    });\n  }\n}\n", "// ---\n// helper.js, as the name implies, is for a lot of helper functions to other modules\n//   main creates an instance of it which can be used for various things\n//   a better alternative than sessionStorage and can also save live objects\n\ninterface FileEntry {\n  document: string;\n  section: string;\n  dim: string;\n  ref: string;\n}\n\nexport class Helper {\n  private mouseDown: boolean;\n  private startX: number;\n  private scrollLeft: number;\n  private startY: number;\n  private scrollTop: number;\n  private scrollButton: HTMLElement | null;\n  private rootElement: HTMLElement | null;\n  private rotateFlag: boolean;\n  private leaveCounter: number;\n  private currentVelocity: number;\n  colorList: string[];\n  versionMap: Map<string, string>;\n  currentSection: string | undefined;\n  currentDocument: string | undefined;\n  inTechPage: boolean;\n  addPageChangeEvent: (element: HTMLElement) => void;\n  fileList: FileEntry[];\n\n  constructor(\n    addPageChangeEvent: (element: HTMLElement) => void,\n    fileList: FileEntry[],\n  ) {\n    this.mouseDown = false;\n    this.startX = 0;\n    this.scrollLeft = 0;\n    this.startY = 0;\n    this.scrollTop = 0;\n    this.scrollButton = null;\n    this.rootElement = null;\n    this.colorList = [\"yellow\", \"teal\", \"green\", \"pink\", \"red\", \"blue\"];\n    this.versionMap = new Map<string, string>();\n    this.rotateFlag = false;\n    this.leaveCounter = 0;\n    this.currentVelocity = 0;\n    this.currentSection = undefined;\n    this.currentDocument = undefined;\n    this.inTechPage = false;\n    this.addPageChangeEvent = addPageChangeEvent;\n    this.fileList = fileList;\n  }\n\n  // --- Update global values\n  updateStatus(document: string, section: string, inTechPage: boolean): void {\n    this.currentDocument = document;\n    this.currentSection = section;\n    this.inTechPage = inTechPage;\n    this.versionMap = new Map<string, string>();\n  }\n\n  // --- Logo functions\n  logoInit(): void {\n    // Add nav-bar events --> logo rotation\n    const titleElement: HTMLElement | null =\n      document.querySelector(\"#nav-bar__title\");\n    if (titleElement) {\n      titleElement.addEventListener(\n        \"mouseenter\",\n        this.startRotateLogo.bind(this),\n      );\n      titleElement.addEventListener(\n        \"mouseleave\",\n        this.stopRotateLogo.bind(this),\n      );\n    }\n  }\n\n  addLogoVelocity(): void {\n    // When clicking on any game, rotate the logo a bit\n    if (!this.rotateFlag && this.leaveCounter === 0) {\n      this.currentVelocity = 4;\n      this.leaveCounter = 200;\n      requestAnimationFrame(this.rotateLogo.bind(this));\n      return;\n    }\n    this.currentVelocity = 4;\n    this.leaveCounter = 200;\n  }\n\n  startRotateLogo(): void {\n    // On mouseover, start animation\n    if (!this.rotateFlag && this.leaveCounter === 0) {\n      this.rotateFlag = true;\n      requestAnimationFrame(this.rotateLogo.bind(this));\n    } else {\n      this.rotateFlag = true;\n      this.leaveCounter = 200;\n    }\n  }\n\n  stopRotateLogo(): void {\n    // On mouseleave, change flag so rotateLogo() makes the logo slow down\n    this.rotateFlag = false;\n  }\n\n  rotateLogo(): void {\n    // Get logo style properties\n    const logo: HTMLElement | null = document.querySelector(\n      \"#nav-bar__title__logo\",\n    );\n    if (!logo) return; // Ensure the logo element exists\n\n    const st: CSSStyleDeclaration = getComputedStyle(logo, null);\n    const tr: string = st.getPropertyValue(\"transform\");\n\n    // Ensure the transform property is valid\n    if (tr === \"none\") return;\n\n    const values: string[] = tr.split(\"(\")[1].split(\")\")[0].split(\",\");\n    const a: number = parseFloat(values[0]);\n    const b: number = parseFloat(values[1]);\n\n    // Convert angle\n    let currentAngle: number = Math.atan2(b, a) * (180 / Math.PI);\n\n    // Speed up if the mouse is in the logo, slow down if not\n    if (this.rotateFlag) {\n      if (this.currentVelocity < 1.8) {\n        this.currentVelocity += 0.06;\n      }\n    } else if (this.currentVelocity > 0) {\n      this.currentVelocity -= 0.03;\n    }\n\n    if (this.currentVelocity < 0) {\n      this.currentVelocity = 0;\n    }\n\n    if (currentAngle < 0) {\n      currentAngle += 360;\n    }\n\n    const angle: number = this.currentVelocity + currentAngle;\n\n    // Update style and start animation again\n    logo.style.transform = `rotate(${angle}deg)`;\n\n    if (this.rotateFlag) {\n      this.leaveCounter = 200;\n      requestAnimationFrame(this.rotateLogo.bind(this));\n      return;\n    }\n    // If flag is not set, keep running for a maximum of 200 frames to show the logo slowing down\n    this.leaveCounter--;\n    if (this.currentVelocity <= 0) {\n      this.leaveCounter = 0;\n    }\n    if (this.leaveCounter > 0) {\n      requestAnimationFrame(this.rotateLogo.bind(this));\n    }\n  }\n\n  // --- Scroll functions\n  scrollInit(): void {\n    // Add scroll button events (icon that appears when you pass ToC)\n    this.scrollButton = document.querySelector(\n      \"#scroll__button--to-top\",\n    ) as HTMLElement | null;\n    this.rootElement = document.documentElement;\n\n    if (this.scrollButton) {\n      this.scrollButton.addEventListener(\"click\", this.scrollToTop.bind(this));\n    }\n\n    window.addEventListener(\"scroll\", this.handleScroll.bind(this));\n  }\n\n  // --- Functions related to scrolling effects\n  // Checks if scroll icon should be shown to user\n  handleScroll(event: Event): void {\n    event.preventDefault();\n\n    // Get current scroll position\n    const scrollTotal: number =\n      this.rootElement!.scrollHeight - this.rootElement!.clientHeight;\n\n    // Get TOC if it exists\n    const toc: HTMLElement | null = document.getElementById(\n      \"content__selectorbox\",\n    );\n    let tocLocation: number = 0;\n\n    if (toc) {\n      // If the content selector exists, calculate the difference between the selector location and the top of the page\n      const bodyRect: DOMRect = document.body.getBoundingClientRect();\n      const elemRect: DOMRect = toc.getBoundingClientRect();\n      const offset: number = elemRect.top - bodyRect.top;\n\n      if (offset > 0) {\n        tocLocation = offset;\n      }\n    }\n\n    // Test if current scroll position is past the top of the page or the top of the TOC\n    if ((this.rootElement!.scrollTop - tocLocation) / scrollTotal > 0.05) {\n      // Show button on 5% scroll down\n      this.scrollButton?.classList.add(\"scroll__button--to-top--show\");\n    } else {\n      // Hide button otherwise\n      this.scrollButton?.classList.remove(\"scroll__button--to-top--show\");\n    }\n  }\n\n  // --- Scroll to top of the page or the H2 selection\n  scrollToTop(): void {\n    // Get content selector if it exists\n    const toc: HTMLElement | null = document.getElementById(\n      \"content__selectorbox\",\n    );\n    let tocLocation: number = 0;\n\n    if (toc !== null) {\n      // If the selector exists, calculate the difference between the selector location and the top of the page\n      const bodyRect: DOMRect = document.body.getBoundingClientRect();\n      const elemRect: DOMRect = toc.getBoundingClientRect();\n      const offset: number = elemRect.top - bodyRect.top;\n\n      if (offset > 0) {\n        tocLocation = offset - 20;\n      }\n    }\n\n    // Scroll either to the top of the page or to the selector smoothly\n    window.requestAnimationFrame(() => {\n      let behavior: ScrollBehavior = \"smooth\";\n\n      if (navigator.userAgent.includes(\"Chrome\")) {\n        const pieces: RegExpMatchArray | null = navigator.userAgent.match(\n          /Chrom(?:e|ium)\\/([0-9]+)\\.([0-9]+)\\.([0-9]+)\\.([0-9]+)/,\n        );\n\n        // && is sequential\n        if (\n          pieces &&\n          pieces.length >= 1 &&\n          !isNaN(Number(pieces[1])) &&\n          Number(pieces[1]) < 130\n        ) {\n          behavior = \"auto\";\n        }\n      }\n\n      this.rootElement?.scrollTo({\n        top: tocLocation,\n        behavior,\n      });\n    });\n  }\n\n  // --- Tooltip functions\n  loadTooltip(tooltip: HTMLElement | null, tooltipText: string): void {\n    // Create tooltip element\n    const base: HTMLElement = document.createElement(\"tooltip\");\n    base.id = \"nav-bar__tooltip\";\n    const tip: Text = document.createTextNode(tooltipText);\n\n    if (tooltip === null) {\n      return;\n    }\n    // Set tooltip contents\n    base.innerHTML = \"\";\n    base.appendChild(tip);\n\n    // Remove existing tooltip if needed\n    const existingTooltip: HTMLElement | null = document.getElementsByTagName(\n      \"tooltip\",\n    )[0] as HTMLElement | null;\n    if (existingTooltip) {\n      existingTooltip.remove();\n    }\n\n    // Set tooltip location and add it to the page\n    const boundingBox: DOMRect = tooltip.getBoundingClientRect();\n    base.style.top = `${boundingBox.bottom - 10}px`;\n    base.style.left = `${boundingBox.right}px`;\n    document.body.appendChild(base);\n  }\n\n  unloadTooltip(): void {\n    // Remove existing tooltip\n    const existingTooltip: HTMLElement | null = document.getElementsByTagName(\n      \"tooltip\",\n    )[0] as HTMLElement | null;\n    if (existingTooltip) {\n      existingTooltip.remove();\n    }\n  }\n\n  // --- Drag function for h2s and TOC\n  dragScrollElement(query: string, direction: number): void {\n    const sliderSelector: HTMLElement | null = document.querySelector(query);\n    if (sliderSelector === null) {\n      return;\n    }\n\n    const startDraggingX = (e: MouseEvent | TouchEvent): void => {\n      this.mouseDown = true;\n      this.startX =\n        e instanceof MouseEvent\n          ? e.pageX - sliderSelector.offsetLeft\n          : e.changedTouches[0].pageX - sliderSelector.offsetLeft;\n      this.scrollLeft = sliderSelector.scrollLeft;\n    };\n\n    const startDraggingY = (e: MouseEvent | TouchEvent): void => {\n      this.mouseDown = true;\n      this.startY =\n        e instanceof MouseEvent\n          ? e.pageY - sliderSelector.offsetTop\n          : e.changedTouches[0].pageY - sliderSelector.offsetTop;\n      this.scrollTop = sliderSelector.scrollTop;\n    };\n\n    const moveX = (e: MouseEvent | TouchEvent): void => {\n      e.preventDefault();\n      e.stopPropagation();\n      if (!this.mouseDown) {\n        return;\n      }\n      const x: number =\n        e instanceof MouseEvent\n          ? e.pageX - sliderSelector.offsetLeft\n          : e.changedTouches[0].pageX - sliderSelector.offsetLeft;\n      const scroll: number = x - this.startX;\n      sliderSelector.scrollLeft = this.scrollLeft - scroll;\n    };\n\n    const moveY = (e: MouseEvent | TouchEvent): void => {\n      e.preventDefault();\n      e.stopPropagation();\n      if (!this.mouseDown) {\n        return;\n      }\n      const y: number =\n        e instanceof MouseEvent\n          ? e.pageY - sliderSelector.offsetTop\n          : e.changedTouches[0].pageY - sliderSelector.offsetTop;\n      const scroll: number = y - this.startY;\n      sliderSelector.scrollTop = this.scrollTop - scroll;\n    };\n\n    const stopDragging = (): void => {\n      this.mouseDown = false;\n    };\n\n    // Add the event listeners\n    if (direction === 1) {\n      sliderSelector.addEventListener(\"mousemove\", moveY, false);\n      sliderSelector.addEventListener(\"mousedown\", startDraggingY, false);\n      sliderSelector.addEventListener(\"mouseup\", stopDragging, false);\n      sliderSelector.addEventListener(\"mouseleave\", stopDragging, false);\n\n      // For mobile\n      sliderSelector.addEventListener(\"touchmove\", moveY, false);\n      sliderSelector.addEventListener(\"touchstart\", startDraggingY, false);\n      sliderSelector.addEventListener(\"touchend\", stopDragging, false);\n      return;\n    }\n    sliderSelector.addEventListener(\"mousemove\", moveX, false);\n    sliderSelector.addEventListener(\"mousedown\", startDraggingX, false);\n    sliderSelector.addEventListener(\"mouseup\", stopDragging, false);\n    sliderSelector.addEventListener(\"mouseleave\", stopDragging, false);\n\n    // For mobile\n    sliderSelector.addEventListener(\"touchmove\", moveX, false);\n    sliderSelector.addEventListener(\"touchstart\", startDraggingX, false);\n    sliderSelector.addEventListener(\"touchend\", stopDragging, false);\n  }\n}\n", "// ---------\n// main.js is the entry point for our code.\n//   inits all other modules\n//   controls parsing of markdown files\n//   controls page flow\n//   handles load order\n// Additionally, the current available game list is kept here in the fileList.\n//   update fileList to add a new tech page!\n\nimport { Parser } from \"./parser.ts\";\nimport { Search } from \"./search.ts\";\nimport { TOC } from \"./toc.ts\";\nimport { Headings } from \"./headings.ts\";\nimport { Directives } from \"./directives.ts\";\nimport { Helper } from \"./helper.ts\";\n\n// Every page we need to load\nconst parsedDocuments: Map<FileEntry, string> = new Map();\n\n// Define the structure of fileList entries\ninterface FileEntry {\n  document: string;\n  section: string;\n  dim: string;\n  ref: string;\n}\n\n// Add new documents here!!\nconst fileList: FileEntry[] = [\n  { document: \"./README\", section: \"README\", dim: \"N/A\", ref: \"readme\" },\n  {\n    document: \"./STYLING\",\n    section: \"Document Styling\",\n    dim: \"N/A\",\n    ref: \"styling\",\n  },\n  {\n    document: \"./CONTRIBUTING\",\n    section: \"How to Contribute\",\n    dim: \"N/A\",\n    ref: \"contributing\",\n  },\n  { document: \"TODPS2\", section: \"Tales of Destiny\", dim: \"2D\", ref: \"todps2\" },\n  {\n    document: \"TODPS2-C\",\n    section: \"Tales of Destiny\",\n    dim: \"2D\",\n    ref: \"todps2-c\",\n  },\n  {\n    document: \"TODPS2-B\",\n    section: \"Tales of Destiny\",\n    dim: \"2D\",\n    ref: \"todps2-b\",\n  },\n  { document: \"TOL\", section: \"Tales of Legendia\", dim: \"2D\", ref: \"tol\" },\n  { document: \"TOA\", section: \"Tales of Arise\", dim: \"3D\", ref: \"toa\" },\n  { document: \"TOV\", section: \"Tales of Vesperia\", dim: \"3D\", ref: \"tov\" },\n  { document: \"TOTA\", section: \"Tales of the Abyss\", dim: \"3D\", ref: \"tota\" },\n  { document: \"TOX2\", section: \"Tales of Xillia 2\", dim: \"3D\", ref: \"tox2\" },\n  { document: \"TOZ\", section: \"Tales of Zestiria\", dim: \"3D\", ref: \"toz\" },\n  { document: \"HOME\", section: \"HOME\", dim: \"N/A\", ref: \"\" },\n];\n\n// --- Module Objects\nlet searchObj: Search | null = null;\nlet tocObj: TOC | null = null;\nconst helperObj: Helper = new Helper(addPageChangeEvent, fileList);\nconst headingsObj: Headings = new Headings(helperObj);\nconst directivesObj: Directives = new Directives(helperObj);\nconst parserObj: Parser = new Parser();\n\n// Create an array of promises for parsing each document\nconst parsePromises: Promise<void>[] = fileList.map(async (item) => {\n  if (item.document.includes(\"./\")) {\n    const page = await parserObj.parseGFM(item.document);\n    parsedDocuments.set(item, page);\n  } else if (item.document === \"HOME\") {\n    const page_1 = await parserObj.asyncRead(\"./home.html\");\n    parsedDocuments.set(item, page_1);\n  } else {\n    const page_2 = await parserObj.parseGFM(\n      `./tech/${item.document.toLowerCase()}`,\n    );\n    parsedDocuments.set(item, page_2);\n  }\n});\n\nlet currentDocument: string = \"\";\nlet katexLoaded: boolean = false;\n\n// Check if DOM elements are ready, if yes, we can start running stuff\nif (document.readyState === \"loading\") {\n  document.addEventListener(\"DOMContentLoaded\", pageInit);\n} else {\n  pageInit();\n}\n\n// --- Search and click redirections\nfunction pageInit(): void {\n  // Add redirect links for title and footer\n  document\n    .querySelectorAll<HTMLElement>(\n      \"div#nav-bar__title, p.footer-container__help--links, img#title-text__img\",\n    )\n    .forEach((item: HTMLElement) => {\n      addPageChangeEvent(item);\n    });\n\n  // Fill nav-bar search and game results\n  // `initSearchIcons()` also already adds page change events to search results\n  // Wait for all parsing promises to complete\n  Promise.all(parsePromises).then(() => {\n    searchObj = new Search(parsedDocuments, addPageChangeEvent);\n    searchObj.initSearchIcons();\n    searchObj.initOnboardingIcon();\n\n    tocObj = new TOC(helperObj);\n\n    helperObj.scrollInit();\n    helperObj.logoInit();\n\n    // Setup History handlers\n    // Handle forward/back buttons\n    window.addEventListener(\"popstate\", (event: PopStateEvent) => {\n      event.preventDefault();\n      event.stopPropagation();\n\n      if (event.state) {\n        // Simulate the loading of the previous page\n        changeEventObj({\n          ...event.state,\n          pushState: false,\n        } as unknown as DOMStringMap);\n      } else {\n        // No state -- page is home\n        changeEventObj({\n          document: \"HOME\",\n          section: \"HOME\",\n          pushState: false,\n        } as unknown as DOMStringMap);\n      }\n    });\n\n    // Handle base page URL (first view) -- in case the user wants to load a certain page from the get-go\n    const pathname: string = document.location.pathname.substring(1); // Remove leading \"/\"\n    let ref: string = pathname;\n    const splitPath: string[] = pathname.split(\"/\");\n    let redirect: string = \"\";\n\n    if (splitPath.length > 1) {\n      redirect = splitPath[1];\n      ref = splitPath[0];\n    }\n\n    // Iterate over fileList and replace the initial history\n    for (const obj of fileList) {\n      if (obj.ref === ref) {\n        if (redirect === \"\") {\n          changeEventObj({\n            ...obj,\n            pushState: false,\n          } as unknown as DOMStringMap);\n          window.history.replaceState({ ...obj }, obj.section, pathname);\n        } else {\n          changeEventObj({\n            ...obj,\n            redirect: `#${redirect}`,\n            pushState: false,\n          } as unknown as DOMStringMap);\n          window.history.replaceState(\n            { ...obj, redirect: `#${redirect}` },\n            obj.section,\n            pathname,\n          );\n        }\n        break;\n      }\n    }\n  });\n}\n\n// --- Page flow:\n//     elements have the addPageChangeEvent on them, which when called will either load a\n//     tech page, the home page, or a standalone page (e.g., readme)\n//\n//     for tech pages the flow is changeEvent -> changeEventObj -> changeDocument -> toTech -> compileH2s -> updatePage\n//     for the homepage the flow is ... -> changeDocument -> toHome -> prepHome\n//     for standalone pages the flow is ... -> changeDocument -> toPage -> updatePage\n//\n//     changeEvent and changeEventObj are split because you can also call a page without an event, simply creating a pseudo-dataset object.\n//     this is currently done for routing.\n\n// --- Function for click events on redirects\nexport function addPageChangeEvent(item: HTMLElement): void {\n  // Remove the previous event if one exists. This is a bandaid fix for the fillSearch function.\n  const inputField: HTMLInputElement | null = document.querySelector(\n    \"#nav-bar__search--input\",\n  );\n  if (inputField !== null) {\n    inputField.blur();\n  }\n\n  item.removeEventListener(\"click\", changeEvent);\n  item.addEventListener(\"click\", changeEvent);\n}\n\n// Prevent redirections and propagations and calls the change event based on the dataset of the target\nfunction changeEvent(event: Event): void {\n  event.preventDefault();\n  event.stopPropagation();\n\n  // Remove focus from the search bar\n  const inputField: HTMLInputElement | null = document.querySelector(\n    \"#nav-bar__search--input\",\n  );\n  if (inputField !== null) {\n    (document.activeElement as HTMLElement)?.blur();\n    inputField.blur();\n  }\n\n  // Call the changeEventObj function with the dataset of the current target\n  const target: HTMLElement = event.currentTarget as HTMLElement;\n  changeEventObj(target.dataset);\n}\n\n// Function to make sure Katex is loaded before changing the page, then calls changeDocument\n//   the only data that is downloaded as the page is being loaded are images, videos, and Katex\n// This is also the function called by the history API -- this way we don't need an event like changeEvent()\nfunction changeEventObj(dataset: DOMStringMap): void {\n  let parsedKatex: Promise<string> | null = null;\n\n  if (katexLoaded) {\n    changeDocument(dataset);\n  } else {\n    parsedKatex = new Promise((resolve) => {\n      // Dynamically import the KaTeX JavaScript module\n      import(\"./katex.min.js\").then(\n        (module: {\n          default: {\n            renderToString: (\n              input: string,\n              options?: Record<string, unknown>,\n            ) => string;\n          };\n        }) => {\n          directivesObj.setKatex(module.default);\n\n          // Create a link element for KaTeX CSS\n          const link: HTMLLinkElement = document.createElement(\"link\");\n          link.rel = \"stylesheet\";\n          link.crossOrigin = \"anonymous\";\n          link.href = \"styles/katex.min.css\"; // URL to the KaTeX CSS\n          link.onload = () => {\n            resolve(\"KaTeX JS and CSS loaded\");\n          };\n\n          // Append the link to the document head\n          document.head.appendChild(link);\n        },\n      );\n    });\n\n    parsedKatex.then(() => {\n      katexLoaded = true;\n      changeDocument(dataset);\n    });\n  }\n}\n\n// Function to handle changes to content\nfunction changeDocument(dataset: DOMStringMap): void {\n  // Get the content element to change the document presented on the page\n  const contentText: HTMLElement | null = document.getElementById(\"content\");\n\n  if (!contentText) {\n    return;\n  }\n\n  // Clear active search result\n  searchObj?.clearFunction();\n  helperObj.addLogoVelocity();\n\n  if (dataset.document === \"HOME\") {\n    // Redirect to home page\n    toHome(contentText, dataset);\n    contentText.style.minHeight = \"600px\";\n  } else if (dataset.document?.includes(\"./\")) {\n    // Redirect to pages like the readme, document styling...\n    contentText.style.minHeight = \"600px\";\n    toPage(contentText, dataset);\n  } else {\n    // Event is a tech document, set the section as the game name and update the content\n    contentText.style.minHeight = \"100vh\";\n    toTech(contentText, dataset);\n  }\n}\n\n// --- Load Home Page\nfunction toHome(contentText: HTMLElement, dataset: DOMStringMap): void {\n  const pastDocument: string = currentDocument;\n  currentDocument = dataset.document || \"\";\n\n  if (currentDocument === pastDocument) {\n    return;\n  }\n  tocObj?.clearHeadings();\n  helperObj.updateStatus(\"HOME\", \"HOME\", false);\n  tocObj?.clearSectionTOC();\n\n  // Load content from `home.html` and apply it to `contentText`\n  let parsedPage: string | null = null;\n\n  // Iterate over the entries in `parsedDocuments` to find the matching document\n  for (const [key, value] of parsedDocuments.entries()) {\n    if (key.document === \"HOME\") {\n      parsedPage = value;\n      break;\n    }\n  }\n\n  if (parsedPage) {\n    contentText.innerHTML = parsedPage;\n  }\n\n  // Set options for SEO\n  document.title = \"Tales Tech Encyclopedia\";\n  const metaDescription: HTMLMetaElement | null = document.querySelector(\n    'meta[name=\"description\"]',\n  );\n  if (metaDescription) {\n    metaDescription.setAttribute(\n      \"content\",\n      \"Tales Tech Encyclopedia (TTE), is a project that aims to document techniques and mechanics on the games of the 'Tales of Series'.\",\n    );\n  }\n\n  // Set history if this is not a pop (user did a back or forward on the page)\n  if (dataset.pushState == null) {\n    window.history.pushState(\n      JSON.parse(JSON.stringify(dataset)),\n      document.title,\n      \"/\",\n    );\n  }\n\n  prepHome();\n  searchObj?.initOnboardingIcon();\n}\n\n// --- Add functionality to the home page\nfunction prepHome(): void {\n  // Add page change events to all redirect elements\n  document\n    .querySelectorAll<HTMLElement>(\"span.content__redirect\")\n    .forEach((item) => {\n      addPageChangeEvent(item);\n    });\n\n  // Add functionality to showcase items\n  document\n    .querySelectorAll<HTMLElement>(\".content__home__showcase-item--play\")\n    .forEach((elem) => {\n      elem.addEventListener(\"click\", (event: Event) => {\n        const target: HTMLElement = event.currentTarget as HTMLElement;\n\n        if (target.innerHTML === \"play_circle\") {\n          target.innerHTML = \"stop_circle\";\n\n          // Create a video element as a sibling of the target\n          const video: HTMLVideoElement = document.createElement(\"video\");\n          video.src = target.dataset.video || \"\";\n          video.className = \"content__home__showcase-item--video\";\n          video.autoplay = true;\n          video.controls = false;\n          video.muted = true;\n          video.loop = true;\n\n          target.parentElement?.appendChild(video);\n\n          setTimeout(() => {\n            video.style.opacity = \"1\";\n          }, 50);\n          return;\n        }\n        // Find the video element, fade it out, and remove it\n        const video: HTMLVideoElement | null | undefined =\n          target.parentElement?.querySelector<HTMLVideoElement>(\n            \".content__home__showcase-item--video\",\n          );\n\n        if (video) {\n          video.style.opacity = \"0\";\n          setTimeout(() => {\n            video.remove();\n            target.innerHTML = \"play_circle\";\n          }, 500);\n        } else {\n          target.innerHTML = \"play_circle\";\n        }\n      });\n    });\n}\n\n// --- Load Generic Page\nfunction toPage(contentText: HTMLElement, dataset: DOMStringMap): void {\n  const pastDocument: string = currentDocument;\n  currentDocument = dataset.document || \"\";\n\n  if (currentDocument === pastDocument) {\n    return;\n  }\n  tocObj?.clearHeadings();\n  helperObj.updateStatus(dataset.document || \"\", dataset.section || \"\", false);\n  tocObj?.clearSectionTOC();\n\n  const documentKey: string | undefined = dataset.document;\n  let parsedPage: string | null = null;\n\n  // Iterate over the entries in `parsedDocuments` to find the matching document\n  for (const [key, value] of parsedDocuments.entries()) {\n    if (key.document === documentKey) {\n      parsedPage = value;\n      break;\n    }\n  }\n\n  if (parsedPage) {\n    contentText.innerHTML = parsedPage;\n  }\n\n  // Update page & Clear active search results\n  updatePage();\n\n  // Set options for SEO\n  document.title = \"Tales Tech Encyclopedia\";\n  const metaDescription: HTMLMetaElement | null = document.querySelector(\n    'meta[name=\"description\"]',\n  );\n  if (metaDescription) {\n    metaDescription.setAttribute(\n      \"content\",\n      \"Tales Tech Encyclopedia (TTE), is a project that aims to document techniques and mechanics on the games of the 'Tales of Series'.\",\n    );\n  }\n\n  const url: string = `/${currentDocument?.toLowerCase() || \"\"}`;\n\n  // Set history if this is not a pop (user did a back or forward on the page)\n  if (dataset.pushState == null) {\n    window.history.pushState(\n      JSON.parse(JSON.stringify(dataset)),\n      document.title,\n      url,\n    );\n  }\n\n  const navBar: HTMLElement | null = document.querySelector(\"#nav-bar\");\n  navBar?.scrollIntoView({\n    behavior: \"smooth\",\n  });\n}\n\n// --- Load Tech Page\nfunction toTech(contentText: HTMLElement, dataset: DOMStringMap): void {\n  helperObj.updateStatus(dataset.document || \"\", dataset.section || \"\", true);\n\n  // Check if the page to load is the same one\n  const pastDocument: string = currentDocument;\n  currentDocument = dataset.document || \"\";\n\n  if (currentDocument === pastDocument) {\n    // If yes --> Just redirect\n    if (dataset.redirect) {\n      // Event has a redirect location, collapse the headings if needed\n      searchObj?.revealID(dataset.redirect.substring(1));\n      if (dataset.redirect) {\n        document.querySelector(dataset.redirect)?.scrollIntoView({\n          behavior: \"smooth\",\n        });\n      }\n    } else {\n      // No redirect location, scroll to top\n      document.querySelector(\"#nav-bar\")?.scrollIntoView({\n        behavior: \"smooth\",\n      });\n    }\n    return;\n  }\n\n  tocObj?.clearHeadings();\n  tocObj?.clearSectionTOC();\n\n  const documentKey: string | undefined = dataset.document;\n  let parsedPage: string | null = null;\n\n  // Iterate over the entries in `parsedDocuments` to find the matching document\n  for (const [key, value] of parsedDocuments.entries()) {\n    if (key.document === documentKey) {\n      parsedPage = value;\n      break;\n    }\n  }\n\n  contentText.style.visibility = \"hidden\";\n  if (parsedPage) {\n    contentText.innerHTML = parsedPage;\n  }\n\n  // Set options for SEO\n  document.title = `TTE - ${dataset.section || \"\"}`;\n  const metaDescription: HTMLMetaElement | null = document.querySelector(\n    'meta[name=\"description\"]',\n  );\n  if (metaDescription) {\n    metaDescription.setAttribute(\n      \"content\",\n      `Tales Tech Encyclopedia (TTE) article on ${dataset.section || \"\"}.`,\n    );\n  }\n\n  // URL is either currentDocument (e.g., /tov) or that + redirect (e.g., /tov/test-test)\n  const url: string =\n    `/${currentDocument?.toLowerCase() || \"\"}` +\n    (dataset.redirect && dataset.redirect !== \"NONE\"\n      ? `/${dataset.redirect.substring(1)}`\n      : \"\");\n\n  // Set history if this is not a pop (user did a back or forward on the page)\n  if (dataset.pushState == null) {\n    window.history.pushState(\n      JSON.parse(JSON.stringify(dataset)),\n      document.title,\n      url,\n    );\n  }\n\n  headingsObj.collapseHeadings(contentText);\n\n  // Update page & Clear search results\n  compileH2s();\n  // `compileH2s` already calls `updatePage`\n\n  if (dataset.redirect && dataset.redirect !== \"NONE\") {\n    // Event has a redirect location, collapse the headings if needed\n    searchObj?.revealID(dataset.redirect.substring(1));\n    // Set timeout to give time for the page to update (it also looks nice)\n    setTimeout(() => {\n      if (dataset.redirect) {\n        document.querySelector(dataset.redirect)?.scrollIntoView({\n          behavior: \"smooth\",\n        });\n      }\n    }, 250);\n  } else {\n    // No redirect location, scroll to top\n    document.querySelector(\"#nav-bar\")?.scrollIntoView({\n      behavior: \"smooth\",\n    });\n  }\n}\n\n// --- Generic actions every time the page is updated\nexport function updatePage(): void {\n  // Treat custom directives\n  directivesObj.compileDirectives();\n\n  // Create TOC\n  tocObj?.createTOC(currentDocument);\n\n  // Add redirect to TOC\n  document\n    .querySelectorAll<HTMLElement>(\".content__toc--search\")\n    .forEach((item: HTMLElement) => {\n      addPageChangeEvent(item);\n    });\n\n  // Copy headings URL on click\n  headingsObj.shareHeadings();\n}\n\n// Adds functionality to the h2 section divider and opens the first one\nfunction compileH2s(): void {\n  // Add events to selector tab\n  document\n    .querySelectorAll<HTMLElement>(\".content__selectorbox--item\")\n    .forEach((selectorBox: HTMLElement) => {\n      // Set the highlight color from the dataset\n      selectorBox.style.setProperty(\n        \"--highlight-color\",\n        selectorBox.dataset.highlight || \"\",\n      );\n\n      selectorBox.addEventListener(\"click\", (event: Event) => {\n        const target: HTMLElement = event.currentTarget as HTMLElement;\n\n        // Iterate over every selectorbox--item and remove the selected status from other elements\n        document\n          .querySelectorAll<HTMLElement>(\".content__selectorbox--item\")\n          .forEach((item: HTMLElement) => {\n            item.className = \"content__selectorbox--item\";\n          });\n\n        // Add selected status to the clicked selectorbox--item\n        target.className = \"content__selectorbox--item selected\";\n\n        // Replace content_currenth2 with data from h2Collection[x][3]\n        // Select the h2Collection based on the current selectorBox.dataset.open\n        const currentCollection: [string, string, string | [string, string]][] =\n          headingsObj\n            .returnH2Collection()\n            .filter(\n              (h2: [string, string, string | [string, string]]) =>\n                h2[0] === target.dataset.open,\n            );\n\n        const contentCurrentH2: HTMLElement | null =\n          document.getElementById(\"content__currenth2\");\n        if (contentCurrentH2 && currentCollection.length > 0) {\n          const content = currentCollection[0][2];\n          contentCurrentH2.innerHTML =\n            typeof content === \"string\" ? content : content.join(\" \");\n        }\n\n        // Add click events for the buttons\n        document\n          .querySelectorAll<HTMLElement>(\".content__collapse\")\n          .forEach((button: HTMLElement) => {\n            button.addEventListener(\"click\", headingsObj.collapseHeadingStyle);\n          });\n\n        updatePage();\n        tocObj?.highlightTOC();\n      });\n    });\n\n  // Opens the first H2\n  const firstSelectorBox: HTMLElement | undefined =\n    document.querySelectorAll<HTMLElement>(\".content__selectorbox--item\")[0];\n  firstSelectorBox?.click();\n}\n"],
  "mappings": "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DA,EAAM,IAAI,UAAU,KAAK,IAAMkB,CAAK,EAAI,GAC1CoL,EAAatM,EAAM,IAAI,UAAU,KAAK,OACtCA,EAAM,IAAI,UAAU,KAAKsM,CAAU,EAAI,CAAE,MAAOpL,EAAO,MAAO,CAAE,EAChElB,EAAM,IAAI,UAAU,KAAK,IAAMkB,CAAK,EAAIoL,GAExCA,EAAatM,EAAM,IAAI,UAAU,KAAK,IAAMkB,CAAK,EAGnDuL,EAAgBzM,EAAM,IAAI,UAAU,KAAKsM,CAAU,EAAE,MACrDtM,EAAM,IAAI,UAAU,KAAKsM,CAAU,EAAE,QAErCtM,EAAM,KAAK,CACT,KAAM,eACN,GAAIsM,EACJ,MAAOG,EACP,MAAOzM,EAAM,KACf,CAAC,GAGHA,EAAM,IAAMiB,EACZjB,EAAM,OAASY,EACR,GACT,CAKA,IAAI8L,GAAc,CAChB,OACA,MACA,aACA,MACA,OACA,QACA,OACA,MACA,MACA,OACA,OACA,MACA,OACA,MACA,OACA,MACA,MACA,KACA,SACA,OACA,OACA,QACA,MACA,OACA,KACA,OACA,OACA,MACA,OACA,YACA,WACA,YACA,WACA,OACA,SACA,MACA,OACA,QACA,OACA,UACA,OACA,MACA,KACA,MACA,OACA,kBACA,MACA,OACA,OACA,UACA,UACA,QACA,QACA,MACA,OACA,MACA,OACA,YACA,aACA,MACA,MACA,SACA,OACA,cACA,SACA,MACA,KACA,MACA,QACA,KACA,MACA,OACA,cACA,cACA,eACA,OACA,UACA,UACA,YACA,MACA,MACA,MACA,MACA,aACA,KACA,UACA,UACA,OACA,SACA,SACA,mBACA,0BACA,UACA,MACA,kBACA,qBACA,MACA,MACA,OACA,WACA,OACA,SACA,OACA,KACA,MACA,eACA,QACA,MACA,OACA,MACA,MACA,OACA,OACA,OACA,MACA,MACA,UACA,SACA,QACA,SACA,OACA,SACA,UACA,MACA,UACA,QACA,SACA,MACA,QACA,MACA,OACA,YACA,WACA,QACA,OACA,QACA,MACA,WACA,MACA,QACA,OACA,aACA,OACA,MACA,QACA,M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",
  "names": ["textarea", "decodeEntity", "name", "hasOwn", "has", "object", "key", "assign", "obj", "sources", "source", "UNESCAPE_MD_RE", "unescapeMd", "str", "isValidEntityCode", "c", "fromCodePoint", "surrogate1", "surrogate2", "NAMED_ENTITY_RE", "DIGITAL_ENTITY_TEST_RE", "replaceEntityPattern", "match", "name", "code", "decoded", "decodeEntity", "replaceEntities", "HTML_ESCAPE_TEST_RE", "HTML_ESCAPE_REPLACE_RE", "HTML_REPLACEMENTS", "replaceUnsafeChar", "ch", "escapeHtml", "rules", "tokens", "idx", "getBreak", "escapeHtml", "options", "env", "instance", "token", "langClass", "langPrefix", "langName", "fences", "fenceName", "highlighted", "has", "replaceEntities", "unescapeMd", "order", "addBreak", "title", "target", "src", "alt", "suffix", "n", "id", "hr", "nextToken", "Renderer", "assign", "_rules", "len", "i", "result", "Ruler", "name", "self", "chains", "rule", "altName", "chain", "fn", "opt", "beforeName", "ruleName", "afterName", "list", "strict", "chainName", "block", "state", "StateInline", "parserInline", "outTokens", "key", "val", "parseLinkLabel", "start", "level", "found", "marker", "labelEnd", "max", "oldPos", "oldFlag", "parseAbbr", "str", "pos", "label", "abbr", "l", "content", "normalizeLink", "url", "normalized", "parseLinkDestination", "code", "link", "parseLinkTitle", "normalizeReference", "parseReference", "parser", "href", "references", "inline", "tok", "footnote_block", "j", "t", "lastParagraph", "current", "currentLabel", "insideRef", "refTokens", "PUNCT_CHARS", "regEscape", "s", "abbr2", "text", "nodes", "reg", "m", "regText", "blockTokens", "x", "a", "b", "RARE_RE", "SCOPED_ABBR_RE", "SCOPED_ABBR", "replaceScopedAbbr", "match", "replace", "inlineTokens", "blkIdx", "QUOTE_TEST_RE", "QUOTE_RE", "PUNCT_RE", "APOSTROPHE", "isLetter", "replaceAt", "index", "ch", "smartquotes", "thisLevel", "lastSpace", "nextSpace", "item", "canOpen", "canClose", "isSingle", "stack", "OUTER", "Core", "StateBlock", "indent", "indent_found", "line", "from", "min", "begin", "end", "keepLastLF", "first", "last", "queue", "shift", "startLine", "endLine", "nextLine", "silent", "params", "mem", "haveEndMarker", "blockquote", "lastLineEmpty", "oldTShift", "oldBMarks", "oldIndent", "oldParentType", "lines", "terminatorRules", "terminate", "cnt", "skipBulletListMarker", "skipOrderedListMarker", "markTightParagraphs", "oldTight", "posAfterMarker", "indentAfterMarker", "markerValue", "markerCharCode", "isOrdered", "contentStart", "listTokIdx", "prevEmptyEnd", "listLines", "itemLines", "tight", "footnote", "oldBMark", "heading", "tmp", "lheading", "next", "html_blocks", "HTML_TAG_OPEN_RE", "HTML_TAG_CLOSE_RE", "isLetter$1", "lc", "htmlblock", "getLine", "table", "lineText", "rows", "cell", "aligns", "tableLines", "tbodyLines", "skipMarker", "markTightParagraphs$1", "deflist", "ddLine", "dtLine", "oldDDIndent", "paragraph", "_rules$1", "ParserBlock", "hasEmptyLines", "ok", "TABS_SCAN_RE", "NEWLINES_RE", "SPACES_RE", "lineStart", "lastTabPos", "offset", "isTerminatorChar", "newline", "pmax", "ESCAPED", "escape", "backticks", "matchStart", "matchEnd", "del", "lastChar", "nextChar", "ins", "mark", "isAlphaNum", "scanDelims", "count", "can_open", "can_close", "emphasis", "startCount", "oldCount", "newCount", "res", "UNESCAPE_RE", "sub", "UNESCAPE_RE$1", "sup", "links", "labelStart", "ref", "isImage", "footnote_inline", "footnoteId", "oldLength", "footnote_ref", "footnoteSubId", "url_schemas", "EMAIL_RE", "AUTOLINK_RE", "autolink", "tail", "linkMatch", "emailMatch", "fullUrl", "replace$1", "regex", "attr_name", "unquoted", "single_quoted", "double_quoted", "attr_value", "attribute", "open_tag", "close_tag", "comment", "processing", "declaration", "cdata", "HTML_TAG_RE", "isLetter$2", "htmltag", "DIGITAL_RE", "NAMED_RE", "entity", "isValidEntityCode", "fromCodePoint", "decoded", "decodeEntity", "_rules$2", "ParserInline", "validateLink", "cached_pos", "BAD_PROTOCOLS", "defaultConfig", "fullConfig", "commonmarkConfig", "config", "StateCore", "Remarkable", "preset", "presets", "plugin", "Parser", "Remarkable", "token", "tokens", "idx", "nextToken", "spanReturn", "baseReturn", "options", "env", "filePath", "resolve", "reject", "xhr", "file", "fileData", "fallback", "tagToken", "endingIndex", "jsonTag", "childToken", "backslash", "delimiter", "parseBlockKatex", "state", "startLine", "endLine", "haveEndMarker", "pos", "max", "marker", "mem", "len", "nextLine", "content", "parseInlineKatex", "silent", "start", "spanStart", "escapedDepth", "char", "matchStart", "matchEnd", "Search", "techPages", "addPageChangeEvent", "search", "input", "games", "event", "searchField", "onboardingIcon", "type", "id", "searchIcon", "baseName", "inputName", "base", "inputField", "searchboxWidth", "searchBox", "referenceBox", "referenceId", "links", "link", "hrElement", "idReference", "filter", "filterArray", "searchCounter", "linkElement", "txtValue", "compareTxtValue", "containFlag", "stringFilter", "searchContents1L", "searchContents2L", "searchResults", "key", "techDocument", "doc", "searchContent1", "headings2", "currentH2", "currentHeading", "label", "searchContent2", "searchContents1", "searchContents2", "searchContents", "item", "targetHeading", "h2Collection", "h2Section", "x", "selectorItems", "hiddenItems", "success", "firstChild", "targetList", "target", "targetElement", "TOC", "helperObj", "currentDocument", "tocBorder", "selector", "content", "toc", "tocMobile", "tocIcon", "sectionContainer", "tocIconBox", "box", "boxWidth", "event", "tocContent", "h3s", "h4s", "h3", "h4", "a", "b", "tocLinks", "heading", "link", "currentH3", "currentH3Index", "nextH3Index", "headingTop", "threshold", "active", "isWithinRange", "search", "tocBox", "Headings", "helperObj", "page", "currentH4", "currentH3", "currentH2", "currentH2Text", "newInner", "newHeading", "firstH2", "currentHTML", "contentElem", "i", "injectionIndex", "injectedSearch", "newH4", "selectionTab", "h2Tag", "h2Text", "h2Color", "mobileChevrons", "chevronBox", "chevronLeft", "chevronRight", "selectorBox", "updateChevronVisibility", "selectorBoxWidth", "selectorBoxScrollWidth", "scrollLeft", "newScrollLeft", "event", "currentTarget", "openTags", "targetList", "target", "targetElement", "firstChild", "pathname", "splitPath", "baseUrl", "heading", "headingUrl", "Directives", "helperObj", "katex", "taggedElement", "tagTextData", "tagData", "createMediaElement", "type", "src", "width", "height", "caption", "mediaHolder", "mediaTag", "source", "captionElement", "addMediaIcon", "mediaType", "existingMedia", "systemActive", "systemSpan", "bossesActive", "bossesSpan", "charActive", "charSpan", "currentDocument", "currentSection", "sectionsHTML", "sectionsDiv", "input", "versionText", "colorIndex", "color", "versionTag", "todoTag", "redirectIcon", "obj", "katexText", "getCellValue", "tr", "idx", "comparer", "asc", "a", "b", "v1", "v2", "th", "tbody", "rows", "columnIndex", "ascending", "spoilerElement", "event", "target", "imageList", "contentElement", "image", "Helper", "addPageChangeEvent", "fileList", "document", "section", "inTechPage", "titleElement", "logo", "tr", "values", "a", "b", "currentAngle", "angle", "event", "scrollTotal", "toc", "tocLocation", "bodyRect", "offset", "behavior", "pieces", "tooltip", "tooltipText", "base", "tip", "existingTooltip", "boundingBox", "query", "direction", "sliderSelector", "startDraggingX", "e", "startDraggingY", "moveX", "scroll", "moveY", "stopDragging", "parsedDocuments", "fileList", "searchObj", "tocObj", "helperObj", "Helper", "addPageChangeEvent", "headingsObj", "Headings", "directivesObj", "Directives", "parserObj", "Parser", "parsePromises", "item", "page", "page_1", "page_2", "currentDocument", "katexLoaded", "pageInit", "Search", "TOC", "event", "changeEventObj", "pathname", "ref", "splitPath", "redirect", "obj", "inputField", "changeEvent", "target", "dataset", "parsedKatex", "changeDocument", "resolve", "module", "link", "contentText", "toHome", "toPage", "toTech", "pastDocument", "parsedPage", "key", "value", "metaDescription", "prepHome", "elem", "video", "documentKey", "updatePage", "url", "compileH2s", "selectorBox", "currentCollection", "h2", "contentCurrentH2", "content", "button"]
}
