function e(e){return(t=t||document.createElement("textarea")).innerHTML="&"+e+";",t.value}var t,n=Object.prototype.hasOwnProperty;function r(e){var t=[].slice.call(arguments,1);return t.forEach(function(t){if(t){if("object"!=typeof t)throw TypeError(t+"must be object");Object.keys(t).forEach(function(n){e[n]=t[n]})}}),e}var o=/\\([\\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function s(e){return 0>e.indexOf("\\")?e:e.replace(o,"$1")}function i(e){return(!(e>=55296)||!(e<=57343))&&(!(e>=64976)||!(e<=65007))&&(65535&e)!=65535&&(65535&e)!=65534&&(!(e>=0)||!(e<=8))&&11!==e&&(!(e>=14)||!(e<=31))&&(!(e>=127)||!(e<=159))&&!(e>1114111)&&!0}function l(e){return e>65535?String.fromCharCode(55296+((e-=65536)>>10),56320+(1023&e)):String.fromCharCode(e)}var a=/&([a-z#][a-z0-9]{1,31});/gi,c=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i;function h(t,n){var r=0,o=e(n);return n!==o?o:35===n.charCodeAt(0)&&c.test(n)&&i(r="x"===n[1].toLowerCase()?parseInt(n.slice(2),16):parseInt(n.slice(1),10))?l(r):t}function p(e){return 0>e.indexOf("&")?e:e.replace(a,h)}var d=/[&<>"]/,u=/[&<>"]/g,f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function m(e){return f[e]}function g(e){return d.test(e)?e.replace(u,m):e}var v={};v.blockquote_open=function(){return"<blockquote>\n"},v.blockquote_close=function(e,t){return"</blockquote>"+b(e,t)},v.code=function(e,t){return e[t].block?"<pre><code>"+g(e[t].content)+"</code></pre>"+b(e,t):"<code>"+g(e[t].content)+"</code>"},v.fence=function(e,t,r,o,i){var l,a,c,h,d,u=e[t],f="",m=r.langPrefix,v="";if(u.params){if(d=(h=u.params.split(/\s+/g)).join(" "),l=i.rules.fence_custom,a=h[0],l&&n.call(l,a))return i.rules.fence_custom[h[0]](e,t,r,o,i);f=' class="'+m+g(p(s(d)))+'"'}return"<pre><code"+f+">"+(r.highlight&&r.highlight.apply(r.highlight,[u.content].concat(h))||g(u.content))+"</code></pre>"+b(e,t)},v.fence_custom={},v.heading_open=function(e,t){return"<h"+e[t].hLevel+">"},v.heading_close=function(e,t){return"</h"+e[t].hLevel+">\n"},v.hr=function(e,t,n){return(n.xhtmlOut?"<hr />":"<hr>")+b(e,t)},v.bullet_list_open=function(){return"<ul>\n"},v.bullet_list_close=function(e,t){return"</ul>"+b(e,t)},v.list_item_open=function(){return"<li>"},v.list_item_close=function(){return"</li>\n"},v.ordered_list_open=function(e,t){var n=e[t];return"<ol"+(n.order>1?' start="'+n.order+'"':"")+">\n"},v.ordered_list_close=function(e,t){return"</ol>"+b(e,t)},v.paragraph_open=function(e,t){return e[t].tight?"":"<p>"},v.paragraph_close=function(e,t){var n=!(e[t].tight&&t&&"inline"===e[t-1].type&&!e[t-1].content);return(e[t].tight?"":"</p>")+(n?b(e,t):"")},v.link_open=function(e,t,n){var r=e[t].title?' title="'+g(p(e[t].title))+'"':"",o=n.linkTarget?' target="'+n.linkTarget+'"':"";return'<a href="'+g(e[t].href)+'"'+r+o+">"},v.link_close=function(){return"</a>"},v.image=function(e,t,n){var r=' src="'+g(e[t].src)+'"',o=e[t].title?' title="'+g(p(e[t].title))+'"':"";return"<img"+r+(' alt="'+(e[t].alt?g(p(s(e[t].alt))):""))+'"'+o+(n.xhtmlOut?" /":"")+">"},v.table_open=function(){return"<table>\n"},v.table_close=function(){return"</table>\n"},v.thead_open=function(){return"<thead>\n"},v.thead_close=function(){return"</thead>\n"},v.tbody_open=function(){return"<tbody>\n"},v.tbody_close=function(){return"</tbody>\n"},v.tr_open=function(){return"<tr>"},v.tr_close=function(){return"</tr>\n"},v.th_open=function(e,t){var n=e[t];return"<th"+(n.align?' style="text-align:'+n.align+'"':"")+">"},v.th_close=function(){return"</th>"},v.td_open=function(e,t){var n=e[t];return"<td"+(n.align?' style="text-align:'+n.align+'"':"")+">"},v.td_close=function(){return"</td>"},v.strong_open=function(){return"<strong>"},v.strong_close=function(){return"</strong>"},v.em_open=function(){return"<em>"},v.em_close=function(){return"</em>"},v.del_open=function(){return"<del>"},v.del_close=function(){return"</del>"},v.ins_open=function(){return"<ins>"},v.ins_close=function(){return"</ins>"},v.mark_open=function(){return"<mark>"},v.mark_close=function(){return"</mark>"},v.sub=function(e,t){return"<sub>"+g(e[t].content)+"</sub>"},v.sup=function(e,t){return"<sup>"+g(e[t].content)+"</sup>"},v.hardbreak=function(e,t,n){return n.xhtmlOut?"<br />\n":"<br>\n"},v.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?"<br />\n":"<br>\n":"\n"},v.text=function(e,t){return g(e[t].content)},v.htmlblock=function(e,t){return e[t].content},v.htmltag=function(e,t){return e[t].content},v.abbr_open=function(e,t){return'<abbr title="'+g(p(e[t].title))+'">'},v.abbr_close=function(){return"</abbr>"},v.footnote_ref=function(e,t){var n=Number(e[t].id+1).toString(),r="fnref"+n;return e[t].subId>0&&(r+=":"+e[t].subId),'<sup class="footnote-ref"><a href="#fn'+n+'" id="'+r+'">['+n+"]</a></sup>"},v.footnote_block_open=function(e,t,n){return(n.xhtmlOut?'<hr class="footnotes-sep" />\n':'<hr class="footnotes-sep">\n')+'<section class="footnotes">\n<ol class="footnotes-list">\n'},v.footnote_block_close=function(){return"</ol>\n</section>\n"},v.footnote_open=function(e,t){return'<li id="fn'+Number(e[t].id+1).toString()+'"  class="footnote-item">'},v.footnote_close=function(){return"</li>\n"},v.footnote_anchor=function(e,t){var n="fnref"+Number(e[t].id+1).toString();return e[t].subId>0&&(n+=":"+e[t].subId),' <a href="#'+n+'" class="footnote-backref">↩</a>'},v.dl_open=function(){return"<dl>\n"},v.dt_open=function(){return"<dt>"},v.dd_open=function(){return"<dd>"},v.dl_close=function(){return"</dl>\n"},v.dt_close=function(){return"</dt>\n"},v.dd_close=function(){return"</dd>\n"};var b=v.getBreak=function(e,t){return(t=function e(t,n){return++n>=t.length-2?n:"paragraph_open"===t[n].type&&t[n].tight&&"inline"===t[n+1].type&&0===t[n+1].content.length&&"paragraph_close"===t[n+2].type&&t[n+2].tight?e(t,n+2):n}(e,t))<e.length&&"list_item_close"===e[t].type?"":"\n"};function _(){this.rules=r({},v),this.getBreak=v.getBreak}function k(){this.__rules__=[],this.__cache__=null}function y(e,t,n,r,o){this.src=e,this.env=r,this.options=n,this.parser=t,this.tokens=o,this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache=[],this.isInLabel=!1,this.linkLevel=0,this.linkContent="",this.labelUnmatchedScopes=0}function x(e,t){var n,r,o,s=-1,i=e.posMax,l=e.pos,a=e.isInLabel;if(e.isInLabel)return -1;if(e.labelUnmatchedScopes)return e.labelUnmatchedScopes--,-1;for(e.pos=t+1,e.isInLabel=!0,n=1;e.pos<i;){if(91===(o=e.src.charCodeAt(e.pos)))n++;else if(93===o&&0==--n){r=!0;break}e.parser.skipToken(e)}return r?(s=e.pos,e.labelUnmatchedScopes=0):e.labelUnmatchedScopes=n-1,e.pos=l,e.isInLabel=a,s}function C(e){var t=p(e);try{t=decodeURI(t)}catch(e){}return encodeURI(t)}function E(e,t){var n,r,o,i=t,l=e.posMax;if(60===e.src.charCodeAt(t)){for(t++;t<l&&10!==(n=e.src.charCodeAt(t));){if(62===n){if(o=C(s(e.src.slice(i+1,t))),!e.parser.validateLink(o))return!1;return e.pos=t+1,e.linkContent=o,!0}if(92===n&&t+1<l){t+=2;continue}t++}return!1}for(r=0;t<l&&32!==(n=e.src.charCodeAt(t))&&!(n<32)&&127!==n;){if(92===n&&t+1<l){t+=2;continue}if(40===n&&++r>1||41===n&&--r<0)break;t++}return i!==t&&(o=s(e.src.slice(i,t)),!!e.parser.validateLink(o)&&(e.linkContent=o,e.pos=t,!0))}function S(e,t){var n,r=t,o=e.posMax,i=e.src.charCodeAt(t);if(34!==i&&39!==i&&40!==i)return!1;for(t++,40===i&&(i=41);t<o;){if((n=e.src.charCodeAt(t))===i)return e.pos=t+1,e.linkContent=s(e.src.slice(r+1,t)),!0;if(92===n&&t+1<o){t+=2;continue}t++}return!1}function T(e){return e.trim().replace(/\s+/g," ").toUpperCase()}_.prototype.renderInline=function(e,t,n){for(var r=this.rules,o=e.length,s=0,i="";o--;)i+=r[e[s].type](e,s++,t,n,this);return i},_.prototype.render=function(e,t,n){for(var r=this.rules,o=e.length,s=-1,i="";++s<o;)"inline"===e[s].type?i+=this.renderInline(e[s].children,t,n):i+=r[e[s].type](e,s,t,n,this);return i},k.prototype.__find__=function(e){for(var t=this.__rules__.length,n=-1;t--;)if(this.__rules__[++n].name===e)return n;return -1},k.prototype.__compile__=function(){var e=this,t=[""];e.__rules__.forEach(function(e){e.enabled&&e.alt.forEach(function(e){0>t.indexOf(e)&&t.push(e)})}),e.__cache__={},t.forEach(function(t){e.__cache__[t]=[],e.__rules__.forEach(function(n){n.enabled&&(t&&0>n.alt.indexOf(t)||e.__cache__[t].push(n.fn))})})},k.prototype.at=function(e,t,n){var r=this.__find__(e);if(-1===r)throw Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=(n||{}).alt||[],this.__cache__=null},k.prototype.before=function(e,t,n,r){var o=this.__find__(e);if(-1===o)throw Error("Parser rule not found: "+e);this.__rules__.splice(o,0,{name:t,enabled:!0,fn:n,alt:(r||{}).alt||[]}),this.__cache__=null},k.prototype.after=function(e,t,n,r){var o=this.__find__(e);if(-1===o)throw Error("Parser rule not found: "+e);this.__rules__.splice(o+1,0,{name:t,enabled:!0,fn:n,alt:(r||{}).alt||[]}),this.__cache__=null},k.prototype.push=function(e,t,n){this.__rules__.push({name:e,enabled:!0,fn:t,alt:(n||{}).alt||[]}),this.__cache__=null},k.prototype.enable=function(e,t){e=Array.isArray(e)?e:[e],t&&this.__rules__.forEach(function(e){e.enabled=!1}),e.forEach(function(e){var t=this.__find__(e);if(t<0)throw Error("Rules manager: invalid rule name "+e);this.__rules__[t].enabled=!0},this),this.__cache__=null},k.prototype.disable=function(e){(e=Array.isArray(e)?e:[e]).forEach(function(e){var t=this.__find__(e);if(t<0)throw Error("Rules manager: invalid rule name "+e);this.__rules__[t].enabled=!1},this),this.__cache__=null},k.prototype.getRules=function(e){return null===this.__cache__&&this.__compile__(),this.__cache__[e]||[]},y.prototype.pushPending=function(){this.tokens.push({type:"text",content:this.pending,level:this.pendingLevel}),this.pending=""},y.prototype.push=function(e){this.pending&&this.pushPending(),this.tokens.push(e),this.pendingLevel=this.level},y.prototype.cacheSet=function(e,t){for(var n=this.cache.length;n<=e;n++)this.cache.push(0);this.cache[e]=t},y.prototype.cacheGet=function(e){return e<this.cache.length?this.cache[e]:0};var A=" \n()[]'\".,!?-";function M(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1")}var L=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,O=/\((c|tm|r|p)\)/gi,$={c:"\xa9",r:"\xae",p:"\xa7",tm:"™"},w=/['"]/,I=/['"]/g,q=/[-\s()\[\]]/;function N(e,t){return!(t<0)&&!(t>=e.length)&&!q.test(e[t])}function H(e,t,n){return e.substr(0,t)+n+e.substr(t+1)}var j=[["block",function(e){e.inlineMode?e.tokens.push({type:"inline",content:e.src.replace(/\n/g," ").trim(),level:0,lines:[0,1],children:[]}):e.block.parse(e.src,e.options,e.env,e.tokens)}],["abbr",function(e){var t,n,r,o,s=e.tokens;if(!e.inlineMode){for(t=1,n=s.length-1;t<n;t++)if("paragraph_open"===s[t-1].type&&"inline"===s[t].type&&"paragraph_close"===s[t+1].type){for(r=s[t].content;r.length&&!((o=function(e,t,n,r){var o,s,i,l,a,c;if(42!==e.charCodeAt(0)||91!==e.charCodeAt(1)||-1===e.indexOf("]:")||(s=x(o=new y(e,t,n,r,[]),1))<0||58!==e.charCodeAt(s+1))return -1;for(l=o.posMax,i=s+2;i<l&&10!==o.src.charCodeAt(i);i++);return(a=e.slice(2,s),0===(c=e.slice(s+2,i).trim()).length)?-1:(r.abbreviations||(r.abbreviations={}),void 0===r.abbreviations[":"+a]&&(r.abbreviations[":"+a]=c),i)}(r,e.inline,e.options,e.env))<0);)r=r.slice(o).trim();s[t].content=r,r.length||(s[t-1].tight=!0,s[t+1].tight=!0)}}}],["references",function(e){var t,n,r,o,s=e.tokens;if(e.env.references=e.env.references||{},!e.inlineMode){for(t=1,n=s.length-1;t<n;t++)if("inline"===s[t].type&&"paragraph_open"===s[t-1].type&&"paragraph_close"===s[t+1].type){for(r=s[t].content;r.length&&!((o=function(e,t,n,r){var o,s,i,l,a,c,h,p,d;if(91!==e.charCodeAt(0)||-1===e.indexOf("]:")||(s=x(o=new y(e,t,n,r,[]),0))<0||58!==e.charCodeAt(s+1))return -1;for(l=o.posMax,i=s+2;i<l&&(32===(a=o.src.charCodeAt(i))||10===a);i++);if(!E(o,i))return -1;for(h=o.linkContent,c=i=o.pos,i+=1;i<l&&(32===(a=o.src.charCodeAt(i))||10===a);i++);for(i<l&&c!==i&&S(o,i)?(p=o.linkContent,i=o.pos):(p="",i=c);i<l&&32===o.src.charCodeAt(i);)i++;return i<l&&10!==o.src.charCodeAt(i)?-1:(d=T(e.slice(1,s)),void 0===r.references[d]&&(r.references[d]={title:p,href:h}),i)}(r,e.inline,e.options,e.env))<0);)r=r.slice(o).trim();s[t].content=r,r.length||(s[t-1].tight=!0,s[t+1].tight=!0)}}}],["inline",function(e){var t,n,r,o=e.tokens;for(n=0,r=o.length;n<r;n++)"inline"===(t=o[n]).type&&e.inline.parse(t.content,e.options,e.env,t.children)}],["footnote_tail",function(e){var t,n,r,o,s,i,l,a,c,h=0,p=!1,d={};if(e.env.footnotes&&(e.tokens=e.tokens.filter(function(e){return"footnote_reference_open"===e.type?(p=!0,a=[],c=e.label,!1):"footnote_reference_close"===e.type?(p=!1,d[":"+c]=a,!1):(p&&a.push(e),!p)}),e.env.footnotes.list)){for(i=e.env.footnotes.list,e.tokens.push({type:"footnote_block_open",level:h++}),t=0,n=i.length;t<n;t++){for(e.tokens.push({type:"footnote_open",id:t,level:h++}),i[t].tokens?((l=[]).push({type:"paragraph_open",tight:!1,level:h++}),l.push({type:"inline",content:"",level:h,children:i[t].tokens}),l.push({type:"paragraph_close",tight:!1,level:--h})):i[t].label&&(l=d[":"+i[t].label]),e.tokens=e.tokens.concat(l),s="paragraph_close"===e.tokens[e.tokens.length-1].type?e.tokens.pop():null,o=i[t].count>0?i[t].count:1,r=0;r<o;r++)e.tokens.push({type:"footnote_anchor",id:t,subId:r,level:h});s&&e.tokens.push(s),e.tokens.push({type:"footnote_close",level:--h})}e.tokens.push({type:"footnote_block_close",level:--h})}}],["abbr2",function(e){var t,n,r,o,s,i,l,a,c,h,p,d,u=e.tokens;if(e.env.abbreviations){for(e.env.abbrRegExp||(d="(^|["+A.split("").map(M).join("")+"])("+Object.keys(e.env.abbreviations).map(function(e){return e.substr(1)}).sort(function(e,t){return t.length-e.length}).map(M).join("|")+")($|["+A.split("").map(M).join("")+"])",e.env.abbrRegExp=RegExp(d,"g")),h=e.env.abbrRegExp,n=0,r=u.length;n<r;n++)if("inline"===u[n].type){for(t=(o=u[n].children).length-1;t>=0;t--)if("text"===(s=o[t]).type){for(a=0,i=s.content,h.lastIndex=0,c=s.level,l=[];p=h.exec(i);)h.lastIndex>a&&l.push({type:"text",content:i.slice(a,p.index+p[1].length),level:c}),l.push({type:"abbr_open",title:e.env.abbreviations[":"+p[2]],level:c++}),l.push({type:"text",content:p[2],level:c}),l.push({type:"abbr_close",level:--c}),a=h.lastIndex-p[3].length;l.length&&(a<i.length&&l.push({type:"text",content:i.slice(a),level:c}),u[n].children=o=[].concat(o.slice(0,t),l,o.slice(t+1)))}}}}],["replacements",function(e){var t,n,r,o,s,i;if(e.options.typographer){for(s=e.tokens.length-1;s>=0;s--)if("inline"===e.tokens[s].type)for(t=(o=e.tokens[s].children).length-1;t>=0;t--)"text"===(n=o[t]).type&&(r=0>(i=r=n.content).indexOf("(")?i:i.replace(O,function(e,t){return $[t.toLowerCase()]}),L.test(r)&&(r=r.replace(/\+-/g,"\xb1").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/gm,"$1—$2").replace(/(^|\s)--(\s|$)/gm,"$1–$2").replace(/(^|[^-\s])--([^-\s]|$)/gm,"$1–$2")),n.content=r)}}],["smartquotes",function(e){var t,n,r,o,s,i,l,a,c,h,p,d,u,f,m,g,v;if(e.options.typographer){for(v=[],m=e.tokens.length-1;m>=0;m--)if("inline"===e.tokens[m].type){for(t=0,g=e.tokens[m].children,v.length=0;t<g.length;t++)if(!("text"!==(n=g[t]).type||w.test(n.text))){for(l=g[t].level,u=v.length-1;u>=0&&!(v[u].level<=l);u--);v.length=u+1,r=n.content,s=0,i=r.length;e:for(;s<i&&(I.lastIndex=s,o=I.exec(r));){if(a=!N(r,o.index-1),s=o.index+1,f="'"===o[0],!(c=!N(r,s))&&!a){f&&(n.content=H(n.content,o.index,"’"));continue}if(p=!c,d=!a){for(u=v.length-1;u>=0&&(h=v[u],!(v[u].level<l));u--)if(h.single===f&&v[u].level===l){h=v[u],f?(g[h.token].content=H(g[h.token].content,h.pos,e.options.quotes[2]),n.content=H(n.content,o.index,e.options.quotes[3])):(g[h.token].content=H(g[h.token].content,h.pos,e.options.quotes[0]),n.content=H(n.content,o.index,e.options.quotes[1])),v.length=u;continue e}}p?v.push({token:t,pos:o.index,single:f,level:l}):d&&f&&(n.content=H(n.content,o.index,"’"))}}}}}]];function B(){this.options={},this.ruler=new k;for(var e=0;e<j.length;e++)this.ruler.push(j[e][0],j[e][1])}function R(e,t,n,r,o){var s,i,l,a,c,h,p;for(this.src=e,this.parser=t,this.options=n,this.env=r,this.tokens=o,this.bMarks=[],this.eMarks=[],this.tShift=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.parentType="root",this.ddIndent=-1,this.level=0,this.result="",i=this.src,h=0,p=!1,l=a=h=0,c=i.length;a<c;a++){if(s=i.charCodeAt(a),!p)if(32===s){h++;continue}else p=!0;(10===s||a===c-1)&&(10!==s&&a++,this.bMarks.push(l),this.eMarks.push(a),this.tShift.push(h),p=!1,h=0,l=a+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.lineMax=this.bMarks.length-1}function D(e,t){var n,r,o;return(r=e.bMarks[t]+e.tShift[t])>=(o=e.eMarks[t])||42!==(n=e.src.charCodeAt(r++))&&45!==n&&43!==n||r<o&&32!==e.src.charCodeAt(r)?-1:r}function P(e,t){var n,r=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(r+1>=o||(n=e.src.charCodeAt(r++))<48||n>57)return -1;for(;;){if(r>=o)return -1;if(!((n=e.src.charCodeAt(r++))>=48)||!(n<=57)){if(41===n||46===n)break;return -1}}return r<o&&32!==e.src.charCodeAt(r)?-1:r}B.prototype.process=function(e){var t,n,r;for(t=0,n=(r=this.ruler.getRules("")).length;t<n;t++)r[t](e)},R.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]},R.prototype.skipEmptyLines=function(e){for(var t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e},R.prototype.skipSpaces=function(e){for(var t=this.src.length;e<t&&32===this.src.charCodeAt(e);e++);return e},R.prototype.skipChars=function(e,t){for(var n=this.src.length;e<n&&this.src.charCodeAt(e)===t;e++);return e},R.prototype.skipCharsBack=function(e,t,n){if(e<=n)return e;for(;e>n;)if(t!==this.src.charCodeAt(--e))return e+1;return e},R.prototype.getLines=function(e,t,n,r){var o,s,i,l,a,c=e;if(e>=t)return"";if(c+1===t)return s=this.bMarks[c]+Math.min(this.tShift[c],n),i=r?this.eMarks[c]+1:this.eMarks[c],this.src.slice(s,i);for(o=0,l=Array(t-e);c<t;c++,o++)(a=this.tShift[c])>n&&(a=n),a<0&&(a=0),s=this.bMarks[c]+a,i=c+1<t||r?this.eMarks[c]+1:this.eMarks[c],l[o]=this.src.slice(s,i);return l.join("")};var z={};["article","aside","button","blockquote","body","canvas","caption","col","colgroup","dd","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","iframe","li","map","object","ol","output","p","pre","progress","script","section","style","table","tbody","td","textarea","tfoot","th","tr","thead","ul","video"].forEach(function(e){z[e]=!0});var F=/^<([a-zA-Z]{1,15})[\s\/>]/,V=/^<\/([a-zA-Z]{1,15})[\s>]/;function Z(e,t){var n=e.bMarks[t]+e.blkIndent,r=e.eMarks[t];return e.src.substr(n,r-n)}function Y(e,t){var n,r,o=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];return o>=s||126!==(r=e.src.charCodeAt(o++))&&58!==r||(n=e.skipSpaces(o),o===n||n>=s)?-1:n}var U=[["code",function(e,t,n){var r,o;if(e.tShift[t]-e.blkIndent<4)return!1;for(o=r=t+1;r<n;){if(e.isEmpty(r)){r++;continue}if(e.tShift[r]-e.blkIndent>=4){o=++r;continue}break}return e.line=r,e.tokens.push({type:"code",content:e.getLines(t,o,4+e.blkIndent,!0),block:!0,lines:[t,e.line],level:e.level}),!0}],["fences",function(e,t,n,r){var o,s,i,l,a,c=!1,h=e.bMarks[t]+e.tShift[t],p=e.eMarks[t];if(h+3>p||126!==(o=e.src.charCodeAt(h))&&96!==o||(a=h,(s=(h=e.skipChars(h,o))-a)<3||(i=e.src.slice(h,p).trim()).indexOf("`")>=0))return!1;if(r)return!0;for(l=t;!(++l>=n)&&(!((h=a=e.bMarks[l]+e.tShift[l])<(p=e.eMarks[l]))||!(e.tShift[l]<e.blkIndent));){;if(!(e.src.charCodeAt(h)!==o||e.tShift[l]-e.blkIndent>=4||(h=e.skipChars(h,o))-a<s)&&!((h=e.skipSpaces(h))<p)){c=!0;break}}return s=e.tShift[t],e.line=l+ +!!c,e.tokens.push({type:"fence",params:i,content:e.getLines(t+1,l,s,!0),lines:[t,e.line],level:e.level}),!0},["paragraph","blockquote","list"]],["blockquote",function(e,t,n,r){var o,s,i,l,a,c,h,p,d,u,f,m=e.bMarks[t]+e.tShift[t],g=e.eMarks[t];if(m>g||62!==e.src.charCodeAt(m++)||e.level>=e.options.maxNesting)return!1;if(r)return!0;for(32===e.src.charCodeAt(m)&&m++,a=e.blkIndent,e.blkIndent=0,l=[e.bMarks[t]],e.bMarks[t]=m,s=(m=m<g?e.skipSpaces(m):m)>=g,i=[e.tShift[t]],e.tShift[t]=m-e.bMarks[t],p=e.parser.ruler.getRules("blockquote"),o=t+1;o<n&&!((m=e.bMarks[o]+e.tShift[o])>=(g=e.eMarks[o]));o++){if(62===e.src.charCodeAt(m++)){32===e.src.charCodeAt(m)&&m++,l.push(e.bMarks[o]),e.bMarks[o]=m,s=(m=m<g?e.skipSpaces(m):m)>=g,i.push(e.tShift[o]),e.tShift[o]=m-e.bMarks[o];continue}if(s)break;for(d=0,f=!1,u=p.length;d<u;d++)if(p[d](e,o,n,!0)){f=!0;break}if(f)break;l.push(e.bMarks[o]),i.push(e.tShift[o]),e.tShift[o]=-1337}for(c=e.parentType,e.parentType="blockquote",e.tokens.push({type:"blockquote_open",lines:h=[t,0],level:e.level++}),e.parser.tokenize(e,t,o),e.tokens.push({type:"blockquote_close",level:--e.level}),e.parentType=c,h[1]=e.line,d=0;d<i.length;d++)e.bMarks[d+t]=l[d],e.tShift[d+t]=i[d];return e.blkIndent=a,!0},["paragraph","blockquote","list"]],["hr",function(e,t,n,r){var o,s,i,l=e.bMarks[t],a=e.eMarks[t];if((l+=e.tShift[t])>a||42!==(o=e.src.charCodeAt(l++))&&45!==o&&95!==o)return!1;for(s=1;l<a;){if((i=e.src.charCodeAt(l++))!==o&&32!==i)return!1;i===o&&s++}return!(s<3)&&(!!r||(e.line=t+1,e.tokens.push({type:"hr",lines:[t,e.line],level:e.level}),!0))},["paragraph","blockquote","list"]],["list",function(e,t,n,r){var o,s,i,l,a,c,h,p,d,u,f,m,g,v,b,_,k,y,x,C,E,S=!0;if((p=P(e,t))>=0)m=!0;else{if(!((p=D(e,t))>=0))return!1;m=!1}if(e.level>=e.options.maxNesting)return!1;if(f=e.src.charCodeAt(p-1),r)return!0;for(v=e.tokens.length,m?(h=e.bMarks[t]+e.tShift[t],u=Number(e.src.substr(h,p-h-1)),e.tokens.push({type:"ordered_list_open",order:u,lines:_=[t,0],level:e.level++})):e.tokens.push({type:"bullet_list_open",lines:_=[t,0],level:e.level++}),o=t,b=!1,y=e.parser.ruler.getRules("list");o<n&&((d=(g=e.skipSpaces(p))>=e.eMarks[o]?1:g-p)>4&&(d=1),d<1&&(d=1),s=p-e.bMarks[o]+d,e.tokens.push({type:"list_item_open",lines:k=[t,0],level:e.level++}),l=e.blkIndent,a=e.tight,i=e.tShift[t],c=e.parentType,e.tShift[t]=g-e.bMarks[t],e.blkIndent=s,e.tight=!0,e.parentType="list",e.parser.tokenize(e,t,n,!0),(!e.tight||b)&&(S=!1),b=e.line-t>1&&e.isEmpty(e.line-1),e.blkIndent=l,e.tShift[t]=i,e.tight=a,e.parentType=c,e.tokens.push({type:"list_item_close",level:--e.level}),o=t=e.line,k[1]=o,g=e.bMarks[t],!(o>=n||e.isEmpty(o))&&!(e.tShift[o]<e.blkIndent));){for(x=0,E=!1,C=y.length;x<C;x++)if(y[x](e,o,n,!0)){E=!0;break}if(E)break;if(m){if((p=P(e,o))<0)break}else if((p=D(e,o))<0)break;if(f!==e.src.charCodeAt(p-1))break}return e.tokens.push({type:m?"ordered_list_close":"bullet_list_close",level:--e.level}),_[1]=o,e.line=o,S&&function(e,t){var n,r,o=e.level+2;for(n=t+2,r=e.tokens.length-2;n<r;n++)e.tokens[n].level===o&&"paragraph_open"===e.tokens[n].type&&(e.tokens[n+2].tight=!0,e.tokens[n].tight=!0,n+=2)}(e,v),!0},["paragraph","blockquote"]],["footnote",function(e,t,n,r){var o,s,i,l,a,c=e.bMarks[t]+e.tShift[t],h=e.eMarks[t];if(c+4>h||91!==e.src.charCodeAt(c)||94!==e.src.charCodeAt(c+1)||e.level>=e.options.maxNesting)return!1;for(l=c+2;l<h;l++){if(32===e.src.charCodeAt(l))return!1;if(93===e.src.charCodeAt(l))break}return l!==c+2&&!(l+1>=h)&&58===e.src.charCodeAt(++l)&&(!!r||(l++,e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.refs||(e.env.footnotes.refs={}),a=e.src.slice(c+2,l-2),e.env.footnotes.refs[":"+a]=-1,e.tokens.push({type:"footnote_reference_open",label:a,level:e.level++}),o=e.bMarks[t],s=e.tShift[t],i=e.parentType,e.tShift[t]=e.skipSpaces(l)-l,e.bMarks[t]=l,e.blkIndent+=4,e.parentType="footnote",e.tShift[t]<e.blkIndent&&(e.tShift[t]+=e.blkIndent,e.bMarks[t]-=e.blkIndent),e.parser.tokenize(e,t,n,!0),e.parentType=i,e.blkIndent-=4,e.tShift[t]=s,e.bMarks[t]=o,e.tokens.push({type:"footnote_reference_close",level:--e.level}),!0))},["paragraph"]],["heading",function(e,t,n,r){var o,s,i,l=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];if(l>=a||35!==(o=e.src.charCodeAt(l))||l>=a)return!1;for(s=1,o=e.src.charCodeAt(++l);35===o&&l<a&&s<=6;)s++,o=e.src.charCodeAt(++l);return!(s>6)&&(!(l<a)||32===o)&&(!!r||(a=e.skipCharsBack(a,32,l),(i=e.skipCharsBack(a,35,l))>l&&32===e.src.charCodeAt(i-1)&&(a=i),e.line=t+1,e.tokens.push({type:"heading_open",hLevel:s,lines:[t,e.line],level:e.level}),l<a&&e.tokens.push({type:"inline",content:e.src.slice(l,a).trim(),level:e.level+1,lines:[t,e.line],children:[]}),e.tokens.push({type:"heading_close",hLevel:s,level:e.level}),!0))},["paragraph","blockquote"]],["lheading",function(e,t,n){var r,o,s,i=t+1;return!(i>=n)&&!(e.tShift[i]<e.blkIndent)&&!(e.tShift[i]-e.blkIndent>3)&&!((o=e.bMarks[i]+e.tShift[i])>=(s=e.eMarks[i]))&&(45===(r=e.src.charCodeAt(o))||61===r)&&(o=e.skipChars(o,r),!((o=e.skipSpaces(o))<s)&&(o=e.bMarks[t]+e.tShift[t],e.line=i+1,e.tokens.push({type:"heading_open",hLevel:61===r?1:2,lines:[t,e.line],level:e.level}),e.tokens.push({type:"inline",content:e.src.slice(o,e.eMarks[t]).trim(),level:e.level+1,lines:[t,e.line-1],children:[]}),e.tokens.push({type:"heading_close",hLevel:61===r?1:2,level:e.level}),!0))}],["htmlblock",function(e,t,n,r){var o,s,i,l,a=e.bMarks[t],c=e.eMarks[t],h=e.tShift[t];if(a+=h,!e.options.html||h>3||a+2>=c||60!==e.src.charCodeAt(a))return!1;if(33===(s=e.src.charCodeAt(a+1))||63===s){if(r)return!0}else{if(47!==s&&(!((o=32|s)>=97)||!(o<=122)))return!1;if(47===s){if(!(i=e.src.slice(a,c).match(V)))return!1}else if(!(i=e.src.slice(a,c).match(F)))return!1;if(!0!==z[i[1].toLowerCase()])return!1;if(r)return!0}for(l=t+1;l<e.lineMax&&!e.isEmpty(l);)l++;return e.line=l,e.tokens.push({type:"htmlblock",level:e.level,lines:[t,e.line],content:e.getLines(t,l,0,!0)}),!0},["paragraph","blockquote"]],["table",function(e,t,n,r){var o,s,i,l,a,c,h,p,d,u,f;if(t+2>n||(a=t+1,e.tShift[a]<e.blkIndent||(i=e.bMarks[a]+e.tShift[a])>=e.eMarks[a]||124!==(o=e.src.charCodeAt(i))&&45!==o&&58!==o)||(s=Z(e,t+1),!/^[-:| ]+$/.test(s)||(c=s.split("|"))<=2))return!1;for(l=0,p=[];l<c.length;l++){if(!(d=c[l].trim()))if(0===l||l===c.length-1)continue;else return!1;if(!/^:?-+:?$/.test(d))return!1;58===d.charCodeAt(d.length-1)?p.push(58===d.charCodeAt(0)?"center":"right"):58===d.charCodeAt(0)?p.push("left"):p.push("")}if(-1===(s=Z(e,t).trim()).indexOf("|")||(c=s.replace(/^\||\|$/g,"").split("|"),p.length!==c.length))return!1;if(r)return!0;for(e.tokens.push({type:"table_open",lines:u=[t,0],level:e.level++}),e.tokens.push({type:"thead_open",lines:[t,t+1],level:e.level++}),e.tokens.push({type:"tr_open",lines:[t,t+1],level:e.level++}),l=0;l<c.length;l++)e.tokens.push({type:"th_open",align:p[l],lines:[t,t+1],level:e.level++}),e.tokens.push({type:"inline",content:c[l].trim(),lines:[t,t+1],level:e.level,children:[]}),e.tokens.push({type:"th_close",level:--e.level});for(e.tokens.push({type:"tr_close",level:--e.level}),e.tokens.push({type:"thead_close",level:--e.level}),e.tokens.push({type:"tbody_open",lines:f=[t+2,0],level:e.level++}),a=t+2;a<n&&!(e.tShift[a]<e.blkIndent)&&-1!==(s=Z(e,a).trim()).indexOf("|");a++){for(c=s.replace(/^\||\|$/g,"").split("|"),e.tokens.push({type:"tr_open",level:e.level++}),l=0;l<c.length;l++)e.tokens.push({type:"td_open",align:p[l],level:e.level++}),h=c[l].substring(+(124===c[l].charCodeAt(0)),124===c[l].charCodeAt(c[l].length-1)?c[l].length-1:c[l].length).trim(),e.tokens.push({type:"inline",content:h,level:e.level,children:[]}),e.tokens.push({type:"td_close",level:--e.level});e.tokens.push({type:"tr_close",level:--e.level})}return e.tokens.push({type:"tbody_close",level:--e.level}),e.tokens.push({type:"table_close",level:--e.level}),u[1]=f[1]=a,e.line=a,!0},["paragraph"]],["deflist",function(e,t,n,r){var o,s,i,l,a,c,h,p,d,u,f,m,g,v;if(r)return!(e.ddIndent<0)&&Y(e,t)>=0;if(h=t+1,e.isEmpty(h)&&++h>n||e.tShift[h]<e.blkIndent||(o=Y(e,h))<0||e.level>=e.options.maxNesting)return!1;c=e.tokens.length,e.tokens.push({type:"dl_open",lines:a=[t,0],level:e.level++}),i=t,s=h;e:for(;;){for(v=!0,g=!1,e.tokens.push({type:"dt_open",lines:[i,i],level:e.level++}),e.tokens.push({type:"inline",content:e.getLines(i,i+1,e.blkIndent,!1).trim(),level:e.level+1,lines:[i,i],children:[]}),e.tokens.push({type:"dt_close",level:--e.level});;){if(e.tokens.push({type:"dd_open",lines:l=[h,0],level:e.level++}),m=e.tight,d=e.ddIndent,p=e.blkIndent,f=e.tShift[s],u=e.parentType,e.blkIndent=e.ddIndent=e.tShift[s]+2,e.tShift[s]=o-e.bMarks[s],e.tight=!0,e.parentType="deflist",e.parser.tokenize(e,s,n,!0),(!e.tight||g)&&(v=!1),g=e.line-s>1&&e.isEmpty(e.line-1),e.tShift[s]=f,e.tight=m,e.parentType=u,e.blkIndent=p,e.ddIndent=d,e.tokens.push({type:"dd_close",level:--e.level}),l[1]=h=e.line,h>=n||e.tShift[h]<e.blkIndent)break e;if((o=Y(e,h))<0)break;s=h}if(h>=n||(i=h,e.isEmpty(i)||e.tShift[i]<e.blkIndent||(s=i+1)>=n)||(e.isEmpty(s)&&s++,s>=n||e.tShift[s]<e.blkIndent||(o=Y(e,s))<0))break}return e.tokens.push({type:"dl_close",level:--e.level}),a[1]=h,e.line=h,v&&function(e,t){var n,r,o=e.level+2;for(n=t+2,r=e.tokens.length-2;n<r;n++)e.tokens[n].level===o&&"paragraph_open"===e.tokens[n].type&&(e.tokens[n+2].tight=!0,e.tokens[n].tight=!0,n+=2)}(e,c),!0},["paragraph"]],["paragraph",function(e,t){var n,r,o,s,i,l,a=t+1;if(a<(n=e.lineMax)&&!e.isEmpty(a)){for(l=e.parser.ruler.getRules("paragraph");a<n&&!e.isEmpty(a);a++)if(!(e.tShift[a]-e.blkIndent>3)){for(s=0,o=!1,i=l.length;s<i;s++)if(l[s](e,a,n,!0)){o=!0;break}if(o)break}}return r=e.getLines(t,a,e.blkIndent,!1).trim(),e.line=a,r.length&&(e.tokens.push({type:"paragraph_open",tight:!1,lines:[t,e.line],level:e.level}),e.tokens.push({type:"inline",content:r,level:e.level+1,lines:[t,e.line],children:[]}),e.tokens.push({type:"paragraph_close",tight:!1,level:e.level})),!0}]];function X(){this.ruler=new k;for(var e=0;e<U.length;e++)this.ruler.push(U[e][0],U[e][1],{alt:(U[e][2]||[]).slice()})}X.prototype.tokenize=function(e,t,n){for(var r,o=this.ruler.getRules(""),s=o.length,i=t,l=!1;i<n&&(e.line=i=e.skipEmptyLines(i),!(i>=n)&&!(e.tShift[i]<e.blkIndent));){for(r=0;r<s&&!o[r](e,i,n,!1);r++);if(e.tight=!l,e.isEmpty(e.line-1)&&(l=!0),(i=e.line)<n&&e.isEmpty(i)){if(l=!0,++i<n&&"list"===e.parentType&&e.isEmpty(i))break;e.line=i}}};var J=/[\n\t]/g,W=/\r[\n\u0085]|[\u2424\u2028\u0085]/g,G=/\u00a0/g;X.prototype.parse=function(e,t,n,r){var o,s=0,i=0;if(!e)return[];(e=(e=e.replace(G," ")).replace(W,"\n")).indexOf("	")>=0&&(e=e.replace(J,function(t,n){var r;return 10===e.charCodeAt(n)?(s=n+1,i=0,t):(r="    ".slice((n-s-i)%4),i=n-s+1,r)})),o=new R(e,this,t,n,r),this.tokenize(o,o.line,o.lineMax)};for(var K=[],Q=0;Q<256;Q++)K.push(0);function ee(e){return e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122}function et(e,t){var n,r,o,s=t,i=!0,l=!0,a=e.posMax,c=e.src.charCodeAt(t);for(n=t>0?e.src.charCodeAt(t-1):-1;s<a&&e.src.charCodeAt(s)===c;)s++;return s>=a&&(i=!1),(o=s-t)>=4?i=l=!1:((32===(r=s<a?e.src.charCodeAt(s):-1)||10===r)&&(i=!1),(32===n||10===n)&&(l=!1),95===c&&(ee(n)&&(i=!1),ee(r)&&(l=!1))),{can_open:i,can_close:l,delims:o}}"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){K[e.charCodeAt(0)]=1});var en=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g,er=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g,eo=["coap","doi","javascript","aaa","aaas","about","acap","cap","cid","crid","data","dav","dict","dns","file","ftp","geo","go","gopher","h323","http","https","iax","icap","im","imap","info","ipp","iris","iris.beep","iris.xpc","iris.xpcs","iris.lwz","ldap","mailto","mid","msrp","msrps","mtqp","mupdate","news","nfs","ni","nih","nntp","opaquelocktoken","pop","pres","rtsp","service","session","shttp","sieve","sip","sips","sms","snmp","soap.beep","soap.beeps","tag","tel","telnet","tftp","thismessage","tn3270","tip","tv","urn","vemmi","ws","wss","xcon","xcon-userid","xmlrpc.beep","xmlrpc.beeps","xmpp","z39.50r","z39.50s","adiumxtra","afp","afs","aim","apt","attachment","aw","beshare","bitcoin","bolo","callto","chrome","chrome-extension","com-eventbrite-attendee","content","cvs","dlna-playsingle","dlna-playcontainer","dtn","dvb","ed2k","facetime","feed","finger","fish","gg","git","gizmoproject","gtalk","hcp","icon","ipn","irc","irc6","ircs","itms","jar","jms","keyparc","lastfm","ldaps","magnet","maps","market","message","mms","ms-help","msnim","mumble","mvn","notes","oid","palm","paparazzi","platform","proxy","psyc","query","res","resource","rmi","rsync","rtmp","secondlife","sftp","sgn","skype","smb","soldat","spotify","ssh","steam","svn","teamspeak","things","udp","unreal","ut2004","ventrilo","view-source","webcal","wtai","wyciwyg","xfire","xri","ymsgr"],es=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,ei=/^<([a-zA-Z.\-]{1,25}):([^<>\x00-\x20]*)>/;function el(e,t){return e=e.source,t=t||"",function n(r,o){return r?(o=o.source||o,e=e.replace(r,o),n):new RegExp(e,t)}}var ea=el(/(?:unquoted|single_quoted|double_quoted)/)("unquoted",/[^"'=<>`\x00-\x20]+/)("single_quoted",/'[^']*'/)("double_quoted",/"[^"]*"/)(),ec=el(/(?:\s+attr_name(?:\s*=\s*attr_value)?)/)("attr_name",/[a-zA-Z_:][a-zA-Z0-9:._-]*/)("attr_value",ea)(),eh=el(/<[A-Za-z][A-Za-z0-9]*attribute*\s*\/?>/)("attribute",ec)(),ep=el(/^(?:open_tag|close_tag|comment|processing|declaration|cdata)/)("open_tag",eh)("close_tag",/<\/[A-Za-z][A-Za-z0-9]*\s*>/)("comment",/<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->/)("processing",/<[?].*?[?]>/)("declaration",/<![A-Z]+\s+[^>]*>/)("cdata",/<!\[CDATA\[[\s\S]*?\]\]>/)(),ed=/^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i,eu=/^&([a-z][a-z0-9]{1,31});/i,ef=[["text",function(e,t){for(var n=e.pos;n<e.posMax&&!function(e){switch(e){case 10:case 92:case 96:case 42:case 95:case 94:case 91:case 93:case 33:case 38:case 60:case 62:case 123:case 125:case 36:case 37:case 64:case 126:case 43:case 61:case 58:return!0;default:return!1}}(e.src.charCodeAt(n));)n++;return n!==e.pos&&(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}],["newline",function(e,t){var n,r,o=e.pos;if(10!==e.src.charCodeAt(o))return!1;if(n=e.pending.length-1,r=e.posMax,!t)if(n>=0&&32===e.pending.charCodeAt(n))if(n>=1&&32===e.pending.charCodeAt(n-1)){for(var s=n-2;s>=0;s--)if(32!==e.pending.charCodeAt(s)){e.pending=e.pending.substring(0,s+1);break}e.push({type:"hardbreak",level:e.level})}else e.pending=e.pending.slice(0,-1),e.push({type:"softbreak",level:e.level});else e.push({type:"softbreak",level:e.level});for(o++;o<r&&32===e.src.charCodeAt(o);)o++;return e.pos=o,!0}],["escape",function(e,t){var n,r=e.pos,o=e.posMax;if(92!==e.src.charCodeAt(r))return!1;if(++r<o){if((n=e.src.charCodeAt(r))<256&&0!==K[n])return t||(e.pending+=e.src[r]),e.pos+=2,!0;if(10===n){for(t||e.push({type:"hardbreak",level:e.level}),r++;r<o&&32===e.src.charCodeAt(r);)r++;return e.pos=r,!0}}return t||(e.pending+="\\"),e.pos++,!0}],["backticks",function(e,t){var n,r,o,s,i,l=e.pos;if(96!==e.src.charCodeAt(l))return!1;for(n=l,l++,r=e.posMax;l<r&&96===e.src.charCodeAt(l);)l++;for(o=e.src.slice(n,l),s=i=l;-1!==(s=e.src.indexOf("`",i));){for(i=s+1;i<r&&96===e.src.charCodeAt(i);)i++;if(i-s===o.length)return t||e.push({type:"code",content:e.src.slice(l,s).replace(/[ \n]+/g," ").trim(),block:!1,level:e.level}),e.pos=i,!0}return t||(e.pending+=o),e.pos+=o.length,!0}],["del",function(e,t){var n,r,o,s,i,l=e.posMax,a=e.pos;if(126!==e.src.charCodeAt(a)||t||a+4>=l||126!==e.src.charCodeAt(a+1)||e.level>=e.options.maxNesting||(s=a>0?e.src.charCodeAt(a-1):-1,i=e.src.charCodeAt(a+2),126===s||126===i||32===i||10===i))return!1;for(r=a+2;r<l&&126===e.src.charCodeAt(r);)r++;if(r>a+3)return e.pos+=r-a,t||(e.pending+=e.src.slice(a,r)),!0;for(e.pos=a+2,o=1;e.pos+1<l;){if(126===e.src.charCodeAt(e.pos)&&126===e.src.charCodeAt(e.pos+1)&&(s=e.src.charCodeAt(e.pos-1),126!==(i=e.pos+2<l?e.src.charCodeAt(e.pos+2):-1)&&126!==s)&&(32!==s&&10!==s?o--:32!==i&&10!==i&&o++,o<=0)){n=!0;break}e.parser.skipToken(e)}return n?(e.posMax=e.pos,e.pos=a+2,t||(e.push({type:"del_open",level:e.level++}),e.parser.tokenize(e),e.push({type:"del_close",level:--e.level})),e.pos=e.posMax+2,e.posMax=l,!0):(e.pos=a,!1)}],["ins",function(e,t){var n,r,o,s,i,l=e.posMax,a=e.pos;if(43!==e.src.charCodeAt(a)||t||a+4>=l||43!==e.src.charCodeAt(a+1)||e.level>=e.options.maxNesting||(s=a>0?e.src.charCodeAt(a-1):-1,i=e.src.charCodeAt(a+2),43===s||43===i||32===i||10===i))return!1;for(r=a+2;r<l&&43===e.src.charCodeAt(r);)r++;if(r!==a+2)return e.pos+=r-a,t||(e.pending+=e.src.slice(a,r)),!0;for(e.pos=a+2,o=1;e.pos+1<l;){if(43===e.src.charCodeAt(e.pos)&&43===e.src.charCodeAt(e.pos+1)&&(s=e.src.charCodeAt(e.pos-1),43!==(i=e.pos+2<l?e.src.charCodeAt(e.pos+2):-1)&&43!==s)&&(32!==s&&10!==s?o--:32!==i&&10!==i&&o++,o<=0)){n=!0;break}e.parser.skipToken(e)}return n?(e.posMax=e.pos,e.pos=a+2,t||(e.push({type:"ins_open",level:e.level++}),e.parser.tokenize(e),e.push({type:"ins_close",level:--e.level})),e.pos=e.posMax+2,e.posMax=l,!0):(e.pos=a,!1)}],["mark",function(e,t){var n,r,o,s,i,l=e.posMax,a=e.pos;if(61!==e.src.charCodeAt(a)||t||a+4>=l||61!==e.src.charCodeAt(a+1)||e.level>=e.options.maxNesting||(s=a>0?e.src.charCodeAt(a-1):-1,i=e.src.charCodeAt(a+2),61===s||61===i||32===i||10===i))return!1;for(r=a+2;r<l&&61===e.src.charCodeAt(r);)r++;if(r!==a+2)return e.pos+=r-a,t||(e.pending+=e.src.slice(a,r)),!0;for(e.pos=a+2,o=1;e.pos+1<l;){if(61===e.src.charCodeAt(e.pos)&&61===e.src.charCodeAt(e.pos+1)&&(s=e.src.charCodeAt(e.pos-1),61!==(i=e.pos+2<l?e.src.charCodeAt(e.pos+2):-1)&&61!==s)&&(32!==s&&10!==s?o--:32!==i&&10!==i&&o++,o<=0)){n=!0;break}e.parser.skipToken(e)}return n?(e.posMax=e.pos,e.pos=a+2,t||(e.push({type:"mark_open",level:e.level++}),e.parser.tokenize(e),e.push({type:"mark_close",level:--e.level})),e.pos=e.posMax+2,e.posMax=l,!0):(e.pos=a,!1)}],["emphasis",function(e,t){var n,r,o,s,i,l,a,c=e.posMax,h=e.pos,p=e.src.charCodeAt(h);if(95!==p&&42!==p||t)return!1;if(n=(a=et(e,h)).delims,!a.can_open)return e.pos+=n,t||(e.pending+=e.src.slice(h,e.pos)),!0;if(e.level>=e.options.maxNesting)return!1;for(e.pos=h+n,l=[n];e.pos<c;){if(e.src.charCodeAt(e.pos)===p){if(r=(a=et(e,e.pos)).delims,a.can_close){for(s=l.pop(),i=r;s!==i;){if(i<s){l.push(s-i);break}if(i-=s,0===l.length)break;e.pos+=s,s=l.pop()}if(0===l.length){n=s,o=!0;break}e.pos+=r;continue}a.can_open&&l.push(r),e.pos+=r;continue}e.parser.skipToken(e)}return o?(e.posMax=e.pos,e.pos=h+n,t||((2===n||3===n)&&e.push({type:"strong_open",level:e.level++}),(1===n||3===n)&&e.push({type:"em_open",level:e.level++}),e.parser.tokenize(e),(1===n||3===n)&&e.push({type:"em_close",level:--e.level}),(2===n||3===n)&&e.push({type:"strong_close",level:--e.level})),e.pos=e.posMax+n,e.posMax=c,!0):(e.pos=h,!1)}],["sub",function(e,t){var n,r,o=e.posMax,s=e.pos;if(126!==e.src.charCodeAt(s)||t||s+2>=o||e.level>=e.options.maxNesting)return!1;for(e.pos=s+1;e.pos<o;){if(126===e.src.charCodeAt(e.pos)){n=!0;break}e.parser.skipToken(e)}return!n||s+1===e.pos||(r=e.src.slice(s+1,e.pos)).match(/(^|[^\\])(\\\\)*\s/)?(e.pos=s,!1):(e.posMax=e.pos,e.pos=s+1,t||e.push({type:"sub",level:e.level,content:r.replace(en,"$1")}),e.pos=e.posMax+1,e.posMax=o,!0)}],["sup",function(e,t){var n,r,o=e.posMax,s=e.pos;if(94!==e.src.charCodeAt(s)||t||s+2>=o||e.level>=e.options.maxNesting)return!1;for(e.pos=s+1;e.pos<o;){if(94===e.src.charCodeAt(e.pos)){n=!0;break}e.parser.skipToken(e)}return!n||s+1===e.pos||(r=e.src.slice(s+1,e.pos)).match(/(^|[^\\])(\\\\)*\s/)?(e.pos=s,!1):(e.posMax=e.pos,e.pos=s+1,t||e.push({type:"sup",level:e.level,content:r.replace(er,"$1")}),e.pos=e.posMax+1,e.posMax=o,!0)}],["links",function(e,t){var n,r,o,s,i,l,a,c,h=!1,p=e.pos,d=e.posMax,u=e.pos,f=e.src.charCodeAt(u);if(33===f&&(h=!0,f=e.src.charCodeAt(++u)),91!==f||e.level>=e.options.maxNesting||(n=u+1,(r=x(e,u))<0))return!1;if((l=r+1)<d&&40===e.src.charCodeAt(l)){for(l++;l<d&&(32===(c=e.src.charCodeAt(l))||10===c);l++);if(l>=d)return!1;for(u=l,E(e,l)?(s=e.linkContent,l=e.pos):s="",u=l;l<d&&(32===(c=e.src.charCodeAt(l))||10===c);l++);if(l<d&&u!==l&&S(e,l))for(i=e.linkContent,l=e.pos;l<d&&(32===(c=e.src.charCodeAt(l))||10===c);l++);else i="";if(l>=d||41!==e.src.charCodeAt(l))return e.pos=p,!1;l++}else{if(e.linkLevel>0)return!1;for(;l<d&&(32===(c=e.src.charCodeAt(l))||10===c);l++);if(l<d&&91===e.src.charCodeAt(l)&&(u=l+1,(l=x(e,l))>=0?o=e.src.slice(u,l++):l=u-1),o||(void 0===o&&(l=r+1),o=e.src.slice(n,r)),!(a=e.env.references[T(o)]))return e.pos=p,!1;s=a.href,i=a.title}return t||(e.pos=n,e.posMax=r,h?e.push({type:"image",src:s,title:i,alt:e.src.substr(n,r-n),level:e.level}):(e.push({type:"link_open",href:s,title:i,level:e.level++}),e.linkLevel++,e.parser.tokenize(e),e.linkLevel--,e.push({type:"link_close",level:--e.level}))),e.pos=l,e.posMax=d,!0}],["footnote_inline",function(e,t){var n,r,o,s=e.posMax,i=e.pos;return!(i+2>=s)&&94===e.src.charCodeAt(i)&&91===e.src.charCodeAt(i+1)&&!(e.level>=e.options.maxNesting)&&!((n=x(e,i+1))<0)&&(!t&&(e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.list||(e.env.footnotes.list=[]),r=e.env.footnotes.list.length,e.pos=i+2,e.posMax=n,e.push({type:"footnote_ref",id:r,level:e.level}),e.linkLevel++,o=e.tokens.length,e.parser.tokenize(e),e.env.footnotes.list[r]={tokens:e.tokens.splice(o)},e.linkLevel--),e.pos=n+1,e.posMax=s,!0)}],["footnote_ref",function(e,t){var n,r,o,s,i=e.posMax,l=e.pos;if(l+3>i||!e.env.footnotes||!e.env.footnotes.refs||91!==e.src.charCodeAt(l)||94!==e.src.charCodeAt(l+1)||e.level>=e.options.maxNesting)return!1;for(r=l+2;r<i;r++){if(32===e.src.charCodeAt(r)||10===e.src.charCodeAt(r))return!1;if(93===e.src.charCodeAt(r))break}return r!==l+2&&!(r>=i)&&(r++,n=e.src.slice(l+2,r-1),void 0!==e.env.footnotes.refs[":"+n]&&(t||(e.env.footnotes.list||(e.env.footnotes.list=[]),e.env.footnotes.refs[":"+n]<0?(o=e.env.footnotes.list.length,e.env.footnotes.list[o]={label:n,count:0},e.env.footnotes.refs[":"+n]=o):o=e.env.footnotes.refs[":"+n],s=e.env.footnotes.list[o].count,e.env.footnotes.list[o].count++,e.push({type:"footnote_ref",id:o,subId:s,level:e.level})),e.pos=r,e.posMax=i,!0))}],["autolink",function(e,t){var n,r,o,s,i,l=e.pos;return!(60!==e.src.charCodeAt(l)||0>(n=e.src.slice(l)).indexOf(">"))&&((r=n.match(ei))?!(0>eo.indexOf(r[1].toLowerCase()))&&(i=C(s=r[0].slice(1,-1)),!!e.parser.validateLink(s)&&(t||(e.push({type:"link_open",href:i,level:e.level}),e.push({type:"text",content:s,level:e.level+1}),e.push({type:"link_close",level:e.level})),e.pos+=r[0].length,!0)):!!(o=n.match(es))&&(i=C("mailto:"+(s=o[0].slice(1,-1))),!!e.parser.validateLink(i)&&(t||(e.push({type:"link_open",href:i,level:e.level}),e.push({type:"text",content:s,level:e.level+1}),e.push({type:"link_close",level:e.level})),e.pos+=o[0].length,!0)))}],["htmltag",function(e,t){var n,r,o,s,i=e.pos;return!!e.options.html&&(s=e.posMax,60===e.src.charCodeAt(i)&&!(i+2>=s))&&(33===(r=e.src.charCodeAt(i+1))||63===r||47===r||!!((n=32|r)>=97&&n<=122))&&!!(o=e.src.slice(i).match(ep))&&(t||e.push({type:"htmltag",content:e.src.slice(i,i+o[0].length),level:e.level}),e.pos+=o[0].length,!0)}],["entity",function(t,n){var r,o,s=t.pos,a=t.posMax;if(38!==t.src.charCodeAt(s))return!1;if(s+1<a){if(35===t.src.charCodeAt(s+1)){if(o=t.src.slice(s).match(ed))return n||(r="x"===o[1][0].toLowerCase()?parseInt(o[1].slice(1),16):parseInt(o[1],10),t.pending+=i(r)?l(r):l(65533)),t.pos+=o[0].length,!0}else if(o=t.src.slice(s).match(eu)){var c=e(o[1]);if(o[1]!==c)return n||(t.pending+=c),t.pos+=o[0].length,!0}}return n||(t.pending+="&"),t.pos++,!0}]];function em(){this.ruler=new k;for(var e=0;e<ef.length;e++)this.ruler.push(ef[e][0],ef[e][1]);this.validateLink=eg}function eg(e){var t=e.trim().toLowerCase();return -1===(t=p(t)).indexOf(":")||-1===["vbscript","javascript","file","data"].indexOf(t.split(":")[0])}em.prototype.skipToken=function(e){var t,n,r=this.ruler.getRules(""),o=r.length,s=e.pos;if((n=e.cacheGet(s))>0){e.pos=n;return}for(t=0;t<o;t++)if(r[t](e,!0))return void e.cacheSet(s,e.pos);e.pos++,e.cacheSet(s,e.pos)},em.prototype.tokenize=function(e){for(var t,n,r=this.ruler.getRules(""),o=r.length,s=e.posMax;e.pos<s;){for(n=0;n<o&&!(t=r[n](e,!1));n++);if(t){if(e.pos>=s)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()},em.prototype.parse=function(e,t,n,r){var o=new y(e,this,t,n,r);this.tokenize(o)};var ev={default:{options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","replacements","smartquotes","references","abbr2","footnote_tail"]},block:{rules:["blockquote","code","fences","footnote","heading","hr","htmlblock","lheading","list","paragraph","table"]},inline:{rules:["autolink","backticks","del","emphasis","entity","escape","footnote_ref","htmltag","links","newline","text"]}}},full:{options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{},block:{},inline:{}}},commonmark:{options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","abbr2"]},block:{rules:["blockquote","code","fences","heading","hr","htmlblock","lheading","list","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","htmltag","links","newline","text"]}}}};function eb(e,t,n){this.src=t,this.env=n,this.options=e.options,this.tokens=[],this.inlineMode=!1,this.inline=e.inline,this.block=e.block,this.renderer=e.renderer,this.typographer=e.typographer}function e_(e,t){"string"!=typeof e&&(t=e,e="default"),t&&null!=t.linkify&&console.warn("linkify option is removed. Use linkify plugin instead:\n\nimport Remarkable from 'remarkable';\nimport linkify from 'remarkable/linkify';\nnew Remarkable().use(linkify)\n"),this.inline=new em,this.block=new X,this.core=new B,this.renderer=new _,this.ruler=new k,this.options={},this.configure(ev[e]),this.set(t||{})}e_.prototype.set=function(e){r(this.options,e)},e_.prototype.configure=function(e){var t=this;if(!e)throw Error("Wrong `remarkable` preset, check name/content");e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enable(e.components[n].rules,!0)})},e_.prototype.use=function(e,t){return e(this,t),this},e_.prototype.parse=function(e,t){var n=new eb(this,e,t);return this.core.process(n),n.tokens},e_.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)},e_.prototype.parseInline=function(e,t){var n=new eb(this,e,t);return n.inlineMode=!0,this.core.process(n),n.tokens},e_.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};var ek=class{md;openEmRenderer;closeEmRenderer;closeHeadingRenderer;injectedHeading;injectedEm;tagMap;constructor(){this.md=new e_("full",{html:!0,typographer:!1}),this.openEmRenderer=this.md.renderer.rules.em_open,this.closeEmRenderer=this.md.renderer.rules.em_close,this.closeHeadingRenderer=this.md.renderer.rules.heading_close,this.injectedHeading=!1,this.injectedEm=!1,this.tagMap={r:"red",b:"blue",g:"green",y:"yellow",p:"pink",t:"teal","!":"spoiler"},this.updateRules()}isTextToken(e){return"content"in e}updateRules(){this.md.renderer.rules.heading_open=(e,t)=>{let n=e[t+1];return n&&this.isTextToken(n)&&n.content&&":"===n.content[0]&&(this.injectedHeading=!0,"{"===n.content[1])?this.parseJsonTag(e,t)+`<h${e[t].hLevel} id="${n.content.replace(/\s+/g,"-").toLowerCase()}">`:n&&this.isTextToken(n)&&n.content?`<h${e[t].hLevel} id="${n.content.replace(/\s+/g,"-").toLowerCase()}">`:`<h${e[t].hLevel}>`},this.md.renderer.rules.em_open=(e,t,n,r)=>this.parseTags(e,t,n,r,this.openEmRenderer),this.md.renderer.rules.heading_close=(e,t,n,r)=>{if(!this.injectedHeading)return this.closeHeadingRenderer(e,t,n,r);{this.injectedHeading=!1;let o=this.closeHeadingRenderer(e,t,n,r);return`${o.concat("</span>").replace(/\n/g," ")}
`}},this.md.renderer.rules.em_close=(e,t,n,r)=>this.injectedEm?(this.injectedEm=!1,"</span>"):this.closeEmRenderer(e,t,n,r),this.parseKatex()}async loadFile(e){return new Promise((t,n)=>{let r=new XMLHttpRequest;r.open("GET",e,!0),r.onload=()=>{r.status>=200&&r.status<300?t(r.response):n({status:r.status,statusText:r.statusText})},r.onerror=()=>{n({status:r.status,statusText:r.statusText})},r.send()})}async asyncRead(e){let t=await this.loadFile(e);return!t||t.length<=1?"":t}async parseGFM(e){let t=await this.loadFile(`${e}.md`);return!t||t.length<=1?"":this.md.render(t)}parseTags(e,t,n,r,o){let s=e[t+1];if(s&&this.isTextToken(s)&&s.content&&":"===s.content[0]){if(this.injectedEm=!0,"{"===s.content[1])return this.parseJsonTag(e,t);let n=s.content[1];return s.content=s.content.slice(2),`<span class="${this.tagMap[n]}">`}return o?o(e,t,n,r):""}parseJsonTag(e,t){let n=e[t+1];if(!n||!this.isTextToken(n)||!n.content)return"";let r=n.content.indexOf("}");if(-1===r)return"";let o=n.content.substring(1,r+1);n.content=n.content.slice(r+2),"inline"===n.type&&n.children&&n.children[0]&&(n.children[0].content=n.content);let s="em_open"===e[t].type?"tagging-text":"tagging";return`<span class="${s}" data-tags="${o}">`}parseKatex(){this.md.inline.ruler.push("katex",((e,t)=>{let n=e.pos,r=e.posMax,o=n;if("$"!==e.src.charAt(o))return!1;for(++o;o<r&&"$"===e.src.charAt(o);)++o;let s=e.src.slice(n,o);if(s.length>2)return!1;let i=o,l=0;for(;o<r;){let n=e.src.charAt(o);if("{"===n&&(0===o||"\\"!==e.src.charAt(o-1)))l++;else if("}"===n&&(0===o||"\\"!==e.src.charAt(o-1))){if(--l<0)return!1}else if("$"===n&&0===l){let n=o,l=o+1;for(;l<r&&"$"===e.src.charAt(l);)++l;if(l-n===s.length){if(!t){let t=e.src.slice(i,n).replace(/[ \n]+/g," ").trim();e.push({type:"katex",content:t,block:s.length>1,level:e.level})}return e.pos=l,!0}}o++}return t||(e.pending+=s),e.pos+=s.length,!0}).bind(this),{}),this.md.block.ruler.push("katex",((e,t,n)=>{let r=!1,o=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(o+1>s)return!1;let i=e.src.charAt(o);if("$"!==i)return!1;let l=o,a=(o=e.skipChars(o,+i))-l;if(2!==a)return!1;let c=t;for(;!(++c>=n)&&(!((o=e.bMarks[c]+e.tShift[c])<(s=e.eMarks[c]))||!(e.tShift[c]<e.blkIndent));){;if(!("$"!==e.src.charAt(o)||e.tShift[c]-e.blkIndent>=4||(o=e.skipChars(o,+i))-l<a||(o=e.skipSpaces(o))<s)){r=!0;break}}let h=e.getLines(t+1,c,e.tShift[t],!0).replace(/[ \n]+/g," ").trim();return e.tokens.push({type:"katex",content:h,lines:[t,c+ +!!r],level:e.level}),e.line=c+ +!!r,!0}).bind(this),{}),this.md.renderer.rules.katex=(e,t)=>`<span class="tagging-katex">${e[t].content}</span>`}},ey=class{navLock;currentActiveSearch;techPages;addPageChangeEvent;helperObj;constructor(e,t,n){this.navLock=!1,this.currentActiveSearch=null,this.techPages=e,this.addPageChangeEvent=t,this.searchBoxListener=this.searchBoxListener.bind(this),this.helperObj=n}initSearchIcons(){let e=document.querySelector("#nav-bar__searchbox");if(!e)return;e.addEventListener("click",this.searchBoxListener);let t=document.querySelector("#nav-bar__search--input");t&&(t.addEventListener("keyup",this.filterFunction.bind(this)),t.addEventListener("focusin",this.filterFunction.bind(this))),e.targetParam="search";let n=document.querySelector("#nav-bar__games--icon");n&&n.addEventListener("click",this.gamesFunction.bind(this)),e.addEventListener("focusout",e=>{let t=document.querySelector("#nav-bar__search");t&&(e.stopPropagation(),e.relatedTarget instanceof Node&&(t.contains(e.relatedTarget)||this.clearFunction()))}),this.fillSearch()}initOnboardingIcon(){let e=document.querySelector("#content__home__onboarding--icon");e&&e.addEventListener("click",this.gamesFunction.bind(this))}searchBoxListener(e){if(this.navLock)return;let t=e.currentTarget;if(!t||!(t instanceof HTMLElement))return;let n=t.targetParam;n&&(this.currentActiveSearch=n,this.injectSearchBox("#nav-bar__search"),null===document.querySelector(".nav-bar__search--results")&&this.fillSearch())}injectSearchBox(e){if(this.navLock)return;let t=document.querySelector(e);if(!t)return;t.removeEventListener("click",this.searchBoxListener);let n=`${e}box`,r=`${e}--input`,o=document.querySelector(n),s=document.querySelector(r);if(!o)return;let i=280;"search"===this.currentActiveSearch?document.body.clientWidth>=480&&(i=400):i=280,o.style.width=`${i}px`,"search"===this.currentActiveSearch?s&&s.focus():o.focus()}clearFunction(){let e=document.querySelector("#nav-bar__searchbox");if(!e)return;for(let t of(this.navLock=!0,e.getElementsByClassName("button__redirect")))t instanceof HTMLElement&&(t.style.display="none");let t=document.querySelector("#nav-bar__search--hr");t&&(t.style.display="none"),this.navLock=!1}filterFunction(){let e="#nav-bar__search";if("games"===this.currentActiveSearch)return;let t=document.querySelector(`${e}--input`);if(!t)return;let n=t.value.toUpperCase().trim(),r=n.split(" "),o=document.querySelector(`${e}box`);if(!o)return;let s=o.getElementsByClassName("button__redirect"),i=0;for(let e of s){if(!(e instanceof HTMLElement))continue;let t=e.textContent||e.innerText||"",o=(t+=` ${e.dataset.section||""} ${e.dataset.document||""}`).toUpperCase(),s=!0;for(let e of r)if(!o.includes(e)||0===n.length){s=!1;break}if(s){if("TALES OF".includes(n)||"T"===n||"TO"===n){"game"===e.dataset.tag&&(e.style.display="block");continue}e.style.display=i<12||"game"===e.dataset.tag?"block":"none",i++}else e.style.display="none"}let l=document.querySelector(`${e}--hr`);l&&(l.style.display=(i>0||"TALES OF".includes(n)||"T"===n||"TO"===n)&&n.length>0?"block":"none")}gamesFunction(){let e=document.querySelector("#nav-bar__searchbox");if(!e)return;for(let t of e.getElementsByClassName("button__redirect"))t instanceof HTMLElement&&(t.style.display="none");let t=document.querySelector("#nav-bar__search--hr");t&&(t.style.display="none"),this.navLock=!1;let n=document.querySelector("#nav-bar__search--input");n&&(n.value="Tales of",n.focus())}fillSearch(){let e=[],t=[],n=document.querySelector("#nav-bar__searchbox");if(!n)return;let r=`
      <hr id="nav-bar__search--hr" tabindex="0" style="display: none;">
    `;for(let[o,s]of(n.insertAdjacentHTML("beforeend",r),this.techPages.entries())){if("N/A"===o.dim||o.document.includes("-C")||o.document.includes("-B"))continue;let n=new DOMParser().parseFromString(s,"text/html");n.querySelectorAll("h1").forEach(()=>{let t=`
          <a href="/${o.document}" 
             title="${o.section}" 
             data-document="${o.document}" 
             class="nav-bar__search--results button__redirect" 
             tabindex="0" 
             data-section="${o.section}" 
             data-tag="game">
            <span class="nav-bar__search--results--games material-symbols-rounded">sports_esports</span>
            <b>${o.section}</b>
          </a>
        `;e.push(t)});let r=n.querySelectorAll("h1, h2, h3, h4"),i=null;r.forEach(e=>{if("H1"===e.tagName)i=null;else if("H2"===e.tagName&&(i=e.id),("glitches"===i||"techniques"===i)&&"general-techniques"!==e.id&&"H2"!==e.tagName){let n=o.section.replace("Tales of","").trim(),r=`
              <a href="/${o.document}" 
                 title="${o.section}" 
                 data-document="${o.document}" 
                 class="nav-bar__search--results button__redirect" 
                 tabindex="0" 
                 data-section="${o.section}" 
                 data-tag="tech" 
                 data-redirect="#${e.id}">
                <span class="nav-bar__search--results--games material-symbols-rounded">book_2</span>
                <b>${n}</b>
                <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;${e.textContent||""}
              </a>
            `;t.push(r)}})}e.sort(),t.sort();let o=e.join(""),s=t.join(""),i=`${o}${s}`;n.insertAdjacentHTML("beforeend",i),document.querySelectorAll("a.nav-bar__search--results").forEach(e=>{e instanceof HTMLElement&&this.addPageChangeEvent(e)})}revealID(e){let t=document.getElementById(e);if(!t){let t=this.helperObj.h2Collection;if(!t)return;let n=0;for(let r of t)if(r.content.includes(`id="${e}"`)){n=t.indexOf(r);break}let r=document.querySelectorAll(".content__selectorbox--item");r[n]&&r[n].click()}if(!(t=document.getElementById(e)))return;let n=null,r=!1;if("H4"===t.tagName)t.dataset.open&&(n=t.dataset.open.split(" "),r=!0);else if(t.parentNode instanceof HTMLElement&&t.parentNode.className.includes("content__")){let e=t.parentNode.firstElementChild;e instanceof HTMLElement&&e?.dataset.open&&(n=e.dataset.open.split(" "),r=!0)}else if(t.parentNode?.parentNode instanceof HTMLElement){let e=t.parentNode.parentNode.firstElementChild;e instanceof HTMLElement&&e?.dataset.open&&(n=e.dataset.open.split(" "),r=!0)}r&&n&&n.forEach(e=>{for(let t of document.getElementsByClassName(e))if(t instanceof HTMLElement&&t.hidden){if(t.hidden=!1,t.parentNode instanceof HTMLElement&&t.parentNode.className.includes("content__")){let e=t.parentNode.firstElementChild?.children[0];e&&"expand_circle_down"===e.innerHTML&&(e.innerHTML="expand_circle_up")}else if(t.parentNode?.parentNode instanceof HTMLElement){let e=t.parentNode.parentNode.firstElementChild?.children[0];e&&"expand_circle_down"===e.innerHTML&&(e.innerHTML="expand_circle_up")}}})}},ex=class{headings;ticking;helperObj;constructor(e){this.headings=[],this.ticking=!1,this.helperObj=e,document.addEventListener("scroll",()=>{!this.ticking&&this.helperObj.inTechPage&&(window.requestAnimationFrame(()=>{this.highlightTOC(),this.ticking=!1}),this.ticking=!0)})}clearHeadings(){this.headings=[]}createTOC(e){let t=document.getElementById("content__tocborder"),n=null,r=null,o=null,s=null;if(null==t){if(null==document.querySelector(".content__selectorbox--item.selected")||!(r=document.getElementById("content"))||((t=document.createElement("div")).id="content__tocborder",r.appendChild(t),(o=document.createElement("div")).id="content__toc",(s=document.createElement("div")).id="content__tocmobile",t.appendChild(o),!(n=document.getElementById("content__selector"))))return;t.style.top=`${n.offsetTop+r.offsetTop+10}px`;let e=document.createElement("span");e.className="material-symbols-rounded",e.id="content__tocicon",e.innerHTML="menu_book",e.style.display="none";let i=document.getElementById("section-container__div");if(!i)return;i.appendChild(e);let l=document.createElement("div");l.id="content__tocicon--box",l.style.width="0px",l.tabIndex=0,i.appendChild(l),l.appendChild(s),this.helperObj.dragScrollElement(`#${l.id}`,1),this.helperObj.dragScrollElement(`#${o.id}`,1),e.addEventListener("click",()=>{let e=document.getElementById("content__tocicon--box");if(!e)return;let t=document.body.clientWidth>=480?360:300;e.style.width=`${t}px`,e.className="fadein",l.style.display="block",e.focus()}),l.addEventListener("focusout",e=>{let t=document.getElementById("content__tocicon--box");t&&(e.stopPropagation(),t.className="fadeout")})}else n=document.getElementById("content__selector"),r=document.getElementById("content"),o=document.getElementById("content__toc"),s=document.getElementById("content__tocmobile");if(!t||!n)return;t.style.height=`calc(100% - ${n.offsetTop+150}px)`;let i="<p>ON THIS SECTION</p><hr>";o&&(o.innerHTML=i),s&&(s.innerHTML=i),this.headings=[];let l=document.querySelectorAll("#content__currenth2 h3"),a=document.querySelectorAll("#content__currenth2 h4");for(let e of l)this.headings.push({name:e.textContent||"",clientY:e.getBoundingClientRect().top,isH3:!0,obj:e,id:e.id});for(let e of a)this.headings.push({name:e.textContent||"",clientY:e.getBoundingClientRect().top,isH3:!1,obj:e,id:e.id});this.headings.sort((e,t)=>e.clientY-t.clientY);let c="";for(let t of this.headings){let n="";n=(n=t.isH3?`<div data-document="${e}" data-section="${this.helperObj.currentSection}" data-redirect="#${t.id}" class="content__toc--search button__redirect" style="display: block;">`:`<div data-document="${e}" data-section="${this.helperObj.currentSection}" data-redirect="#${t.id}" class="content__toc--search content__toc--search-h4 button__redirect" style="display: block;">`).concat(`${t.name}</div>`),c=c.concat(n)}o&&(o.innerHTML=i.concat(c)),s&&(s.innerHTML=i.concat(c))}highlightTOC(){let e=null,t=0,n=0;for(let r=0;r<this.headings.length;r++){let o=this.headings[r];if(o.isH3)if(o.obj.getBoundingClientRect().top<=Math.max(.25*window.innerHeight,150)||null===e)e=o,t=r;else{n=r;break}}null!==e&&(document.querySelectorAll(".content__toc--search.active").forEach(e=>e.classList.remove("active")),document.querySelectorAll(`.content__toc--search[data-redirect="#${e.id}"]`).forEach(e=>e.classList.add("active")));for(let e=0;e<this.headings.length;e++){let r=this.headings[e];if(!r.isH3){let o=e>=t&&e<=n||0===n&&t>0&&e>=t||0===n&&0===t;document.querySelectorAll(`.content__toc--search[data-redirect="#${r.id}"]`).forEach(e=>{o?(e.style.display="block",e.classList.add("active")):(e.style.display="none",e.classList.remove("active"))})}}}clearSectionTOC(){let e=document.getElementById("content__tocicon");null!==e&&e.remove();let t=document.getElementById("content__tocicon--box");null!==t&&t.remove()}},eC=class{colorCollection;h2Collection;helperObj;colorsIndex=0;colorsNames=["yellow","pink","teal","green","red","lavender","blue"];constructor(e){this.colorCollection={yellow:"#f8d959",pink:"#fe796f",teal:"#45c9c9",green:"#58f15b",red:"#e74a41",lavender:"#c8a2b0",blue:"#205aaa"},this.h2Collection=[],this.helperObj=e}collapseHeadings(e){this.h2Collection=[],this.colorsIndex=0;let t=null,n=null,r=null,o="",s="",i="",l=!0,a=e.innerHTML.split("\n"),c=document.getElementById("content");if(!c)return;for(let e of a)if(e.includes('h4 id="')){t&&(s+=`</div></div>
`),t=(t=e.substring(e.indexOf('h4 id="')+7)).substring(0,t.indexOf('"')),s+=`
          <div class="content__h4">
        `;let o=e.indexOf('h4 id="')+7+t.length+1,i=` data-open="${t} ${n} ${r}"`,l=e.substring(0,o)+i+e.substring(o);s+=`
          ${l}
          <div class="${t}">
        `}else e.includes('h3 id="')?(t&&(s+=`</div></div>
`,t=null),n&&(s+=`
            <hr class="content__h3--divider" draggable="false" />
            </div></div>
          `),n=(n=e.substring(e.indexOf('h3 id="')+7)).substring(0,n.indexOf('"')),s+=`
          <div class="content__h3">
            <button class="content__collapse" data-open="${n} ${r}">
              <span class="material-symbols-rounded">expand_circle_up</span>
            </button>
            ${e}
            <div class="${n}">
        `):e.includes('h2 id="')?(l=!1,t&&(s+=`</div></div>
`,t=null),n&&(s+=`</div></div>
`,n=null),r&&(s+=`</div></div>
`,this.h2Collection.push({id:r,name:o,content:s,color:this.colorsNames[this.colorsIndex]}),this.colorsIndex++,this.colorsIndex>=this.colorsNames.length&&(this.colorsIndex=0),s=""),r=(r=e.substring(e.indexOf('h2 id="')+7)).substring(0,r.indexOf('"')),o=(o=e.substring(e.indexOf('">')+2)).substring(0,o.indexOf("</h2>")),s+=`
          <div class="content__h2" id="${r}">
            <h2></h2>
            <div class="${r}">
        `):l?i+=`${e}
`:s+=`${e}
`;t&&(s+=`</div></div>
`),n&&(s+=`</div></div>
`),r&&(s+=`</div></div>
`,this.h2Collection.push({id:r,name:o,content:s,color:this.colorsNames[this.colorsIndex]}),this.colorsIndex++,this.colorsIndex>=this.colorsNames.length&&(this.colorsIndex=0),s="");let h=`
      <div id="content__selector">
        <div id="content__selectorbox">
    `;for(let e of this.h2Collection){let t=e.id,n=e.name,r=this.colorCollection[e.color];h+=`
        <div class="content__selectorbox--item" data-open="${t}" data-highlight="${r}">
          ${n}
        </div>
      `}this.helperObj.h2Collection=this.h2Collection,this.helperObj.colorCollection=this.colorCollection,h+=`
        </div>
        <hr id="content__selectorhr"></hr>
    `;let p=`
      <div id="content__mobilechevrons">
        <span class="content__mobilechevrons--left material-symbols-rounded">chevron_backward</span>
        <span class="content__mobilechevrons--right material-symbols-rounded">chevron_forward</span>
      </div></div>
      <div id="content__currenth2"></div>
    `;e.innerHTML=this.h2Collection.length>0?`${i}${h}${p}`:i,this.helperObj.dragScrollElement("#content__selectorbox",0),this.setupChevrons(),c.style.visibility="visible"}setupChevrons(){let e=document.getElementById("content__mobilechevrons"),t=document.querySelector(".content__mobilechevrons--left"),n=document.querySelector(".content__mobilechevrons--right"),r=document.getElementById("content__selectorbox");if(!e||!t||!n||!r)return;let o=()=>{let o=r.clientWidth,s=r.scrollWidth;o<s?(e.style.display="block",e.style.left=`${r.getBoundingClientRect().right}px`):e.style.display="none";let i=r.scrollLeft;i>0?t.classList.add("active"):t.classList.remove("active"),i<s-o?n.classList.add("active"):n.classList.remove("active")};o(),window.addEventListener("resize",o,!0),t.addEventListener("click",()=>{let e=r.offsetWidth,t=Math.max(0,r.scrollLeft-e);r.scrollTo({left:t,behavior:"smooth"}),setTimeout(()=>o(),700)}),n.addEventListener("click",()=>{let e=r.offsetWidth,t=Math.min(r.scrollWidth-e,r.scrollLeft+e);r.scrollTo({left:t,behavior:"smooth"}),setTimeout(()=>o(),700)}),r.addEventListener("scroll",()=>{o()})}collapseHeadingStyle(e){let t=e.currentTarget;if(!t||!(t instanceof HTMLElement)||!t.dataset.open)return;let n=t.dataset.open.split(" ");for(let e=0;e<n.length;e++)for(let r of document.getElementsByClassName(n[e]))if(r instanceof HTMLElement){if(r.hidden){r.hidden=!1;let e=t.children[0];e&&"expand_circle_down"===e.innerHTML&&(e.innerHTML="expand_circle_up")}else if(0===e){r.hidden=!0;let e=t.children[0];e&&"expand_circle_up"===e.innerHTML&&(e.innerHTML="expand_circle_down")}}}shareHeadings(){let e=document.location.pathname.substring(1),t=e.split("/");t.length>1&&(e=t[0]);let n=window.location.origin;document.querySelectorAll("h3, h4").forEach(t=>{t.style.cursor="copy",t.addEventListener("click",()=>{let r=`${n}/${e}/${t.id}`;navigator.clipboard.writeText(r).catch(()=>{})})})}},eE=class{helperObj;katexObj;constructor(e){this.compileDirectives=this.compileDirectives.bind(this),this.sortTables=this.sortTables.bind(this),this.treatSpoilers=this.treatSpoilers.bind(this),this.compileTags=this.compileTags.bind(this),this.helperObj=e,this.katexObj=null}setKatex(e){this.katexObj=e}compileTags(){document.querySelectorAll(".tagging, .tagging-text").forEach(e=>{if(e.classList.contains("tagging-computed"))return;e.classList.add("tagging-computed");let t=JSON.parse((e.dataset.tags||"{}").replace(/'/g,'"')),n=(e,t,n,r,o)=>{let s,i=document.createElement("p");if(i.style.opacity="1","img"===e)(s=document.createElement("img")).alt="",s.loading="lazy",s.classList.add("content__figure");else{(s=document.createElement("video")).preload="metadata",s.controls=!0,s.muted=!0,s.loop=!0;let e=document.createElement("source");e.src=t,e.type="video/mp4",s.appendChild(e)}if(s.draggable=!1,s.width=n,s.height=r,s.style.order="2",s.style.width="80%",s.style.height="auto",s.style.maxWidth="640px",s.style.outline="none",s.style.borderRadius="14px",s.src=t,i.appendChild(s),o){let e=document.createElement("figcaption");e.textContent=`\xa0${o}\xa0`,i.appendChild(e)}return i};if(t.sections){let n="checked",r=" <span>(LOADED)</span>",o="",s="",i="",l="";"b"===t.article?(o="checked",s=" <span>(LOADED)</span>",n="",r="",i="",l=""):"c"===t.article&&(i="checked",l=" <span>(LOADED)</span>",o="",s="",n="",r="");let a=(this.helperObj.currentDocument??"").replace("-C","").replace("-B",""),c=this.helperObj.currentSection??"",h=`
          <div id="content__sections">
            <div class="content__sections--entry">
              <div class="content__sections--input-label">
                <input type="radio" id="systems" name="sections" value="systems" data-redirect="NONE" data-document="${a}" data-section="${c}" ${n} />
                <label for="systems">Systems${r}</label>
              </div>
              <p>Detailed information on the game's systems, techniques, and glitches.</p>
            </div>
            <div class="content__sections--entry">
              <div class="content__sections--input-label">
                <input type="radio" id="characters" name="sections" value="characters" data-redirect="NONE" data-document="${a}-C" data-section="${c}" ${i} />
                <label for="characters">Characters${l}</label>
              </div>
              <p>A breakdown of each character, such as notable arte properties, strategies, and character-specific techniques.</p>
            </div>
            <div class="content__sections--entry">
              <div class="content__sections--input-label">
                <input type="radio" id="bosses" name="sections" value="bosses" data-redirect="NONE" data-document="${a}-B" data-section="${c}" ${o} />
                <label for="bosses">Bosses${s}</label>
              </div>
              <p>A summary of each boss. Contains spoilers!</p>
            </div>
          </div>`,p=document.createElement("div");p.innerHTML=h,e.appendChild(p),document.querySelectorAll('input[name="sections"]').forEach(e=>{this.helperObj.addPageChangeEvent(e)})}if(t.versions){let n=`Version: ${t.versions}.`;if(!this.helperObj.versionMap.has(t.versions)){let e=this.helperObj.versionMap.size,n=this.helperObj.colorList[e];this.helperObj.versionMap.set(t.versions,n)}let r=document.createElement("span");r.className="material-symbols-rounded",r.style.marginRight="15px",r.style.cursor="help",r.textContent="devices",r.style.color=`var(--${this.helperObj.versionMap.get(t.versions)})`,r.style.filter="brightness(1.5)",e.appendChild(r),r.addEventListener("mouseover",()=>{this.helperObj.loadTooltip(r,n)}),r.addEventListener("mouseleave",()=>{this.helperObj.unloadTooltip()})}if(t.todo){let t=document.createElement("span");t.className="material-symbols-rounded",t.style.color="goldenrod",t.style.marginRight="15px",t.style.cursor="help",t.textContent="error",e.appendChild(t),t.addEventListener("mouseover",()=>{this.helperObj.loadTooltip(t,"This section needs work, is not confirmed or needs testing.")}),t.addEventListener("mouseleave",()=>{this.helperObj.unloadTooltip()})}if(t.media){let r=/\.(webp|png|jpg|jpeg|gif)$|&ii$/.test(t.media)?"img":"video";if(!1===t.forcedmedia)((t,r,o)=>{let s=document.createElement("span");s.dataset.media=r,s.className="material-symbols-rounded",s.style.marginRight="15px",s.style.cursor="pointer",s.textContent="img"===t?"imagesmode":"play_circle",e.appendChild(s),s.addEventListener("click",()=>{let i=document.querySelector(`p[data-media="${s.dataset.media}"]`);if(i)return void i.remove();let l=n("img"===t?"img":"video",r,640,480,o);l.dataset.media=r,e.parentNode?.insertBefore(l,e.nextSibling)})})(r,t.media,t.caption);else{let o=n(r,t.media,640,480,t.caption);e.parentNode?.insertBefore(o,e.nextSibling)}}if(t.redirect){let n=document.createElement("span");n.className="material-symbols-rounded",n.style.marginRight="5px",n.textContent="link",e.classList.remove("tagging","tagging-text"),e.classList.add("content__redirect"),e.dataset.redirect=t.redirect,t.document?(e.dataset.document=t.document,e.dataset.section=this.helperObj.fileList.find(e=>e.document===t.document)?.section||""):(e.dataset.document=this.helperObj.currentDocument,e.dataset.section=this.helperObj.currentSection),e.insertBefore(n,e.firstChild),this.helperObj.addPageChangeEvent(e)}t.reference&&(e.classList.remove("tagging","tagging-text"),e.classList.add("content__redirect"),e.dataset.redirect="#references",e.dataset.document=this.helperObj.currentDocument,e.dataset.section=this.helperObj.currentSection,this.helperObj.addPageChangeEvent(e))}),document.querySelectorAll(".tagging-katex").forEach(e=>{if(e.classList.contains("tagging-computed"))return;e.classList.add("tagging-computed");let t=e.innerHTML;this.katexObj&&(e.innerHTML=this.katexObj.renderToString(t))})}compileDirectives(){this.compileTags(),this.sortTables(),this.treatSpoilers()}sortTables(){let e=(e,t)=>e.children[t]?.textContent?.trim()||"",t=(t,n)=>(r,o)=>{let s=e(n?r:o,t),i=e(n?o:r,t);return""===s||""===i||isNaN(Number(s))||isNaN(Number(i))?s.localeCompare(i):Number(s)-Number(i)};document.querySelectorAll("th").forEach(e=>{e.innerHTML+='<span class="material-symbols-rounded">swap_vert</span>',e.addEventListener("click",()=>{let n=e.closest("table"),r=n?.querySelector("tbody")||null;if(!r)return;let o=Array.from(r.querySelectorAll("tr")),s=Array.from(e.parentNode?.children||[]).indexOf(e),i="true"!==e.dataset.asc;o.sort(t(s,i)).forEach(e=>r.appendChild(e)),e.dataset.asc=i.toString()})})}treatSpoilers(){document.querySelectorAll(".spoiler").forEach(e=>{e.addEventListener("click",e=>{let t=e.currentTarget;t&&t instanceof HTMLElement&&(t.style.background="transparent")})})}},eS=class{mouseDown;startX;scrollLeft;startY;scrollTop;scrollButton;rootElement;rotateFlag;leaveCounter;currentVelocity;colorList;versionMap;currentSection;currentDocument;inTechPage;addPageChangeEvent;fileList;colorCollection;h2Collection;constructor(e,t){this.mouseDown=!1,this.startX=0,this.scrollLeft=0,this.startY=0,this.scrollTop=0,this.scrollButton=null,this.rootElement=null,this.colorList=["yellow","teal","green","pink","red","blue"],this.versionMap=new Map,this.rotateFlag=!1,this.leaveCounter=0,this.currentVelocity=0,this.currentSection=void 0,this.currentDocument=void 0,this.inTechPage=!1,this.addPageChangeEvent=e,this.fileList=t,this.colorCollection={},this.h2Collection=[]}updateStatus(e,t,n){this.currentDocument=e,this.currentSection=t,this.inTechPage=n,this.versionMap=new Map}logoInit(){let e=document.querySelector("#nav-bar__title");e&&(e.addEventListener("mouseenter",this.startRotateLogo.bind(this)),e.addEventListener("mouseleave",this.stopRotateLogo.bind(this)))}addLogoVelocity(){if(!this.rotateFlag&&0===this.leaveCounter){this.currentVelocity=4,this.leaveCounter=200,requestAnimationFrame(this.rotateLogo.bind(this));return}this.currentVelocity=4,this.leaveCounter=200}startRotateLogo(){this.rotateFlag||0!==this.leaveCounter?(this.rotateFlag=!0,this.leaveCounter=200):(this.rotateFlag=!0,requestAnimationFrame(this.rotateLogo.bind(this)))}stopRotateLogo(){this.rotateFlag=!1}rotateLogo(){let e=document.querySelector("#nav-bar__title__logo");if(!e)return;let t=getComputedStyle(e,null).getPropertyValue("transform");if("none"===t)return;let n=t.split("(")[1].split(")")[0].split(","),r=parseFloat(n[0]),o=180/Math.PI*Math.atan2(parseFloat(n[1]),r);this.rotateFlag?this.currentVelocity<1.8&&(this.currentVelocity+=.06):this.currentVelocity>0&&(this.currentVelocity-=.03),this.currentVelocity<0&&(this.currentVelocity=0),o<0&&(o+=360);let s=this.currentVelocity+o;if(e.style.transform=`rotate(${s}deg)`,this.rotateFlag){this.leaveCounter=200,requestAnimationFrame(this.rotateLogo.bind(this));return}this.leaveCounter--,this.currentVelocity<=0&&(this.leaveCounter=0),this.leaveCounter>0&&requestAnimationFrame(this.rotateLogo.bind(this))}scrollInit(){this.scrollButton=document.querySelector("#scroll__button--to-top"),this.rootElement=document.documentElement,this.scrollButton&&this.scrollButton.addEventListener("click",this.scrollToTop.bind(this)),window.addEventListener("scroll",this.handleScroll.bind(this))}handleScroll(e){e.preventDefault();let t=this.rootElement.scrollHeight-this.rootElement.clientHeight,n=document.getElementById("content__selectorbox"),r=0;if(n){let e=document.body.getBoundingClientRect(),t=n.getBoundingClientRect().top-e.top;t>0&&(r=t)}(this.rootElement.scrollTop-r)/t>.05?this.scrollButton?.classList.add("scroll__button--to-top--show"):this.scrollButton?.classList.remove("scroll__button--to-top--show")}scrollToTop(){let e=document.getElementById("content__selectorbox"),t=0;if(null!==e){let n=document.body.getBoundingClientRect(),r=e.getBoundingClientRect().top-n.top;r>0&&(t=r-20)}window.requestAnimationFrame(()=>{let e="smooth";if(navigator.userAgent.includes("Chrome")){let t=navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/);t&&t.length>=1&&!isNaN(Number(t[1]))&&130>Number(t[1])&&(e="auto")}this.rootElement?.scrollTo({top:t,behavior:e})})}loadTooltip(e,t){let n=document.createElement("tooltip");n.id="nav-bar__tooltip";let r=document.createTextNode(t);if(null===e)return;n.innerHTML="",n.appendChild(r);let o=document.getElementsByTagName("tooltip")[0];o&&o.remove();let s=e.getBoundingClientRect();n.style.top=`${s.bottom-10}px`,n.style.left=`${s.right}px`,document.body.appendChild(n)}unloadTooltip(){let e=document.getElementsByTagName("tooltip")[0];e&&e.remove()}dragScrollElement(e,t){let n=document.querySelector(e);if(null===n)return;let r=e=>{this.mouseDown=!0,this.startX=e instanceof MouseEvent?e.pageX-n.offsetLeft:e.changedTouches[0].pageX-n.offsetLeft,this.scrollLeft=n.scrollLeft},o=e=>{this.mouseDown=!0,this.startY=e instanceof MouseEvent?e.pageY-n.offsetTop:e.changedTouches[0].pageY-n.offsetTop,this.scrollTop=n.scrollTop},s=e=>{if(e.preventDefault(),e.stopPropagation(),!this.mouseDown)return;let t=(e instanceof MouseEvent?e.pageX-n.offsetLeft:e.changedTouches[0].pageX-n.offsetLeft)-this.startX;n.scrollLeft=this.scrollLeft-t},i=e=>{if(e.preventDefault(),e.stopPropagation(),!this.mouseDown)return;let t=(e instanceof MouseEvent?e.pageY-n.offsetTop:e.changedTouches[0].pageY-n.offsetTop)-this.startY;n.scrollTop=this.scrollTop-t},l=()=>{this.mouseDown=!1};if(1===t){n.addEventListener("mousemove",i,!1),n.addEventListener("mousedown",o,!1),n.addEventListener("mouseup",l,!1),n.addEventListener("mouseleave",l,!1),n.addEventListener("touchmove",i,!1),n.addEventListener("touchstart",o,!1),n.addEventListener("touchend",l,!1);return}n.addEventListener("mousemove",s,!1),n.addEventListener("mousedown",r,!1),n.addEventListener("mouseup",l,!1),n.addEventListener("mouseleave",l,!1),n.addEventListener("touchmove",s,!1),n.addEventListener("touchstart",r,!1),n.addEventListener("touchend",l,!1)}};let eT=new Map,eA=[{document:"./README",section:"README",dim:"N/A",ref:"readme"},{document:"./STYLING",section:"Document Styling",dim:"N/A",ref:"styling"},{document:"./CONTRIBUTING",section:"How to Contribute",dim:"N/A",ref:"contributing"},{document:"TODPS2",section:"Tales of Destiny",dim:"2D",ref:"todps2"},{document:"TODPS2-C",section:"Tales of Destiny",dim:"2D",ref:"todps2-c"},{document:"TODPS2-B",section:"Tales of Destiny",dim:"2D",ref:"todps2-b"},{document:"TOL",section:"Tales of Legendia",dim:"2D",ref:"tol"},{document:"TOA",section:"Tales of Arise",dim:"3D",ref:"toa"},{document:"TOV",section:"Tales of Vesperia",dim:"3D",ref:"tov"},{document:"TOTA",section:"Tales of the Abyss",dim:"3D",ref:"tota"},{document:"TOX2",section:"Tales of Xillia 2",dim:"3D",ref:"tox2"},{document:"TOZ",section:"Tales of Zestiria",dim:"3D",ref:"toz"},{document:"HOME",section:"HOME",dim:"N/A",ref:""}],eM=null,eL=null,eO=new eS(eB,eA),e$=new eC(eO),ew=new eE(eO),eI=new ek,eq=eA.map(async e=>{if(e.document.includes("./")){let t=await eI.parseGFM(e.document);eT.set(e,t)}else if("HOME"===e.document){let t=await eI.asyncRead("./home.html");eT.set(e,t)}else{let t=await eI.parseGFM(`./tech/${e.document.toLowerCase()}`);eT.set(e,t)}}),eN="",eH=!1;function ej(){document.querySelectorAll("div#nav-bar__title, p.footer-container__help--links, img#title-text__img").forEach(e=>{eB(e)}),Promise.all(eq).then(()=>{(eM=new ey(eT,eB,eO)).initSearchIcons(),eM.initOnboardingIcon(),eL=new ex(eO),eO.scrollInit(),eO.logoInit(),window.addEventListener("popstate",e=>{e.preventDefault(),e.stopPropagation(),e.state?eD({...e.state,pushState:!1}):eD({document:"HOME",section:"HOME",pushState:!1})});let e=document.location.pathname.substring(1),t=e,n=e.split("/"),r="";for(let o of(n.length>1&&(r=n[1],t=n[0]),eA))if(o.ref===t){""===r?(eD({...o,pushState:!1}),window.history.replaceState({...o},o.section,e)):(eD({...o,redirect:`#${r}`,pushState:!1}),window.history.replaceState({...o,redirect:`#${r}`},o.section,e));break}})}function eB(e){let t=document.querySelector("#nav-bar__search--input");null!==t&&t.blur(),e.removeEventListener("click",eR),e.addEventListener("click",eR)}function eR(e){e.preventDefault(),e.stopPropagation();let t=document.querySelector("#nav-bar__search--input");null!==t&&(document.activeElement?.blur(),t.blur());let n=e.currentTarget;n&&n instanceof HTMLElement&&eD(n.dataset)}function eD(e){let t=null;eH?eP(e):new Promise(e=>{import("./katex.min.mjs").then(t=>{ew.setKatex(t.default);let n=document.createElement("link");n.rel="stylesheet",n.crossOrigin="anonymous",n.href="styles/katex.min.css",n.onload=()=>{e("KaTeX JS and CSS loaded")},document.head.appendChild(n)})}).then(()=>{eH=!0,eP(e)})}function eP(e){let t=document.getElementById("content");t&&(eM?.clearFunction(),eO.addLogoVelocity(),"HOME"===e.document?(function(e,t){let n=eN;if((eN=t.document||"")===n)return;eL?.clearHeadings(),eO.updateStatus("HOME","HOME",!1),eL?.clearSectionTOC();let r=null;for(let[e,t]of eT.entries())if("HOME"===e.document){r=t;break}r&&(e.innerHTML=r),document.title="Tales Tech Encyclopaedia";let o=document.querySelector('meta[name="description"]');o&&o.setAttribute("content","Tales Tech Encyclopaedia (TTE), is a project that aims to document techniques and mechanics on the games of the 'Tales of Series'."),null==t.pushState&&window.history.pushState(JSON.parse(JSON.stringify(t)),document.title,"/"),document.querySelectorAll("span.content__redirect").forEach(e=>{eB(e)}),document.querySelectorAll(".content__home__showcase-item--play").forEach(e=>{e.addEventListener("click",e=>{let t=e.currentTarget;if(!t||!(t instanceof HTMLElement))return;if("play_circle"===t.innerHTML){t.innerHTML="stop_circle";let e=document.createElement("video");e.src=t.dataset.video||"",e.className="content__home__showcase-item--video",e.autoplay=!0,e.controls=!1,e.muted=!0,e.loop=!0,t.parentElement?.appendChild(e),setTimeout(()=>{e.style.opacity="1"},50);return}let n=t.parentElement?.querySelector(".content__home__showcase-item--video");n?(n.style.opacity="0",setTimeout(()=>{n.remove(),t.innerHTML="play_circle"},500)):t.innerHTML="play_circle"})}),eM?.initOnboardingIcon()}(t,e),t.style.minHeight="600px"):e.document?.includes("./")?(t.style.minHeight="600px",function(e,t){let n=eN;if((eN=t.document||"")===n)return;eL?.clearHeadings(),eO.updateStatus(t.document||"",t.section||"",!1),eL?.clearSectionTOC();let r=t.document,o=null;for(let[e,t]of eT.entries())if(e.document===r){o=t;break}o&&(e.innerHTML=o),ez(),document.title="Tales Tech Encyclopaedia";let s=document.querySelector('meta[name="description"]');s&&s.setAttribute("content","Tales Tech Encyclopaedia (TTE), is a project that aims to document techniques and mechanics on the games of the 'Tales of Series'.");let i=`/${eN?.toLowerCase()||""}`;null==t.pushState&&window.history.pushState(JSON.parse(JSON.stringify(t)),document.title,i);let l=document.querySelector("#nav-bar");l?.scrollIntoView({behavior:"smooth"})}(t,e)):(t.style.minHeight="100vh",function(e,t){eO.updateStatus(t.document||"",t.section||"",!0);let n=eN;if((eN=t.document||"")===n)return t.redirect?(eM?.revealID(t.redirect.substring(1)),t.redirect&&document.querySelector(t.redirect)?.scrollIntoView({behavior:"smooth"})):document.querySelector("#nav-bar")?.scrollIntoView({behavior:"smooth"});eL?.clearHeadings(),eL?.clearSectionTOC();let r=t.document,o=null;for(let[e,t]of eT.entries())if(e.document===r){o=t;break}e.style.visibility="hidden",o&&(e.innerHTML=o),document.title=`TTE - ${t.section||""}`;let s=document.querySelector('meta[name="description"]');s&&s.setAttribute("content",`Tales Tech Encyclopaedia (TTE) article on ${t.section||""}.`);let i=`/${eN?.toLowerCase()||""}`+(t.redirect&&"NONE"!==t.redirect?`/${t.redirect.substring(1)}`:"");null==t.pushState&&window.history.pushState(JSON.parse(JSON.stringify(t)),document.title,i),e$.collapseHeadings(e),function(){document.querySelectorAll(".content__selectorbox--item").forEach(e=>{e.style.setProperty("--highlight-color",e.dataset.highlight||""),e.addEventListener("click",e=>{let t=e.currentTarget;if(!t||!(t instanceof HTMLElement))return;document.querySelectorAll(".content__selectorbox--item").forEach(e=>{e.className="content__selectorbox--item"}),t.className="content__selectorbox--item selected";let n=eO.h2Collection.filter(e=>e.id===t.dataset.open),r=document.getElementById("content__currenth2");r&&n.length>0&&(r.innerHTML=n[0].content),document.querySelectorAll(".content__collapse").forEach(e=>{e.addEventListener("click",e$.collapseHeadingStyle)}),ez(),eL?.highlightTOC()})});let e=document.querySelectorAll(".content__selectorbox--item")[0];e?.click()}(),t.redirect&&"NONE"!==t.redirect?(eM?.revealID(t.redirect.substring(1)),setTimeout(()=>{t.redirect&&document.querySelector(t.redirect)?.scrollIntoView({behavior:"smooth"})},250)):document.querySelector("#nav-bar")?.scrollIntoView({behavior:"smooth"})}(t,e)))}function ez(){ew.compileDirectives(),eL?.createTOC(eN),document.querySelectorAll(".content__toc--search").forEach(e=>{eB(e)}),e$.shareHeadings()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",ej):ej();export{eB as addPageChangeEvent,ez as updatePage};